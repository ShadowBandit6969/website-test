

<style>
  :root {
    --primary: #ff6600;
    --text-main: #1c1c1e;
    --text-subtle: #555;
    --bg-card: #ffffff;
    --grain-url: url("https://grainy-gradients.vercel.app/noise.svg");
  }

  /* ===============================
     Apple Services – Basis (Light)
     =============================== */
  .apple-services {
    padding: 6rem 2rem;
    background: transparent;
    color: var(--text-main);
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
    transition: background-color .25s ease, color .25s ease;
  }

  .apple-services h2 {
    font-size: 2.8rem;
    text-align: center;
    margin-bottom: 5rem;
    color: var(--text-main);
    font-weight: 900;              /* wie branchen: starke Headline */
    letter-spacing: -0.02em;
    transition: color .25s ease;
  }

  .service-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 4rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .service-card {
    position: relative;
    background: linear-gradient(135deg, #ffffff 0%, #ffffff 20%, #9e9e9e80 100%);
    border-radius: 16px;
    padding: 2.5rem;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  }

  .service-card::before {
    content: "";
    position: absolute;
    inset: 0;
    background-image: var(--grain-url);
    opacity: 0.05;
    z-index: 1;
    pointer-events: none;
    transition: opacity 0.3s ease;
  }

  .service-card .inner {
    position: relative;
    z-index: 2;
  }

  .service-card h3 {
    font-size: 1.6rem;
    margin-bottom: 1.2rem;
    font-weight: 700;
    color: var(--text-main);
    letter-spacing: -0.01em;
  }

  .service-card ul {
    list-style: none;
    padding: 0;
    margin: 0;
    color: var(--text-subtle);
    font-size: 1rem;
    line-height: 1.75;
  }

  .service-card ul li { margin-bottom: 0.75rem; }

  .service-card { display: flex; flex-direction: column; }
  .service-card .inner { display: flex; flex-direction: column; flex-grow: 1; justify-content: space-between; }

  .cta {
    display: inline-block;
    margin-top: 2rem;
    font-size: 0.95rem;
    font-weight: 500;
    color: rgb(255, 255, 255);
    text-decoration: none;
    border: 2px solid rgb(255, 255, 255);
    background-color: hwb(0 87% 13% / 0);
    padding: 0.6rem 1.3rem;
    border-radius: 8px;
    transition: all 0.3s ease;
    align-self: flex-start;
    margin-bottom: 1rem;
  }

  .cta:hover {
    background-color: hwb(0 100% 0%);
    box-shadow: 0 0 0 2px rgb(255, 255, 255);
  }

  @media (max-width: 375px) {
    .service-grid { grid-template-columns: 1fr; gap: 2rem; }
    .service-card { padding: 2rem 1.2rem; border-radius: 16px; }
    .service-card h3 { font-size: 1.2rem; }
    .service-card ul { font-size: 0.95rem; }
    .cta { display: block; width: 100%; text-align: center; font-size: 0.95rem; padding: 0.8rem 1rem; }
  }

  @media (max-width: 320px) {
    .service-card { padding: 1.5rem 1rem; }
    .cta { font-size: 0.9rem; padding: 0.7rem 1rem; }
  }

  /* Ab 1152px anzeigen und zweifache Breite */
  @media (min-width: 1152px) {
    .service-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2rem;
      align-items: stretch;
    }
    .service-card { display: block; }
    .video-card { display: block; grid-column: span 2; height: 100%; }
  }

  @media (min-width: 1300px) {
    .service-grid {
      max-width: 1300px;
      grid-template-columns: repeat(3, minmax(380px, 1fr));
      gap: 4rem;
      justify-content: center;
    }
  }

  @media (min-width: 1600px) {
    .apple-services { padding: 6rem 2rem; }
    .apple-services h2 { font-size: 3rem; margin-bottom: 5rem; }
    .service-grid {
      max-width: 1800px;
      grid-template-columns: repeat(3, minmax(460px, 1fr));
      gap: 4rem;
      justify-content: center;
    }
    .service-card { padding: 2.5rem; border-radius: 18px; }
    .service-card h3 { font-size: 1.6rem; margin-bottom: 1.2rem; }
    .service-card ul { font-size: 1.05rem; line-height: 1.75; }
    .service-card ul li { margin-bottom: 0.8rem; }
    .cta { font-size: 1rem; padding: 0.7rem 1.4rem; border-radius: 8px; color: #ffffff;}
  }

  /* Individuelle Farben je Service (Gradients + weißer Text) */
  .service-card:nth-child(1) {
    background: linear-gradient(270deg, #04006c, #6f00ff, #050088);
    background-size: 600% 600%;
    color: #fff;
  }

  .service-card:nth-child(2) {
    background: linear-gradient(135deg, #0d0d0d, #000e5c, #0d0d0d);
    background-size: 300% 300%;
    color: #fff;
  }

  .service-card:nth-child(3) {
    background: linear-gradient(135deg, #ff5100, hwb(340 0% 0%), #ff5100);
    background-size: 400% 400%;
    color: #fff;
  }

  .service-card:nth-child(4) {
    background: linear-gradient(135deg, #0d0d0d, #000e5c, #0d0d0d);
    background-size: 300% 300%;
    color: #fff;
  }

  /* Basisstil für alle Cards (zweiter Block zusammengeführt) */
  .service-card {
    position: relative;
    overflow: hidden;
    transition: transform 0.4s ease, box-shadow 0.4s ease;
    background-position: 0% 50%;
    will-change: transform, box-shadow, background-position;
    padding: 2.5rem;
    border-radius: 18px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }

  /* Glanz-Overlay */
  .service-card::before {
    content: "";
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle at center, rgba(255, 255, 255, 0.18), transparent 70%);
    transform: scale(0.5);
    opacity: 0;
    transition: all 0.6s ease;
    pointer-events: none;
    z-index: 1;
  }

  .service-card:hover::before { transform: scale(1); opacity: 0.25; }

  .service-card:hover {
    transform: translateY(-8px) scale(1.035);
    box-shadow: 0 30px 60px rgba(0, 0, 0, 0.4);
    animation: serviceGradientPulse 0.5s ease 1 forwards;
    background-position: 100% 50%;
    z-index: 10;
  }

  @keyframes serviceGradientPulse {
    0% { background-position: 0% 50%; }
    100% { background-position: 100% 50%; }
  }

  /* Textfarben dynamisch über inherit halten */
  .service-card .inner,
  .service-card h3,
  .service-card ul,
  .service-card ul li{
    position: relative;
    z-index: 2;
    color: inherit;
  }
   /* Titel-Optik (zweiter Block konsistent) */
  .service-card h3 {
    font-size: 1.6rem;
    margin-bottom: 1.2rem;
    font-weight: 700;
    letter-spacing: -0.01em;
  }

  /* Listen (zweiter Block konsistent) */
  .service-card ul { list-style: none; padding: 0; margin: 0; font-size: 1.05rem; line-height: 1.75; }
  .service-card ul li { margin-bottom: 0.8rem; }



/* Basis-CTA für helle Karten bleibt wie zuvor über .cta */

  @media (min-width: 1152px) {
    .service-card:nth-child(2) { grid-column: span 2; }
    .service-card:nth-child(3) { grid-column: span 2; }
  }

  .image-overlay { position: absolute; bottom: 0rem; right: 1rem; z-index: 3; }
  .image-overlay img { width: 480px; height: auto; opacity: 1; transition: opacity 0.3s ease; }
  .service-card:hover .image-overlay img { opacity: 1; }
  .service-card:nth-child(2) .image-overlay { bottom: -0.5rem; }
  .service-card:nth-child(3) .image-overlay { bottom: -2.3rem; }

  /* Planet/3D-Deko */
  .planet-image {
    position: absolute;
    bottom: -11.5rem;
    right: -8rem;
    width: 140px;
    height: auto;
    opacity: 0;
    transform: scale(1.25);
    pointer-events: none;
    z-index: 2;
    transform-origin: center;
    transition: opacity 0.6s ease, transform 0.6s ease; /* smoother */
  }

  .card-3d:hover .planet-image,
  .card-3d.clicked .planet-image {
    opacity: 1;
    animation: planetGrow 1.2s ease-out forwards; /* nur einmal */
  }

  @keyframes planetGrow {
    0%   { transform: scale(1.25); }
    100% { transform: scale(1.32); } /* weicher von A nach B */
  }

  .planet-wrapper {
    position: absolute;
    bottom: 2.5rem;
    right: 4rem;
    width: 490px;
    height: 490px;
    z-index: 2;
    pointer-events: none;
    transform-origin: center;
  }

  .card-3d:hover .planet-wrapper,
  .card-3d.clicked .planet-wrapper {
    animation: planetRotate 8s linear infinite;
  }

  @keyframes planetRotate {
    0%   { transform: rotate(0deg); }
    100% { transform: rotate(20deg); }
  }

  @keyframes planetRotate { 0% { transform: rotate(0deg); } 100% { transform: rotate(10deg); } }
  .card-3d:hover .planet-wrapper,
  .card-3d.clicked .planet-wrapper {
    animation: planetRotate 16s ease-in-out infinite;
  }

  @keyframes planetRotate {
    0%   { transform: rotate(0deg); }
    40%  { transform: rotate(10deg); }   /* schneller hin */
    100% { transform: rotate(0deg); }    /* langsamer zurück */
  }

  @media (max-width: 1151px) {
    .image-overlay img:not(.planet-image) { display: none !important; }
  }

  @media (max-width: 1299px) and (min-width: 1151px) {
    .service-card:nth-child(2) .image-overlay { right: -2rem; }
    .service-card:nth-child(3) .image-overlay { right: -2rem; }
  }

  @media (max-width: 1299px) {
    .planet-wrapper, .planet-image { display: none !important; }
  }

  /* ===============================
     Dark Mode scoped NUR für #tools.apple-services
     =============================== */
  :root[data-theme="dark"] #tools.apple-services {
    background: #000;
    color: #fff;
  }
  :root[data-theme="dark"] #tools.apple-services h2 {
    color: #fff;
  }

  /* Auto-Mode respektiert System-Dark */
  @media (prefers-color-scheme: dark) {
    :root[data-theme="auto"] #tools.apple-services {
      background: #000;
      color: #fff;
    }
    :root[data-theme="auto"] #tools.apple-services h2 {
      color: #fff;
    }
  }
  .apple-services .services-subline{
    text-align:center;
    margin:-4rem 0 3rem; /* sitzt optisch unter der großen H2 */
    font-size:1.1rem;
    color:#666;
  }
  :root[data-theme="dark"] #tools.apple-services .services-subline{ color:#bbb; }
  @media (prefers-color-scheme: dark){
    :root[data-theme="auto"] #tools.apple-services .services-subline{ color:#bbb; }
  }
  /* gleiche Container-Logik wie .persona-clean.container */
  .apple-services.container{ max-width:1400px; margin:0 auto; }

  /* auf kleinen Screens auf einspaltig und mit gleicher „Kartenbreite“-Anmutung */
  @media (max-width: 600px){
    .apple-services{ padding:4rem 1rem; } /* wie .persona-clean */
    .service-grid{
      grid-template-columns: 1fr;
      max-width: 640px;           /* fühlt sich wie die Persona-Box an */
      margin: 0 auto;
      gap: 2rem;
    }
    .service-card{ margin-inline:auto; }
  }
  /* Dark-Outline für Persona-Karten */
  :root[data-theme="dark"] #branchen .persona-card{ border:1px solid rgba(255,255,255,.35); }
  @media (prefers-color-scheme: dark){
    :root[data-theme="auto"] #branchen .persona-card{ border:1px solid rgba(255,255,255,.35); }
  }

  /* Dark-Outline für Service-Karten */
  :root[data-theme="dark"] #tools .service-card{ border:1px solid rgba(255,255,255,.35); }
  @media (prefers-color-scheme: dark){
    :root[data-theme="auto"] #tools .service-card{ border:1px solid rgba(255,255,255,.35); }
  }
  /* H2-Abstand wie bei #branchen */
  .apple-services h2{
    margin-bottom: .8rem;            /* statt 5rem */
    font-weight: 900;
    letter-spacing: -0.02em;
  }

  /* Subline exakt wie bei .persona-subline */
  #tools .persona-subline{
    font-size: 1.1rem;
    color: #666;
    margin-bottom: 4rem;              /* gleiche optische Tiefe */
    text-align: center;
  }

  /* Dark-Mode gleich wie bei #branchen */
  :root[data-theme="dark"] #tools .persona-subline,
  :root[data-theme="dark"] #tools h2{ color:#fff; }

  @media (prefers-color-scheme: dark){
    :root[data-theme="auto"] #tools .persona-subline,
    :root[data-theme="auto"] #tools h2{ color:#fff; }
  }

  /* Astronaut sicher über dem Planeten */
  .image-overlay { position: absolute; bottom: 0rem; right: 1rem; z-index: 3; }
  .image-overlay .astronaut-image{
    position: relative;   /* erzeugt Stacking-Kontext */
    z-index: 4;           /* vor planet-wrapper (2) */
    display: block;
  }

  /* Planet darunter lassen */
  .planet-wrapper{ z-index: 2; }
  .planet-image{ z-index: 2; }

  /* 375–600px: alle Cards gleich groß zentriert */
  @media (min-width: 375px) and (max-width: 600px) {
    /* Gleiche "Kartenbreite"-Anmutung wie Webdesign */
    .service-card {
      width: 90%;
      margin-inline: auto;
      padding: 2rem 1.2rem;          /* wie bei ≤375px, damit alles konsistent wirkt */
      border-radius: 16px;
    }
    .service-card h3 { font-size: 1.4rem; }
    .service-card ul { font-size: 1rem; line-height: 1.7; }
    .cta {
      display: block;
      width: 100%;
      text-align: center;
      font-size: 0.95rem;
      padding: 0.8rem 1rem;
    }
  }
  /* ——— subtle foundations + parallax prep for #tools ——— */
  #tools .service-grid{ perspective:1000px }
  #tools .service-card{
    transform-style: flat;         /* statt preserve-3d */
    backface-visibility: visible;  /* war: hidden */
  }

  /* minimale Hover-Eleganz, ohne Tilt */
  @media (hover:hover){
    #tools .service-card:hover{
      transform: translateY(-6px);
      box-shadow: 0 18px 46px rgba(0,0,0,.22);
    }
  }

  @media (prefers-reduced-motion: reduce){
    #tools .service-card, #tools .service-grid{ transition: none !important; animation: none !important }
  }

  .cta {
    display: inline-block;
    margin-top: 2rem;
    font-size: 0.95rem;
    font-weight: 500;
    color: rgb(255, 255, 255);
    text-decoration: none;
    border: 1px solid rgb(255, 255, 255);
    background-color: hwb(0 87% 13% / 0);
    padding: 0.6rem 1.3rem;
    border-radius: 8px;
    transition: all 0.3s ease;
    align-self: flex-start;
    margin-bottom: 1rem;
  }

  .cta:hover {
    background-color: hwb(0 0% 100% / 0.055);
    box-shadow: 0 0 0 2px rgb(255, 255, 255);
  }

  /* Ersetzt die bisherige Regel */
  .service-card .inner{
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    justify-content: flex-start; /* statt space-between */
    gap: 1rem;                   /* konsistente Abstände */
  }

  /* CTA ans Kartenende drücken */
  .service-card .cta{
    margin-top: auto;
  }
  .service-card h3{ margin-bottom: .6rem; }
  .service-card ul{ margin: 0; }
  @media (hover:hover){
    #tools .service-card{
      transition: transform .4s ease, box-shadow .4s ease, background-position .4s ease;
      transition-delay: .05s; /* minimiert race condition direkt nach Entry */
    }
  }

  /* Webflow setzt .image-overlay { background:#fff; inset:0 0 0 auto; … }  -> überschreiben */
  #tools .image-overlay{
    background: transparent !important;
    inset: auto !important;         /* verhindert das aufgezogene weiße Feld */
    bottom: 0rem !important;
    right: 1rem !important;
    left: auto !important;
    top: auto !important;
    z-index: 3;
  }
  #tools .image-overlay img{ width:480px; height:auto; }

  /* ——— Typografie-Verbesserungen (Farben via inherit) ——— */
  #tools .service-card{
    font-feature-settings: "liga","calt","ss01";
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  #tools .service-card h3{
    font-size: clamp(1.25rem, 1.1rem + 0.6vw, 1.7rem);
    letter-spacing: -0.015em;
    line-height: 1.15;
    margin-bottom: .4rem;
    color: inherit;
  }
  #tools .service-card ul{
    margin-top: .25rem;
    font-size: clamp(.98rem, .92rem + .25vw, 1.06rem);
    line-height: 1.8;
    color: color-mix(in oklab, currentColor 78%, transparent);
  }
  #tools .service-card ul li{
    position: relative;
    padding-left: 1.15rem;
    margin: .35rem 0;
  }
  #tools .service-card ul li::before{
    content: "";
    position: absolute;
    left: 0;
    top: .62em;
    width: .42rem;
    height: .42rem;
    border-radius: 50%;
    background: color-mix(in oklab, currentColor 70%, transparent);
    box-shadow: 0 0 0 2px color-mix(in oklab, currentColor 25%, transparent) inset;
    opacity: .9;
  }
  @media (hover:hover){
    #tools .service-card h3{ text-shadow: 0 1px 0 rgba(0,0,0,.12); }
  }

  /* ——— Video-Card: füllt die komplette Karte ——— */
  #tools .service-card.video-card{
    padding: 0;                 /* Inhalt randlos */
    min-height: 280px;          /* Sicherheitsminimum im Grid */
    display: block;             /* kein Flex nötig */
  }
  #tools .service-card.video-card::before{ display: none; } /* Glanz aus über Video */
  #tools .service-card.video-card video{
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;          /* füllt die Karte komplett */
    object-position: center;
    display: block;
  }
  @media (prefers-reduced-motion: reduce){
    #tools .service-card.video-card video{ animation: none; }
  }
  /* —— Layout-Fix: Social-Media-Karte NICHT umfließen lassen —— */
@media (min-width: 1152px){
  /* vorhandene Spans der 2. & 3. Karte bleiben wie bei dir */
  #tools .service-grid > .service-card:nth-child(4){
    grid-column: 3 / span 1 !important; /* Social Media fix in Spalte 3 */
  }

  /* optional, hilft dem Grid beim Zurückfüllen */
  #tools .service-grid{
    grid-auto-flow: row dense;
  }
}

/* Video-Karte bleibt vollflächig, ohne das Grid zu beeinflussen */
#tools .service-card.video-card{
  padding: 0;
  min-height: 280px;
  display: block;
}
#tools .service-card.video-card::before{ display:none; }
#tools .service-card.video-card video{
  position: absolute; inset: 0;
  width: 100%; height: 100%;
  object-fit: cover; object-position: center;
}
/* —— Grafikdesign-Karte: Astronautenposition responsiv —— */

/* Unter 1600px: deutlicher Versatz nach rechts & unten */
@media (max-width: 1599px) {
  #tools .service-card:nth-child(3) .image-overlay {
    right: -4rem !important;
    bottom: -3rem !important;
  }
}

/* Ab 1600px: nur leicht nach unten für bessere Balance */
@media (min-width: 1600px) {
  #tools .service-card:nth-child(3) .image-overlay {
    right: -1rem !important;
    bottom: -2.5rem !important;
  }
}

</style>

<section class="container apple-services" id="tools">
  <h2 class="persona-title">Unsere Leistungen</h2>
  <p class="persona-subline">Suchmaschinenoptimierung, responsives Webdesign & ganzheitliche Performance für Ihr digitales Wachstum.</p>

  <div class="service-grid">

    <!-- SEO -->
    <div class="service-card">
      <div class="inner">
        <h3>SEO</h3>
        <ul>
          <li>Keyword- & Konkurrenzanalyse</li>
          <li>OnPage-Optimierung für bessere Rankings</li>
          <li>Technisches SEO (Core Web Vitals, Ladezeiten, Struktur)</li>
          <li>Content-Strategie & SEO-konforme Texte</li>
        </ul>
        <a href="./SEO.html" class="cta">Mehr erfahren</a>
      </div>
    </div>

    <!-- Responsive Design -->
    <div class="service-card card-3d" onclick="togglePlanet(this)">
      <div class="inner">
        <h3>Responsive Design</h3>
        <ul>
          <li>Mobile-First Layouts für alle Endgeräte</li>
          <li>Optimierte Benutzerführung & UX-Design</li>
          <li>Performanceorientierte Entwicklung & Testing</li>
          <li>Cross-Browser-Kompatibilität & Barrierefreiheit</li>
        </ul>

        <div class="image-overlay">
          <div class="planet-wrapper">
            <img class="planet-image" loading="lazy" src="./indexFotoSlideShow/planet.webp" alt="Planet" />
          </div>
          <img class="lazy-image astronaut-image" data-src="./indexFotoSlideShow/2.webp" alt="Responsive Design Icon / Astronaut" />
        </div>

        <a href="./ResponsiveDesign.html" class="cta">Mehr erfahren</a>
      </div>
    </div>

    <!-- SEO-Optimierung -->
    <div class="service-card">
      <div class="inner">
        <h3>SEO-Optimierung</h3>
        <ul>
          <li>Technische & strukturelle Website-Analyse</li>
          <li>Optimierung von Meta-Daten & interner Verlinkung</li>
          <li>Pagespeed & Core Web Vitals Optimierung</li>
          <li>Kontinuierliches Monitoring & Reporting</li>
        </ul>
        <div class="image-overlay">
          <img class="lazy-image" data-src="./indexFotoSlideShow/astro sitzend.webp" alt="SEO Icon" />
        </div>

        <a href="./SEOOptimierung.html" class="cta">Mehr erfahren</a>
      </div>
    </div>

    <!-- Social Media (Showreel) -->
    <div class="service-card video-card">
      <video
        autoplay
        muted
        loop
        playsinline
        preload="auto"
        poster="./indexFotoSlideShow/social-poster.jpg"
        aria-label="Showreel Online Marketing"
      >
        <source src="./videos/social-showreel.webm" type="video/webm" />
        <source src="./indexFotoSlideShow/kartenvideo.mp4"  type="video/mp4" />
        Dein Browser unterstützt das Video-Tag nicht.
      </video>
    </div>

  </div>
</section>


<script>
  document.addEventListener("DOMContentLoaded", () => {
    const lazyImages = document.querySelectorAll("img.lazy-image");

    const observer = new IntersectionObserver((entries, obs) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const img = entry.target;
          img.src = img.dataset.src;
          img.classList.remove("lazy-image");
          obs.unobserve(img);
        }
      });
    }, {
      rootMargin: "100px 0px",
      threshold: 0.01
    });

    lazyImages.forEach(img => observer.observe(img));
  });
</script>
