<!DOCTYPE html>
<html lang="de" data-theme="auto">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fusion³ – UX & Webdesign Studio</title>
  <meta name="description" content="Fusion³ ist dein Partner für UX-Design, Webdesign & Prototyping. Wir gestalten digitale Erlebnisse mit Substanz.">

  <!-- Google Fonts Optimierung -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet" media="all" onload="this.media='all'">
  <noscript>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">
  </noscript>

  <!-- Lokale Fonts optimieren -->
  <link rel="preload" as="style" href="./fonts/fonts.css">
  <link rel="stylesheet" href="./fonts/fonts.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="./fonts/fonts.css"></noscript>

  <!-- Optional Scripts -->
  <!-- Module: ohne defer (Module laden implizit deferred) -->
  <script type="module" src="https://unpkg.com/feather-icons"></script>
  <!-- Legacy Fallback -->
  <script nomodule src="feather-icons.legacy.js"></script>
  <!-- Normales Script kann defer tragen -->
  <script src="https://unpkg.com/scrollreveal" defer></script>

  <!-- Analytics Beispiel -->
  <script>
    (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "t1mbvlhldj");
  </script>

  <!-- ===============================
       GLOBAL CSS
       =============================== -->
  <style>
    :root{
      --accent:#0062ff;
      --text:#111;
      --muted:#555;
      --border:rgba(0,0,0,.08);
      --surface:#ffffff;
      --container-width: min(95vw, 1340px);
      --header-pad-y: .75rem;
      --radius: 12px;
      --primary: #ff4d00;
      --secondary: #ff9900;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --text:#f5f7fa;
        --muted:#b7bec7;
        --border:rgba(255,255,255,.12);
        --surface:#000000;
      }
    }
    :root[data-theme="dark"]{
      --text:#f5f7fa;
      --muted:#b7bec7;
      --border:rgba(255,255,255,.12);
      --surface:#000000;
    }

    *{margin:0;padding:0;box-sizing:border-box}
    html,body{
      font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial,sans-serif;
      background:#fff;
      color:var(--text);
      scroll-behavior:smooth;
    }
    :root[data-theme="dark"] body{ background:#000 }

    a{color:inherit;text-decoration:none;transition:color .2s ease,opacity .2s ease}
    h1,h2,h3,h4{font-weight:900;letter-spacing:-.02em}
    .container{max-width:var(--container-width);margin:0 auto;padding:5rem 2rem}
    .section-title{font-size:clamp(2rem, 1.2rem + 2.4vw, 2.8rem);text-align:center;margin-bottom:.5rem;color:var(--text);font-weight:700;letter-spacing:-.02em}

    /* Skip-Link */
    .skip-link{ position:absolute; left:-9999px; top:auto; z-index:1000; }
    .skip-link:focus{
      left:auto; top:.5rem; inset-inline-start:.5rem;
      background:#000; color:#fff; padding:.5rem .75rem; border-radius:.5rem;
    }

    /* ===== HERO (Video) ===== */
    main{ display:block; }

    .hero-video-wrapper {
      position: relative;
      min-height: 100svh;
      width: 100%;
      overflow: hidden;
      display: flex; align-items: center; justify-content: center;
      text-align: center;
      background: #000 url('./IndexM/PC.webp') center/cover no-repeat;
    }
    @media (max-width: 1024px) { .hero-video-wrapper { background-image: url('./IndexM/Tablet.webp'); } }
    @media (max-width: 480px)  { .hero-video-wrapper { background-image: url('./IndexM/handy.webp'); } }

    .hero-video-content{
      position: relative; z-index: 2;
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      padding: 3rem 2rem; max-width: 800px; width: 100%;
      color:#fff; text-align:center; border-radius:12px;
      background-color:#2a2a2a63; margin-top:-5rem;
    }
    .hero-video-content::before{ content:none !important; }

    .video-background{
      position:absolute; inset:0; width:100%; height:100%;
      object-fit:cover; object-position:center; z-index:0; pointer-events:none;
    }

    .hero-video-content h1{ font-size:3.8rem; line-height:1.1; margin-bottom:1.2rem; color:#fff; }
    .hero-video-content p { font-size:1.3rem; line-height:1.6; color:rgba(255,255,255,.85); }

    .cta-btn{
      background: linear-gradient(to right, var(--primary), var(--secondary));
      color:#fff; font-weight:700; padding:1rem 2.2rem; border-radius:12px;
      font-size:1rem; text-transform:uppercase; margin-top:2rem; border:none;
      box-shadow:0 0 12px rgba(255,102,0,.3), 0 0 24px rgba(255,102,0,.25);
      transition:all .3s ease; display:inline-block; text-decoration:none;
    }
    .cta-btn:hover,.cta-btn:focus{
      background:var(--secondary); color:#000; transform:scale(1.03);
      cursor:pointer; outline:2px solid var(--primary); outline-offset:4px;
    }

    .video-fallback-image{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; object-position:center; z-index:0; pointer-events:none; }

    @media (max-width:1024px){
      .hero-video-content{ padding:2rem; }
      .hero-video-content h1{ font-size:3rem; }
      .hero-video-content p { font-size:1.1rem; line-height:1.5; }
    }
    @media (max-width:768px){
      .hero-video-content{ padding:1.5rem; margin-top:0; }
      .hero-video-content h1{ font-size:2.2rem; line-height:1.2; }
      .hero-video-content p { font-size:1rem; line-height:1.4; }
      .cta-btn{ font-size:.95rem; padding:.75rem 1.5rem; width:auto; max-width:90%; margin:1.5rem auto 0; }
    }
    @media (max-width:480px){
      .hero-video-content h1{ font-size:1.6rem; line-height:1.3; }
      .hero-video-content p { font-size:.95rem; }
    }
    @media (max-width:425px){
      .cta-btn{ width:100%; max-width:180px; font-size:.9rem; padding:.9rem 1.2rem; text-align:center; margin-inline:auto; }
    }

    @media (min-width:1025px){
      .video-background{
        top:50%; left:50%; width:auto; height:110%;
        transform:translate(-50%,-50%); object-fit:contain;
      }
    }
    @media (min-width:832px) and (max-width:1024px) and (max-height:832px){
      .video-background{
        top:50%; left:50%; width:auto; height:110%;
        transform:translate(-50%,-50%); object-fit:contain;
      }
    }
  </style>

  <style>
    /* ===== Section Headings – Root Tokens ===== */
    :root{
      --sec-title-fs: clamp(2rem, 1.5rem + 2vw, 3rem);
      --sec-title-fw: 900;
      --sec-title-ls: -0.02em;
      --sec-title-mb: 0rem;
      --sec-title-color: var(--text-main, #1c1c1e);
      --sec-sub-fs: 1.1rem;
      --sec-sub-color: #666;
      --sec-sub-mb: 2rem;
      --sec-sub-lh: 1.5;
      --sec-sub-max: 65ch;
    }
    .section-title{
      font-size: var(--sec-title-fs);
      font-weight: var(--sec-title-fw);
      letter-spacing: var(--sec-title-ls);
      margin: 0 0 var(--sec-title-mb);
      color: var(--sec-title-color);
      text-align: center;
    }
    .section-subtitle{
      font-size: var(--sec-sub-fs);
      color: var(--sec-sub-color);
      margin: 0 0 var(--sec-sub-mb);
      line-height: var(--sec-sub-lh);
      max-width: var(--sec-sub-max);
      margin-inline: auto;
      text-align: center;
    }
    :is(.persona-title){ all:unset; display:block; }
    :is(.persona-subline){ all:unset; display:block; }
    .persona-title{
      font-size: var(--sec-title-fs);
      font-weight: var(--sec-title-fw);
      letter-spacing: var(--sec-title-ls);
      margin: 0 0 var(--sec-title-mb);
      color: var(--sec-title-color);
      text-align: center;
    }
    .persona-subline{
      font-size: var(--sec-sub-fs);
      color: var(--sec-sub-color);
      margin: 0 0 var(--sec-sub-mb);
      line-height: var(--sec-sub-lh);
      max-width: var(--sec-sub-max);
      margin-inline: auto;
      text-align: center;
    }
    :root[data-theme="dark"] .section-title,
    :root[data-theme="dark"] .persona-title{ color:#fff; }
    :root[data-theme="dark"] .section-subtitle,
    :root[data-theme="dark"] .persona-subline{ color:#fff; }
    @media (prefers-color-scheme: dark){
      :root[data-theme="auto"] .section-title,
      :root[data-theme="auto"] .persona-title{ color:#fff; }
      :root[data-theme="auto"] .section-subtitle,
      :root[data-theme="auto"] .persona-subline{ color:#fff; }
    }
  </style>

  <!-- Webflow/Normalize -->
  <meta name="generator" content="Webflow">
  <link href="css/denizs-dapper-site-2d192b.webflow.css" rel="stylesheet" type="text/css">
  
  
  <!-- Titelpage-spezifische Bild-Overrides (in den Head verschoben) -->
  <style>
    body[data-page="webdesign"] .hero-image-background {
      background-image: url("./images/hero-bg-sky_1hero-bg-sky.webp") !important;
    }
    body[data-page="webdesign"] .hero-image-foreground {
      background-image: url("./images/webdesign-fg.webp") !important;
    }
    @media (max-width: 1024px) {
      body[data-page="webdesign"] .hero-image-foreground {
        background-image: url("./images/webdesign-fg-tablet.webp") !important;
      }
    }
    @media (max-width: 480px) {
      body[data-page="webdesign"] .hero-image-foreground {
        background-image: url("./images/webdesign-fg-mobile.webp") !important;
      }
    }
    /* === Large Title – groß, perfekt mittig, etwas weiter unten === */
.large-title {
  position: absolute;
  top: 162%;                          /* leicht nach unten versetzt */
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  width: 100%;
font-size: clamp(4rem, 22vw, 18rem);

  line-height: 1.05;
  font-weight: 900;
  z-index: 10;
  margin: 0;
  color: inherit;
}

/* Elternbereich soll Bezugspunkt sein */
.hero-section,
.header-section,
.page-header {
  position: relative;
}

/* Mobile-Optimierung */
@media (max-width: 767px) {
  .large-title {
    top: 58%; /* etwas höher auf kleinen Screens */
    font-size: clamp(2.6rem, 14vw, 7rem);
  }
}

  </style>
  <link rel="stylesheet" href="css/herolast.css" type="text/css">
<link rel="stylesheet" href="css/navbar.css" type="text/css">
<link rel="stylesheet" href="css/darkmodeLast.css" type="text/css">
<link rel="stylesheet" href="css/aurora.css" type="text/css">
<link rel="stylesheet" href="css/cosmosSuite.css" type="text/css">
<link rel="stylesheet" href="css/reviews.css" type="text/css">

<link rel="stylesheet" href="css/ablauf.css" type="text/css">

<link rel="stylesheet" href="css/contactWeb.css" type="text/css">

<link rel="stylesheet" href="css/arbeitsproben.css" type="text/css">

<link rel="stylesheet" href="css/lyraV.css" type="text/css">

<link rel="stylesheet" href="css/angledimg.css" type="text/css">

<link rel="stylesheet" href="css/footer.css" type="text/css">

<link rel="stylesheet" href="css/Casestudie.css" type="text/css">

<link rel="stylesheet" href="css/ctasection.css" type="text/css">

<link rel="stylesheet" href="css/metrics.css" type="text/css">

<link rel="stylesheet" href="css/warumwir.css" type="text/css">
<style>
/* --------------------------
   Lokale Bild-Overrides nur für webdesign.html
--------------------------- */
body[data-page="webdesign"] .hero-image-background {
  background-image: url("./WebdesignPic/1.mp4") !important;
}

body[data-page="webdesign"] .hero-image-foreground {
  background-image: url("./images/hintegrundweb.webp") !important;
}

/* Optional: Mobile- oder Tablet-Varianten */
@media (max-width: 1024px) {
  body[data-page="webdesign"] .hero-image-foreground {
    background-image: url("./images/webdesign-bg-tablet.webp") !important;
  }
}
@media (max-width: 480px) {
  body[data-page="webdesign"] .hero-image-foreground {
    background-image: url("./images/webdesign-bg-mobile.webp") !important;
  }
}

@media (min-width: 768px) {
  .hero-image-foreground {
    transform: translateY(10%);              /* dein bisheriger Versatz */
  }
}
@media (min-width: 1400px) {
  .hero-image-foreground {
    transform: translateY(15%);              /* dein bisheriger Versatz */
  }
}
@media (min-width: 1800px) {
  .hero-image-foreground {
    transform: translateY(15%);              /* dein bisheriger Versatz */
  }
}
@media (min-width: 2200px) {
  .hero-image-foreground {
    transform: translateY(7%);              /* dein bisheriger Versatz */
  }
}

  html, body {
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    width: 100%;
  }

  .hero-section {
    padding: 0;
    margin: 0;
    width: 100%;
  }

  .hero-images-wrapper {
    position: relative;
    width: 100%;      /* statt 100vw, verhindert Scrollbar-Lücke links */
    min-height: 100vh;
    height: 100vh;
    overflow: hidden; /* falls Kinder minimal überstehen */
  }

  .hero-image-background,
  .hero-image-foreground {
    position: absolute;
    inset: 0;         /* top/right/bottom/left = 0 */
    width: 100%;
    max-width: none;
  }


  /* Nur Handys: Hintergrund minimal „herauszoomen“ */
@media (max-width: 767px) {
  .hero-image-foreground {
    background-position: center bottom;
    background-repeat: no-repeat;
    background-attachment: scroll;
    margin: 0 !important;                  /* falls woanders Mobile-Margins gesetzt sind */
        transform: translateY(17%);              /* dein bisheriger Versatz */
  }
}
/* Ergänzung am Ende deiner bestehenden CSS-Datei */
.hero-image-background {
  position: absolute;
  inset: 0;
  z-index: 0;
  overflow: hidden;
}

.hero-video {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: center;
  position: absolute;
  top: 0;
  left: 0;
  pointer-events: none; /* blockiert keine Klicks */
  z-index: 0;
}



</style>

</head>

<body data-page="wartung">
  <!-- dein Body-Inhalt hier -->





<header class="aether-header" id="aetherGate">
  <div class="aether-header__bar">
    <a href="/" class="sigil-mark">Fusion³</a>

    <!-- NAV mit Subnav-Accordions (mobil sichtbar) -->
    <nav class="astral-nav" id="astralWay" aria-label="Hauptnavigation">
      <ul class="astral-nav__list">
        <!-- Leistungen -->
        <li class="astral-item">
          <a class="astral-link" href="/leistungen">Leistungen</a>
          <button
            class="gatelet"
            type="button"
            aria-expanded="false"
            aria-controls="grimoire-services"
            aria-haspopup="true"
            aria-label="Unterpunkte zu Leistungen ein- oder ausklappen">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <ul id="grimoire-services" class="underrealm" hidden>
            <li><a class="astral-link astral-link--sub" href="/leistungen/webdesign">Webdesign</a></li>
            <li><a class="astral-link astral-link--sub" href="/leistungen/branding-ci">Branding &amp; CI</a></li>
            <li><a class="astral-link astral-link--sub" href="/leistungen/performance">Performance Marketing</a></li>
            <li><a class="astral-link astral-link--sub" href="/leistungen/support">Wartung &amp; Support</a></li>
          </ul>
        </li>

        <!-- Blog (vorher "Über uns" im Kommentar) -->
        <li class="astral-item">
          <a class="astral-link" href="#ueber-uns">Blog</a>
          <button
            class="gatelet"
            type="button"
            aria-expanded="false"
            aria-controls="codex-about"
            aria-haspopup="true"
            aria-label="Unterpunkte zu Blog ein- oder ausklappen">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <ul id="codex-about" class="underrealm" hidden>
            <li><a class="astral-link astral-link--sub" href="#team">Team</a></li>
            <li><a class="astral-link astral-link--sub" href="#werte">Werte</a></li>
            <li><a class="astral-link astral-link--sub" href="/jobs">Jobs</a></li>
            <li><a class="astral-link astral-link--sub" href="/presse">Presse</a></li>
          </ul>
        </li>

        <!-- Portfolio -->
        <li class="astral-item">
          <a class="astral-link" href="#portfolio">Portfolio</a>
          <button
            class="gatelet"
            type="button"
            aria-expanded="false"
            aria-controls="vault-portfolio"
            aria-haspopup="true"
            aria-label="Unterpunkte zu Portfolio ein- oder ausklappen">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <ul id="vault-portfolio" class="underrealm" hidden>
            <li><a class="astral-link astral-link--sub" href="#web-projekte">Web-Projekte</a></li>
            <li><a class="astral-link astral-link--sub" href="#markenauftritte">Markenauftritte</a></li>
            <li><a class="astral-link astral-link--sub" href="/cases">Case Studies</a></li>
            <li><a class="astral-link astral-link--sub" href="/referenzen">Referenzen</a></li>
          </ul>
        </li>

        <!-- Kontakt -->
        <li class="astral-item">
          <a class="astral-link" href="#kontakt">Kontakt</a>
          <button
            class="gatelet"
            type="button"
            aria-expanded="false"
            aria-controls="altar-contact"
            aria-haspopup="true"
            aria-label="Unterpunkte zu Kontakt ein- oder ausklappen">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <ul id="altar-contact" class="underrealm" hidden>
            <li><a class="astral-link astral-link--sub" href="/anfrage">Anfrage stellen</a></li>
            <li><a class="astral-link astral-link--sub" href="/beratung">Beratung buchen</a></li>
            <li><a class="astral-link astral-link--sub" href="/standort">Standort</a></li>
            <li><a class="astral-link astral-link--sub" href="/impressum">Impressum</a></li>
          </ul>
        </li>
      </ul>
    </nav>

    <div class="astral-actions">
      <!-- Theme Toggle -->
      <button
  class="orb-toggle"
  id="eclipseStone"
  type="button"
  aria-pressed="true"
  aria-controls="omenWhisper"
  aria-label="Dunkelmodus aktiv">

  <span class="sky day-sky" aria-hidden="true"></span>
  <span class="sky night-sky" aria-hidden="true"></span>
  <span class="stars" id="starField" aria-hidden="true"></span>

  <span class="clouds" id="nebulaSea" aria-hidden="true">
    <span class="leyline back" data-lane="back"></span>
    <span class="leyline mid" data-lane="mid"></span>
    <span class="leyline front" data-lane="front"></span>
  </span>

  <span class="thumb" id="moonShard" aria-hidden="true"></span>
</button>


      <!-- Live-Region für Modusansage -->
      <p id="omenWhisper" class="visually-hidden" aria-live="polite" aria-atomic="true">Dunkelmodus aktiv</p>

      <!-- CTA (Link bleibt Link; kein role="button" nötig) -->
      <a
        class="charm-cta charm-cta--prime"
        href="#kontakt"
        id="sigilOffer"
        aria-label="Angebot anfordern"
        data-cta
        data-cta-context="header">
        <span class="charm-cta__label">Check starten</span>
      </a>
    </div>

    <!-- Mobile Menü-Button -->
    <button
      class="portal-toggle"
      id="runeSwitch"
      type="button"
      aria-expanded="false"
      aria-controls="astralWay"
      aria-label="Menü öffnen">
      <svg class="icon icon-burger" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M3 6h18M3 12h18M3 18h18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
      <svg class="icon icon-close" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M6 6l12 12M18 6L6 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
  </div>
<div class="night-veil" id="voidVeil" hidden></div>

</header>


<script>
  /* ---------------------------
     Aether / Astral Navigation
     --------------------------- */
  (function(){
    const docEl   = document.documentElement;
    const gate    = document.getElementById('aetherGate');
    const switchRune = document.getElementById('runeSwitch');
    const astral  = document.getElementById('astralWay');
    const veil    = document.getElementById('voidVeil');
    if(!switchRune || !astral) return;

    // Headerhöhe -> CSS Var
    function setGateHeight(){
      const h = gate.getBoundingClientRect().height;
      docEl.style.setProperty('--gate-height', h + 'px');
    }
    setGateHeight();
    addEventListener('resize', setGateHeight, {passive:true});

    // MQ Sync
    const mq = window.matchMedia('(min-width: 768px)');

    // Mobile Actions Container
    const mobileSatchelId = 'mobileSatchel';
    let mobileSatchel = null;
    function ensureSatchel(){
      if(!mobileSatchel){
        mobileSatchel = document.createElement('div');
        mobileSatchel.id = mobileSatchelId;
        mobileSatchel.className = 'astral-nav__mobile-actions';
        mobileSatchel.setAttribute('hidden','');
        astral.appendChild(mobileSatchel);
      }
    }
    function stowCharm(){
      ensureSatchel();
      const cta = document.querySelector('.charm-cta');
      if(cta && cta.parentElement !== mobileSatchel){ mobileSatchel.appendChild(cta); }
      mobileSatchel.removeAttribute('hidden');
    }
    function recallCharm(){
      const actions = document.querySelector('.astral-actions');
      if(!actions) return;
      const cta = mobileSatchel?.querySelector('.charm-cta');
      if(cta && actions !== cta.parentElement){
        actions.appendChild(cta);
      }
      mobileSatchel?.setAttribute('hidden','');
    }

    // Focus Trap
    const ward = (()=>{
      let active = false;
      function handle(e){
        if(!active || e.key !== 'Tab') return;
        const focusables = astral.querySelectorAll('a, button, [tabindex]:not([tabindex="-1"])');
        const list = Array.from(focusables).filter(el=>!el.hasAttribute('disabled'));
        if(list.length === 0) return;
        const first = list[0];
        const last  = list[list.length-1];
        if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
        else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
      }
      return {
        activate(){ if(!active){ active = true; document.addEventListener('keydown', handle); }},
        deactivate(){ if(active){ active = false; document.removeEventListener('keydown', handle); }}
      };
    })();

    function sealUnderrealms(){
      astral.querySelectorAll('.gatelet[aria-expanded="true"]').forEach(btn=>{
        btn.setAttribute('aria-expanded','false');
      });
      astral.querySelectorAll('.underrealm:not([hidden])').forEach(ul=>{
        ul.setAttribute('hidden','');
      });
      astral.querySelectorAll('.astral-item.is-awakened').forEach(li=>{
        li.classList.remove('is-awakened');
      });
    }

    function closePortal(){
      astral.classList.remove('is-awakened');
      veil?.classList.remove('is-awakened');
      veil?.setAttribute('hidden', '');
      switchRune.setAttribute('aria-expanded','false');
      switchRune.setAttribute('aria-label','Menü öffnen');
      docEl.classList.remove('nav-lock');
      ward.deactivate();
      document.querySelector('main')?.removeAttribute('inert');
      sealUnderrealms();
      recallCharm();
      gate.classList.remove('portal-open'); /* Balken/Shadow fix */
      switchRune.focus();
    }
    function openPortal(){
      astral.classList.add('is-awakened');
      veil?.classList.add('is-awakened');
      veil?.removeAttribute('hidden');
      switchRune.setAttribute('aria-expanded','true');
      switchRune.setAttribute('aria-label','Menü schließen');
      docEl.classList.add('nav-lock');

      const firstLink = astral.querySelector('a');
      if(firstLink) firstLink.focus();

      ward.activate();
      document.querySelector('main')?.setAttribute('inert', '');
      stowCharm();
      gate.classList.add('portal-open'); /* Balken/Shadow fix */
    }
    function syncState(){ if(mq.matches){ closePortal(); } }
    mq.addEventListener?.('change', syncState);
    syncState();

    // Toggle Button
    switchRune.addEventListener('click', function(){
      const isOpen = astral.classList.contains('is-awakened');
      if(isOpen) closePortal(); else openPortal();
    });

    // Overlay / Outside click
    veil?.addEventListener('click', () => closePortal());
    document.addEventListener('click', (e) => {
      if(!astral.classList.contains('is-awakened')) return;
      if (e.target.closest('.orb-toggle')) return; // Theme-Toggle schließt nicht
      if(!astral.contains(e.target) && !switchRune.contains(e.target)) closePortal();
    });

    // ESC
    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape' && astral.classList.contains('is-awakened')){
        e.preventDefault(); closePortal();
      }
    });

    // Scroll Shadow
    addEventListener('scroll', () => {
      const y = window.scrollY || 0;
      gate.classList.toggle('is-ascended', y>4);
    }, {passive:true});

    // Scrollspy
    const links = [...document.querySelectorAll('.astral-link')];
    const linkMap = Object.fromEntries(links.map(a=>[a.getAttribute('href'), a]));
    const obs = new IntersectionObserver(entries => {
      entries.forEach(e => {
        const id = '#'+e.target.id;
        if(e.isIntersecting){
          links.forEach(l=>{ l.removeAttribute('data-active'); l.removeAttribute('aria-current'); });
          const link = linkMap[id];
          if(link){ link.setAttribute('data-active',''); link.setAttribute('aria-current','page'); }
        }
      });
    }, {rootMargin:'-40% 0px -55% 0px', threshold:[0, 1]});
    document.querySelectorAll('section[id]').forEach(s=>obs.observe(s));

    // Smooth scroll Offset
    links.forEach(a=>{
      a.addEventListener('click', (ev)=>{
        const href = a.getAttribute('href')||'';
        if(href.startsWith('#')){
          const target = document.getElementById(href.slice(1));
          if(target){
            ev.preventDefault();
            const y = target.getBoundingClientRect().top + window.scrollY - (gate.getBoundingClientRect().height + 8);
            window.scrollTo({top:y, behavior:'smooth'});
            closePortal();
          }
        }
      });
    });
  })();
</script>
<script>
/* CTA Ripple (Namen mystisch gelassen, Klassen bereits umbenannt) */
(function(){
  const prefersReduced = matchMedia('(prefers-reduced-motion: reduce)').matches;

  function makeRipple(btn, x, y){
    if (prefersReduced) return;
    const r = document.createElement('span');
    r.className = 'cta-ripple';
    r.style.left = x + 'px';
    r.style.top  = y + 'px';
    btn.appendChild(r);
    r.offsetWidth; r.classList.add('is-anim');
    r.addEventListener('animationend', ()=> r.remove(), {once:true});
  }

  function keyRipple(e){
    if(e.key !== ' ' && e.key !== 'Enter') return;
    const btn = e.currentTarget;
    const rect = btn.getBoundingClientRect();
    makeRipple(btn, rect.width/2, rect.height/2);
  }

  function setBusy(btn, busy=true){
    btn.setAttribute('aria-busy', String(!!busy));
    const live = btn.querySelector('[aria-live]');
    if(live){ live.textContent = busy ? 'Lädt…' : 'Bereit'; }
  }

  document.querySelectorAll('[data-cta]').forEach(btn=>{
    btn.addEventListener('pointerdown', e=>{
      if(e.pointerType === 'mouse' || e.pointerType === 'touch' || e.pointerType === 'pen'){
        const rect = btn.getBoundingClientRect();
        makeRipple(btn, e.clientX - rect.left, e.clientY - rect.top);
      }
    });
    btn.addEventListener('keydown', keyRipple);
    btn.addEventListener('click', (e)=>{
      const href = btn.getAttribute('href') || '';
      const targetLocal = href.startsWith('#');
      if(targetLocal){
        setBusy(btn, true);
        setTimeout(()=> setBusy(btn, false), 420);
      }
    }, {passive:true});
  });
})();
</script>
<script>
/* Underrealm Toggle (Subnav) */
(function(){
  const nav = document.getElementById('astralWay');
  if(!nav) return;

  nav.addEventListener('click', (e)=>{
    const btn = e.target.closest('.gatelet');
    if(!btn) return;
    e.preventDefault();
    e.stopPropagation();

    const li  = btn.closest('.astral-item');
    const id  = btn.getAttribute('aria-controls');
    const sub = id ? document.getElementById(id) : li?.querySelector('.underrealm');
    if(!li || !sub) return;

    const isOpen = btn.getAttribute('aria-expanded') === 'true';

    // andere schließen
    nav.querySelectorAll('.astral-item.is-awakened').forEach(other=>{
      if(other !== li){
        other.classList.remove('is-awakened');
        const otherBtn = other.querySelector('.gatelet[aria-expanded="true"]');
        const otherSub = other.querySelector('.underrealm');
        if(otherBtn) otherBtn.setAttribute('aria-expanded','false');
        if(otherSub) otherSub.setAttribute('hidden','');
      }
    });

    btn.setAttribute('aria-expanded', String(!isOpen));
    li.classList.toggle('is-awakened', !isOpen);
    sub.toggleAttribute('hidden', isOpen);
  });

  // Outside-Click schließt alles
  document.addEventListener('click', (e)=>{
    if(!nav.contains(e.target)){
      nav.querySelectorAll('.astral-item.is-awakened').forEach(li=>{
        li.classList.remove('is-awakened');
        const b = li.querySelector('.gatelet[aria-expanded="true"]');
        const s = li.querySelector('.underrealm');
        if(b) b.setAttribute('aria-expanded','false');
        if(s) s.setAttribute('hidden','');
      });
    }
  });

  // ESC schließt alle
  document.addEventListener('keydown', (e)=>{
    if(e.key !== 'Escape') return;
    nav.querySelectorAll('.astral-item.is-awakened').forEach(li=>{
      li.classList.remove('is-awakened');
      const b = li.querySelector('.gatelet[aria-expanded="true"]');
      const s = li.querySelector('.underrealm');
      if(b) b.setAttribute('aria-expanded','false');
      if(s) s.setAttribute('hidden','');
    });
  });
})();
</script>
<script>
  (function(){
    const rootEl   = document.documentElement;
    const bodyEl   = document.body;
    const toggleEl = document.getElementById('eclipseStone');
    const shard    = document.getElementById('moonShard');
    const stars    = document.getElementById('starField');
    const statusEl = document.getElementById('omenWhisper');

    /* Sterne */
    (function seedStars(){
      if(!stars) return;
      const N = 26;
      const frag = document.createDocumentFragment();
      for(let i=0;i<N;i++){
        const el = document.createElement('i');
        el.style.top = (5 + Math.random()*90) + '%';
        el.style.left = (5 + Math.random()*90) + '%';
        el.style.animationDelay = (Math.random()*2.5).toFixed(2)+'s';
        frag.appendChild(el);
      }
      stars.appendChild(frag);
    })();

    /* Wolken */
    (function seedClouds(){
      const lanes = Array.from(document.querySelectorAll('[data-lane]'));
      if(!lanes.length || !toggleEl) return;

      const presets = {
        back:  { count: 3, speed:[80,120], scale:[0.60,0.90],  opacity:[0.25,0.40] },
        mid:   { count: 3, speed:[60, 90], scale:[0.80,1.00],  opacity:[0.50,0.70] },
        front: { count: 2, speed:[45, 70], scale:[1.00,1.15],  opacity:[0.85,0.95] }
      };

      function render(){
        lanes.forEach(l=>l.innerHTML = '');
        const rect = toggleEl.getBoundingClientRect();
        const W = Math.max(60, Math.round(rect.width));
        const H = Math.max(24, Math.round(rect.height));
        lanes.forEach(lane=>{
          const cfg = presets[lane.dataset.lane];
          for(let i=0;i<cfg.count;i++){
            const cloud = document.createElement('span');
            cloud.className = 'cloud';

            const minW = Math.max(0.28*W, 36);
            const maxW = Math.max(0.46*W, 54);
            const cw   = randf(minW, maxW);
            const ch   = cw*0.5;

            cloud.style.width  = cw+'px';
            cloud.style.height = ch+'px';

            const freeY = Math.max(0, H - ch);
            cloud.style.top  = (freeY ? randf(0, freeY) : 0) + 'px';

            cloud.style.left = (Math.max(0, W - cw) ? randf(0, W - cw) : 0) + 'px';

            const dur = rand(cfg.speed[0], cfg.speed[1]);
            cloud.style.animationDuration = dur+'s';
            cloud.style.animationDelay = (-Math.random()*dur).toFixed(2)+'s';
            cloud.style.opacity = randf(cfg.opacity[0], cfg.opacity[1]);
            cloud.style.transform = `translateX(0) scale(${randf(cfg.scale[0], cfg.scale[1])})`;

            ['b1','b2','b3','b4','b5'].forEach((b,idx)=>{
              const s = document.createElement('span');
              s.className = 'bubble '+b;
              const w = [0.58,0.50,0.66,0.38,0.42][idx] * (0.92 + Math.random()*0.16);
              const h = [0.78,0.70,0.88,0.58,0.62][idx] * (0.92 + Math.random()*0.16);
              s.style.width  = (w*100)+'%';
              s.style.height = (h*100)+'%';
              const lefts = [10,38,46,-2,22];
              const tops  = [12,-4,12,28,28];
              s.style.left = (lefts[idx] + (Math.random()*4-2))+'%';
              s.style.top  = (tops[idx]  + (Math.random()*4-2))+'%';
              cloud.appendChild(s);
            });

            lane.appendChild(cloud);
          }
        });
      }

      function rand(min,max){ return Math.floor(min + Math.random()*(max-min+1)); }
      function randf(min,max){ return +(min + Math.random()*(max-min)).toFixed(2); }

      let t;
      const onResize = () => { clearTimeout(t); t = setTimeout(render, 120); };
      render();
      addEventListener('resize', onResize, {passive:true});
    })();

    const KEY = 'theme-pref';
    function apply(mode){ // 'dark' | 'light'
      const isDark = (mode === 'dark');
      bodyEl.classList.toggle('nocturne', isDark);
      bodyEl.classList.toggle('dawn', !isDark);
      rootEl.setAttribute('data-theme', isDark ? 'dark' : 'light');
      if(toggleEl) toggleEl.setAttribute('aria-pressed', String(isDark));
      if(statusEl) statusEl.textContent = isDark ? 'Dunkelmodus aktiv' : 'Hellmodus aktiv';
    }

    (function init(){
      const saved = localStorage.getItem(KEY);
      if(saved === 'light' || saved === 'dark'){
        apply(saved);
      }else{
        const sysDark = matchMedia('(prefers-color-scheme:dark)').matches;
        apply(sysDark ? 'dark' : 'light');
      }
    })();

    document.addEventListener('click', (e)=>{
      const t = e.target.closest?.('.orb-toggle');
      if(!t) return;
      const nowDark = !bodyEl.classList.contains('nocturne');
      apply(nowDark ? 'dark' : 'light');
      localStorage.setItem(KEY, nowDark ? 'dark' : 'light');
      if(shard){
        shard.classList.remove('pulse'); void shard.offsetWidth; shard.classList.add('pulse');
      }
    });

    matchMedia('(prefers-color-scheme:dark)').addEventListener('change', (e)=>{
      if(localStorage.getItem(KEY)) return;
      apply(e.matches ? 'dark' : 'light');
    });
  })();
</script>





<section class="hero-section" data-page="webdesign">
  <div class="hero-images-wrapper">
    <!-- HINTERGRUND-VIDEO -->
    <div class="hero-image-background">
      <video class="hero-video" autoplay muted loop playsinline preload="auto" poster="./images/hintegrundweb.webp">
        <source src="./WebdesignPic/1.mp4" type="video/mp4" />
      </video>
    </div>

    <div class="page-title">
      <div class="container">
        <h1 class="large-title">Web <br> Wartung</h1>
      </div>
    </div>

  </div>
</section>

<script>
(function () {
  const section = document.querySelector('.hero-section[data-page="webdesign"]');
  const h1 = document.querySelector('.page-title .large-title');
  const pageTitle = document.querySelector('.page-title');
  if (!section || !h1 || !pageTitle) return;

  // --- Reload-Erkennung (unverändert) ---
  function isReload() {
    try {
      const n = performance.getEntriesByType && performance.getEntriesByType('navigation')[0];
      if (n && (n.type === 'reload' || n.type === 'back_forward')) return true;
      if (performance && performance.navigation && performance.navigation.type === 1) return true;
    } catch(e){}
    return false;
  }
  const RELOADED = isReload();

  // ---------- Wrapper & Overlay ----------
  const originalHTML = h1.innerHTML;
  const parts = originalHTML.split(/(<br\s*\/?>)/i);

  const wrapper = document.createElement('span');
  wrapper.id = 'titleFloatWrapper';
  wrapper.style.display = 'inline-block';
  wrapper.style.willChange = 'transform';
  h1.innerHTML = '';
  h1.appendChild(wrapper);

  const overlay = document.createElement('canvas');
  overlay.id = 'titleOverlay';
  overlay.style.position = 'absolute';
  overlay.style.left = '0';
  overlay.style.top = '0';
  overlay.style.pointerEvents = 'none';
  overlay.style.zIndex = '3';
  if (getComputedStyle(pageTitle).position === 'static') {
    pageTitle.style.position = 'relative';
  }
  pageTitle.appendChild(overlay);

  // ---------- Canvas Sizing + Live-Tracking ----------
  let ctx = null;
  let last = { w:0, h:0, left:0, top:0, dpr:0 };

  function sizeCanvas(force=false) {
    const r = h1.getBoundingClientRect();
    const pr = pageTitle.getBoundingClientRect();
    const dpr = Math.min(2, window.devicePixelRatio || 1);

    const left = r.left - pr.left;
    const top  = r.top  - pr.top;
    const w = Math.ceil(r.width);
    const h = Math.ceil(r.height);

    if (!force &&
        w === last.w && h === last.h &&
        left === last.left && top === last.top &&
        dpr === last.dpr) return;

    overlay.style.width = w + 'px';
    overlay.style.height = h + 'px';
    overlay.style.left = left + 'px';
    overlay.style.top  = top  + 'px';

    overlay.width = Math.max(1, Math.floor(w * dpr));
    overlay.height = Math.max(1, Math.floor(h * dpr));

    ctx = overlay.getContext('2d');
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);

    last = { w, h, left, top, dpr };
  }

  sizeCanvas(true);

  const roH1 = new ResizeObserver(() => sizeCanvas(true));
  const roTitle = new ResizeObserver(() => sizeCanvas(true));
  roH1.observe(h1);
  roTitle.observe(pageTitle);

  window.addEventListener('resize', () => sizeCanvas(true), { passive:true });
  window.addEventListener('scroll', () => sizeCanvas(false), { passive:true });
  window.addEventListener('orientationchange', () => sizeCanvas(true));

  // ---------- Text → Letters ----------
  // großer, exotischer Glyph-Pool: Griechisch, Kyrillisch, Armenisch, Georgisch, IPA, Fraktur, Mathe-Alphanumerika, Ziffernvarianten …
  const SIMILAR = {
    // lower
    'a':['ɑ','α','⍺','ª','ᵃ','ä','á','à','ȧ','ą','ɐ','@','ꭤ','𝖺','𝔞','ᶏ','ᴀ'],
    'b':['Ь','ƅ','Ꮟ','Ƅ','ƀ','ẛ'.replace('ẛ','b'),'ɓ','ᵇ','ᶀ','𝖻','𝔟'],
    'c':['ϲ','ᴄ','с','ᶜ','ƈ','ↄ','ς','ɔ','ꜿ','ç','č','ċ','𝖼','𝔠'],
    'd':['ԁ','đ','ᑯ','ᵈ',')','ɗ','ᵭ','ḋ','ᶁ','𝖽','𝔡'],
    'e':['℮','ɛ','є','ᵉ','ᵋ','ℯ','ɇ','ė','ë','é','è','ɘ','ε','𝖾','𝔢'],
    'f':['ƒ','ſ','ϝ','ẝ','ʄ','ᶂ','𐊇','𝖿','𝔣'],
    'g':['ɡ','ǥ','ᵍ','9','ĝ','ğ','ġ','ḡ','ɢ','ᶃ','𝓰','𝔤'],
    'h':['һ','ℎ','ᵸ','ʰ','ɦ','ħ','ꜧ','ḫ','𝖍','𝔥'],
    'i':['ɪ','ǐ','ı','¡','1','í','ì','ï','ỉ','ɨ','ⅰ','!', '𝖎','𝔦'],
    'j':['ȷ','ϳ','ј','ʝ','ĵ','ɉ','ᶡ','𝖏','𝔧'],
    'k':['κ','ᵏ','ꭆ','ḳ','ǩ','ꝁ','ќ','ᴋ','𝖐','𝔨'],
    'l':['ɩ','ⅼ','ǀ','|','Ɩ','ĺ','ļ','ł','ᶅ','ʟ','𝖑','𝔩'],
    'm':['ṃ','ᴍ','м','ᵐ','ɱ','ṁ','ᶆ','𝖒','𝔪'],
    'n':['η','п','ɴ','∩','ɲ','ṅ','ņ','ń','ň','ң','𝖓','𝔫'],
    'o':['ο','о','ɵ','°','0','ö','ó','ò','õ','ơ','ø','○','∘','𝖔','𝔬'],
    'p':['ρ','р','ᵖ','ᵱ','ṕ','ṗ','ƥ','ῥ','𝖕','𝔭'],
    'q':['զ','ʠ','ɋ','ȹ','գ','𝖖','𝔮'],
    'r':['ɼ','г','ʳ','ř','ŗ','ꭇ','ʀ','ȑ','ȓ','ṙ','ᵲ','𝖗','𝔯'],
    's':['ʂ','ѕ','$','§','ş','ś','ṡ','ș','ṥ','ʃ','ƨ','ß','𝖘','𝔰'],
    't':['τ','ť','ŧ','†','ṭ','ṯ','ƫ','ʈ','₸','𝖙','𝔱'],
    'u':['υ','ʋ','ս','ᵘ','ů','ü','ú','ù','ū','ư','µ','ꭎ','𝖚','𝔲'],
    'v':['ν','ѵ','ᵛ','ṿ','ѷ','√','∨','ʋ','𝖛','𝔳'],
    'w':['ᴡ','ѡ','ɯ','ŵ','ẇ','ɰ','ɯ','𝖜','𝔴'],
    'x':['х','×','✕','χ','ẋ','ᶍ','ⅹ','𝖝','𝔵'],
    'y':['γ','ʏ','у','ý','ỳ','ÿ','ŷ','ɣ','ʎ','¥','𝖞','𝔶'],
    'z':['ʐ','ᴢ','ž','ż','ź','ƶ','ʑ','ẓ','ƻ','𝖟','𝔷'],
    // upper
    'A':['Α','Λ','Ꭺ','Ā','Ⱥ','∆','∀','𝘈','𝕬','𝔄'],
    'B':['В','Ƀ','ß','Ɓ','ℬ','ʙ','ɮ','ᛒ','𝘉','𝕭','𝔅'],
    'C':['Ϲ','С','Ⅽ','Ꮯ','℃'.slice(0,1),'☾','ℂ','𐐕','𝘊','𝕮','𝔇'.replace('D','C')],
    'D':['Ꭰ','Ḏ','Ɗ','ⅅ','ᴅ','ↁ','𝘋','𝕯','𝔇'],
    'E':['Ε','Є','ℰ','€','Ɇ','Ɛ','Σ','⋿','𝘌','𝕰','𝔈'],
    'F':['Ғ','Ϝ','ℱ','ᖴ','𐊇','𝘍','𝕱','𝔉'],
    'G':['ɢ','Ԍ','Ꮐ','Ĝ','Ğ','Ġ','Ḡ','Ɠ','𝘎','𝕲','𝔊'],
    'H':['Η','Н','ℋ','Ħ','Ⱨ','♓','𝘏','𝕳','ℌ'],
    'I':['Ι','Ӏ','ǀ','1','Ⅰ','∣','𝘐','𝕴','ℑ'],
    'J':['Ј','Ɉ','Ĵ','ⅉ','𝘑','𝕵','𝔍'],
    'K':['Κ','ᛕ','K','₭','Ҡ','Ƙ','Ǩ','𝘒','𝕶','𝔎'],
    'L':['Ꮮ','Ⅼ','Ł','∟','⅃','ʟ','𝘓','𝕷','𝔏'],
    'M':['Μ','М','Ṁ','Ϻ','Ⅿ','𝘔','𝕸','𝔐'],
    'N':['Ν','Ｎ','∩','Ṅ','Ň','Ɲ','𝘕','𝕹','𝔑'],
    'O':['Ο','О','0','°','Ø','Ө','○','⦿','𝘖','𝕺','𝔒'],
    'P':['Ρ','Р','ℙ','₽','Ҏ','Ƿ','𐊕','𝘗','𝕻','𝔓'],
    'Q':['Ⴓ','ℚ','Ǫ','Ɋ','Ҩ','Ⓠ','𝘘','𝕼','𝔔'],
    'R':['Ꭱ','ℜ','Я','Ȑ','Ŕ','Ṙ','®','𝘙','𝕽','ℛ'],
    'S':['Ѕ','§','$','Ś','Ş','Š','Ṣ','ẞ','𝘚','𝕾','𝔖'],
    'T':['Τ','Т','Ŧ','Ͳ','₸','Ṫ','Ƭ','✝','𝘛','𝕿','𝔗'],
    'U':['Ս','⋃','Ū','Ü','Ú','Ù','Ư','∪','𝘜','𝖀'.replace('𝖀','𝕌'),'𝔘'],
    'V':['Ѵ','∨','Ṽ','Ʋ','✓','𝘝','𝕍','𝔙'],
    'W':['Ԝ','Ѡ','Ш','Ŵ','Ẃ','Ẅ','𝘞','𝕎','𝔚'],
    'X':['Χ','Х','✕','×','✖','Ⅹ','χ','𝘟','𝕏','𝔛'],
    'Y':['Υ','Ү','¥','Ɏ','Ÿ','Ῡ','Ӳ','𝘠','𝕐','𝔜'],
    'Z':['Ζ','ℤ','Ž','Ż','Ź','Ƶ','Ẕ','𝘡','𝕫'.toUpperCase(),'𝔃'.toUpperCase()],
    // digits
    '0':['O','О','Ο','○','°','⭕','⓪','𝟘'],
    '1':['I','l','|','ǀ','Ⅰ','❶','𝟙'],
    '2':['Ƨ'.toLowerCase(),'乙','٢','②','𝟚'],
    '3':['Ʒ','З','Ɛ','ɜ','➂','𝟛'],
    '4':['Ꮞ','٤','④','𝟜'],
    '5':['Ƽ','Ѕ','⑤','𝟝'],
    '6':['ბ','৬','⑥','𝟞'],
    '7':['۷','⑦','𝟟'],
    '8':['ȣ','੮','⑧','𝟠'],
    '9':['ჽ','९','⑨','𝟡']
  };
// === Add Asian & "cool" glyphs (CJK, Kana, Hangul, Bopomofo, Fullwidth) ===
const ASIAN_COOL = {
  // lower
  a: ['ａ','ぁ','ｧ','ァ','人'],
  b: ['ｂ'],
  c: ['ｃ','匚'],
  d: ['ｄ','り'],
  e: ['ｅ','ぇ','ェ'],
  f: ['ｆ','ﾌ','ㄈ'],
  g: ['ｇ'],
  h: ['ｈ','卄','ん'],
  i: ['ｉ','丨','｜','ㅣ'],
  j: ['ｊ','亅'],
  k: ['ｋ','ケ'],
  l: ['ｌ','し','丨','ㅣ'],
  m: ['ｍ','〽'],
  n: ['ｎ','ん','ﾝ'],
  o: ['ｏ','〇','ㅇ','○'],
  p: ['ｐ','尸'],
  q: ['ｑ'],
  r: ['ｒ','尺'],
  s: ['ｓ','ら'],
  t: ['ｔ','丁','ﾃ'],
  u: ['ｕ','凵','ㄩ'],
  v: ['ｖ','レ'],
  w: ['ｗ','山'],
  x: ['ｘ','メ','叉'],
  y: ['ｙ','丫','ㄚ'],
  z: ['ｚ','乙','之'],

  // upper
  A: ['Ａ','人','八'],
  B: ['Ｂ','日'],
  C: ['Ｃ','匚'],
  D: ['Ｄ','冂'],
  E: ['Ｅ','三','ヨ','ミ'],
  F: ['Ｆ','ﾌ','ㄈ'],
  G: ['Ｇ'],
  H: ['Ｈ','廾','井','卄'],
  I: ['Ｉ','丨','工','｜'],
  J: ['Ｊ'],
  K: ['Ｋ','ケ'],
  L: ['Ｌ'],
  M: ['Ｍ','州','爪'],
  N: ['Ｎ','几','ン'],
  O: ['Ｏ','〇','囗','口'],
  P: ['Ｐ','尸','戸'],
  Q: ['Ｑ'],
  R: ['Ｒ','尺'],
  S: ['Ｓ','ら'],
  T: ['Ｔ','丁','工','ﾃ'],
  U: ['Ｕ','凵'],
  V: ['Ｖ','レ'],
  W: ['Ｗ','山'],
  X: ['Ｘ','メ','叉'],
  Y: ['Ｙ','丫','ㄚ'],
  Z: ['Ｚ','乙','之'],

  // digits (fullwidth + CJK numerals)
  0: ['０','零','〇'],
  1: ['１','一','丨','｜'],
  2: ['２','二','乙'],
  3: ['３','三'],
  4: ['４','四'],
  5: ['５','五'],
  6: ['６','六'],
  7: ['７','七'],
  8: ['８','八'],
  9: ['９','九'],
};

// merge into SIMILAR without duplicates (keep your originals first)
for (const [key, vals] of Object.entries(ASIAN_COOL)) {
  SIMILAR[key] = Array.from(new Set([...(SIMILAR[key] || []), ...vals]));
}

  const neon = ['#00fff5','#ff3df0','#39ff14','#ffd400','#7a5cff','#ff5e5b'];

  // Kombinierende Akzente (für extra „Glitch“)
  const COMBINERS = [
    '\u0301','\u0300','\u0302','\u0308','\u0336','\u0332','\u035B','\u0342','\u032E'
  ];

  // --- schneller Glyph-Support mit Cache ---
  const _glyphSupportCache = new Map();
  function supportsGlyphCached(ch){
    if (_glyphSupportCache.has(ch)) return _glyphSupportCache.get(ch);
    const span = document.createElement('span');
    span.textContent = ch;
    span.style.position = 'absolute';
    span.style.visibility = 'hidden';
    span.style.font = getComputedStyle(document.body).font;
    document.body.appendChild(span);
    const ok = span.offsetWidth > 0 && span.textContent === ch;
    span.remove();
    _glyphSupportCache.set(ch, ok);
    return ok;
  }

  function getAltsForChar(ch){
    const base = SIMILAR[ch] || SIMILAR[ch.toLowerCase()] || [];
    const filtered = base
      .slice()
      .sort(() => Math.random()-0.5)
      .filter(s => supportsGlyphCached(s));
    // ~30%: Kombinierende Akzente (1–2) dranhängen
    if (filtered.length && Math.random() < 0.30){
      const withAccents = [];
      filtered.forEach(s => {
        const nAcc = Math.random() < 0.5 ? 1 : 2;
        let acc = s;
        for (let i=0;i<nAcc;i++){
          const c = COMBINERS[Math.floor(Math.random()*COMBINERS.length)];
          const candidate = acc + c;
          if (supportsGlyphCached(candidate)) acc = candidate;
        }
        withAccents.push(acc);
      });
      return withAccents.length ? withAccents : filtered;
    }
    return filtered;
  }

  const letterSpans = [];
  parts.forEach(part => {
    if (/^<br/i.test(part)) { wrapper.appendChild(document.createElement('br')); return; }
    [...part].forEach(ch => {
      const s = document.createElement('span');
      s.textContent = ch;
      s.style.display = 'inline-block';
      s.style.willChange = 'transform, opacity, color, filter, text-shadow';
      if (RELOADED) {
        s.style.opacity = '1';
        s.style.transform = 'translateY(0)';
      } else {
        s.style.opacity = '0';
        s.style.transform = 'translateY(40px)';
      }
      s.dataset.original = ch;
      wrapper.appendChild(s);
      letterSpans.push(s);
    });
  });

  // ---------- Entrance ----------
  window.addEventListener('load', () => {
    if (!RELOADED) {
      letterSpans.forEach((s, i) => {
        s.animate(
          [{opacity:0, transform:'translateY(40px)'},
           {opacity:1, transform:'translateY(0)'}],
          { duration: 1400, easing:'ease-out', fill:'forwards', delay: 160 * i }
        );
      });
    }
    // Starten entscheidet der IO unten
  });

  // ---------- Float ----------
  let floatAnim = wrapper.animate(
    [{ transform:'translateY(0)' },{ transform:'translateY(-10px)' },{ transform:'translateY(0)' }],
    { duration: 12000, easing:'ease-in-out', iterations: Infinity }
  );
  floatAnim.pause();

  // ---------- Overlay Renderloop ----------
  const effects = []; // {span, tEnd, antsPhase}
  let raf = null;
  let loopActive = false;

  function localRect(el){
    const r = el.getBoundingClientRect();
    const pr = pageTitle.getBoundingClientRect();
    return { x: r.left - pr.left, y: r.top - pr.top, w: r.width, h: r.height };
  }

  function drawGrid() {
    const w = overlay.clientWidth, h = overlay.clientHeight;
    const step = Math.max(18, Math.round(Math.min(w,h)/10));
    ctx.save();
    ctx.clearRect(0,0,overlay.width,overlay.height);
    ctx.globalAlpha = 0.14; ctx.lineWidth = 1; ctx.strokeStyle = '#9aa0a6';
    for (let x=0;x<=w;x+=step){ ctx.beginPath(); ctx.moveTo(x+0.5,0); ctx.lineTo(x+0.5,h); ctx.stroke(); }
    for (let y=0;y<=h;y+=step){ ctx.beginPath(); ctx.moveTo(0,y+0.5); ctx.lineTo(w,y+0.5); ctx.stroke(); }
    ctx.restore();
  }

  function drawEditorChrome(now){
    effects.forEach((fx, idx) => {
      const r = localRect(fx.span);
      const pad = 6;
      const x = r.x - pad, y = r.y - pad, w = r.w + pad*2, h = r.h + pad*2;

      // 1) Marquee
      ctx.save();
      ctx.lineWidth = 1.5;
      ctx.setLineDash([6, 4]);
      ctx.lineDashOffset = -fx.antsPhase;
      ctx.strokeStyle = '#000';
      ctx.strokeRect(x, y, w, h);
      ctx.lineDashOffset = -(fx.antsPhase+4);
      ctx.strokeStyle = '#fff';
      ctx.strokeRect(x, y, w, h);
      ctx.restore();

      // 2) Handles
      ctx.save();
      const anchors = [[x,y],[x+w,y],[x,y+h],[x+w,y+h]];
      ctx.fillStyle = 'rgba(255,255,255,0.9)';
      anchors.forEach(([ax,ay])=>{ ctx.beginPath(); ctx.arc(ax, ay, 2.75, 0, Math.PI*2); ctx.fill(); });
      ctx.strokeStyle = 'rgba(255,255,255,0.3)';
      ctx.beginPath();
      ctx.moveTo(x+w*0.25,y); ctx.lineTo(x+w*0.31,y-10);
      ctx.moveTo(x+w, y+h*0.65); ctx.lineTo(x+w+10, y+h*0.75);
      ctx.stroke();
      ctx.restore();

      // 3) Scanline
      ctx.save();
      ctx.globalAlpha = 0.045;
      ctx.fillStyle = '#fff';
      const barH = Math.max(3, Math.round(h*0.12));
      const by = y + ((now*0.03 + idx*6) % Math.max(1,h)) - barH/2;
      ctx.fillRect(x, by, w, barH);
      ctx.restore();

      fx.antsPhase += 0.25;
    });

    for (let i=effects.length-1;i>=0;i--) {
      if (effects[i].tEnd <= now) effects.splice(i,1);
    }
  }

  function frame(now=performance.now()){
    sizeCanvas(false);
    drawGrid();
    drawEditorChrome(now);
    raf = requestAnimationFrame(frame);
  }

  function startLoop(){
    if (loopActive) return;
    loopActive = true;
    if (!raf) raf = requestAnimationFrame(frame);
  }

  function stopLoop(){
    loopActive = false;
    if (raf) { cancelAnimationFrame(raf); raf = null; }
  }

  // ---------- Morph / Glitch ----------
  const MORPH = {
    holdMin: 1600, holdMax: 2800,       // Gesamtdauer pro aktiver Glyphe
    animDur: 240,                       // Dauer eines hektischen Sub-Ticks
    tickMin: 60, tickMax: 140,          // „Hektik“: schneller
    burstChance: 0.35,                  // Chance auf Mini-Burst (mehrere schnelle Ticks)
    splitChance: 0.45,                  // Chromatic-Split-Effekt einschalten?
    rotateMaxDeg: 6,                    // max. Rotation
    scaleJitter: 0.08,                  // ±8% Scale
    skewMaxDeg: 6                       // max. Skew
  };

  function isBusy(span){ return span.dataset.morphing === '1'; }
  function setBusy(span,v){ span.dataset.morphing = v ? '1' : '0'; }

  function makeEffectForSpan(span, durMs){
    const now = performance.now();
    effects.push({ span, tEnd: now + durMs, antsPhase: Math.random()*10 });
    startLoop();
  }

  // Hektischer „Morph“ pro Buchstabe: Glyphenwechsel + visuelle Störungen
  function morphTicker(span){
    if (!span || isBusy(span)) return;

    const original = span.dataset.original || span.textContent;
    const prev = {
      color: span.style.color,
      filter: span.style.filter,
      ts: span.style.textShadow,
      tr: span.style.transform,
      ls: span.style.letterSpacing
    };

    const alts = getAltsForChar(original);
    if (!alts.length) return;

    setBusy(span,true);

    const hold = MORPH.holdMin + Math.random()*(MORPH.holdMax - MORPH.holdMin);
    let running = true;

    makeEffectForSpan(span, hold);

    const applyChromaticSplit = () => {
      if (Math.random() > MORPH.splitChance) return '';
      // 3-kanaliger „Split“ als Afterimage
      const dx = (Math.random()*2+0.5).toFixed(2);
      const dy = (Math.random()*2+0.5).toFixed(2);
      return `
        rgb(255 0 80) ${dx}px ${dy}px 0,
        rgb(0 255 200) ${-dx}px ${dy}px 0,
        rgb(180 120 255) ${dx}px ${-dy}px 0
      `;
    };

    // spontane Mini-Bursts: mehrere sehr schnelle Ticks hintereinander
    const doBurst = () => {
      const n = 2 + Math.floor(Math.random()*3); // 2–4 schnelle Wechsel
      let i = 0;
      const burst = () => {
        if (!running || i>=n) return;
        singleTick(true);
        i++;
        setTimeout(burst, 40 + Math.random()*60);
      };
      burst();
    };

    // Ein einzelner schneller Tick (Glyph + FX)
    function singleTick(isBurst=false){
      const next = alts[Math.floor(Math.random()*alts.length)];
      const color = neon[Math.floor(Math.random()*neon.length)];

      // Glyph tauschen
      span.textContent = next;
      span.style.color = color;

      // leichte Layout-Störung
      const rot = (Math.random()*2-1)*MORPH.rotateMaxDeg;
      const sx  = 1 + (Math.random()*2-1)*MORPH.scaleJitter;
      const sy  = 1 + (Math.random()*2-1)*MORPH.scaleJitter;
      const skx = (Math.random()*2-1)*MORPH.skewMaxDeg;
      const sky = (Math.random()*2-1)*MORPH.skewMaxDeg;

      span.style.transform = `translateZ(0) rotate(${rot}deg) skew(${skx}deg, ${sky}deg) scale(${sx},${sy})`;

      // Blur-Flicker
      const blurPx = (isBurst ? 1.6 : 0.9) + Math.random()*0.8;
      const contrast = 1.2 + Math.random()*0.5;
      const bright = 1.05 + Math.random()*0.25;
      span.style.filter = `blur(${blurPx}px) contrast(${contrast}) brightness(${bright})`;

      // Chromatic Afterimage
      span.style.textShadow = applyChromaticSplit();

      // Mini „morphing“ Gefühl: Letter-Spacing pulsen lassen
      if (Math.random() < 0.5) {
        span.style.letterSpacing = (Math.random()<0.5 ? '-0.02em' : '0.04em');
      }

      // Rückanimation via Web Animations API (knackig, „hektisch“)
      span.animate(
        [
          { filter:`${span.style.filter}`, transform: `${span.style.transform}` },
          { filter:'none', transform:'translateZ(0) rotate(0deg) skew(0,0) scale(1,1)' }
        ],
        { duration: MORPH.animDur, easing:'steps(3,end)', fill:'forwards' }
      );
    }

    const tick = () => {
      if (!running) return;
      singleTick(false);
      if (Math.random() < MORPH.burstChance) doBurst();
      const gap = MORPH.tickMin + Math.random()*(MORPH.tickMax - MORPH.tickMin);
      tickTimer = setTimeout(tick, gap);
    };

    let tickTimer = null;
    tick();

    setTimeout(()=>{
      running = false;
      if (tickTimer) clearTimeout(tickTimer);
      // Reset auf Original, sanft ausfaden
      span.textContent = original;
      span.style.color = prev.color;
      span.style.filter = 'none';
      span.style.textShadow = 'none';
      span.style.letterSpacing = prev.ls || '';
      span.animate(
        [
          { opacity: 0.85, filter:'none' },
          { opacity: 1,    filter:'none' }
        ],
        { duration: 180, easing: 'ease-out', fill: 'forwards' }
      );
      setBusy(span,false);
    }, hold);
  }

  function pick(){
    const a=letterSpans.filter(s=>s.textContent.trim()!=='');
    return a.length? a[Math.floor(Math.random()*a.length)]:null;
  }

  function snapSlide(span, dir='up') {
    const dy = dir === 'up' ? -18 : 18;
    span.animate(
      [{ transform:`translateY(${dy}px)` }, { transform:'translateY(0)' }],
      { duration: 420, easing:'steps(5, end)', fill:'both' }
    );
  }

  function multiGlitchBurst() {
    if (Math.random() < 0.45) { const s = pick(); if (s) snapSlide(s, Math.random()<0.5 ? 'up' : 'down'); }
    const s = pick(); if (s) morphTicker(s);
  }

  // ---------- Start/Stop ----------
  let glitchTimer=null;
  function startGlitch(){
    if(glitchTimer) return;
    glitchTimer=setInterval(()=>multiGlitchBurst(), 2400 + Math.random()*1600);
    setTimeout(()=>multiGlitchBurst(), 600);
  }
  function stopGlitch(){
    if(glitchTimer){ clearInterval(glitchTimer); glitchTimer=null; }
  }

  // Sichtbarkeits-Controller
  let visible = false;
  function activate() {
    if (visible) return;
    visible = true;
    floatAnim.play();
    startGlitch();
    startLoop();
  }
  function deactivate() {
    if (!visible) return;
    visible = false;
    floatAnim.pause();
    stopGlitch();
    stopLoop();
  }

  // IntersectionObserver: „läuft, wenn sichtbar“
  const io = new IntersectionObserver((entries) => {
    entries.forEach(e => {
      if (e.target !== section) return;
      if (e.isIntersecting) activate();
      else deactivate();
    });
  }, {
    threshold: [0.05],
    root: null,
    rootMargin: '0px'
  });
  io.observe(section);

  // Tab-Wechsel
  document.addEventListener('visibilitychange', () => {
    if (document.hidden) {
      deactivate();
    } else {
      const r = section.getBoundingClientRect();
      const vh = window.innerHeight || document.documentElement.clientHeight;
      const visiblePx = Math.max(0, Math.min(r.bottom, vh) - Math.max(r.top, 0));
      const isVis = visiblePx / Math.min(vh, r.height) >= 0.05;
      if (isVis) activate();
    }
  });

  // Initial: prüfen
  (function initVisibility(){
    const r = section.getBoundingClientRect();
    const vh = window.innerHeight || document.documentElement.clientHeight;
    const visiblePx = Math.max(0, Math.min(r.bottom, vh) - Math.max(r.top, 0));
    const isVis = visiblePx / Math.min(vh, r.height) >= 0.05;
    if (isVis) activate();
  })();
})();
</script>





<section class="cluster cosmos-suite" id="nebula-hub" aria-labelledby="nebula-hub-h">
  <h2 id="nebula-hub-h" class="headline">Wartung &amp; Support – Leistungen</h2>
  <p class="subline" id="nebula-hub-sub">
    Proaktive Betreuung für stabile, sichere und schnelle Websites &amp; Web-Apps – transparent, planbar, messbar.
  </p>

  <ul class="orbit-grid" aria-labelledby="nebula-hub-h" aria-describedby="nebula-hub-sub">

    <!-- Updates & Patching-Strategie -->
    <li class="module-card" id="svc-webdesign"
        aria-labelledby="svc-webdesign-h"
        aria-describedby="svc-webdesign-s">
      <div class="payload">
        <h3 id="svc-webdesign-h">Updates &amp; Patching-Strategie</h3>
        <p class="card-snippet" id="svc-webdesign-s">
          Regelmäßige Sicherheits- und Funktions-Updates mit Staging, Tests und Rollback.
        </p>
        <ul>
          <li>Core-, Plugin- &amp; Dependency-Updates</li>
          <li>Staging/Canary Releases &amp; Wartungsfenster</li>
          <li>Kompatibilitäts- &amp; Regressionstests</li>
          <li>Change-Logs &amp; transparente Dokumentation</li>
        </ul>
        <a href="./WebKonzept.html" class="warp-cta" aria-label="Mehr über Updates und Patching-Strategie erfahren">Mehr erfahren</a>
      </div>
    </li>

    <!-- Monitoring & Alerts -->
    <li class="module-card stellar-3d" id="svc-3d"
        aria-labelledby="svc-3d-h"
        aria-describedby="svc-3d-s">
      <div class="payload">
        <h3 id="svc-3d-h">Monitoring &amp; Alerts</h3>
        <p class="card-snippet" id="svc-3d-s">
          Uptime, Performance und Fehler in Echtzeit überwachen – bevor Nutzer es merken.
        </p>

        <ul>
          <li>Uptime-Checks &amp; Incident-Alerting</li>
          <li>APM, Logs &amp; Error Tracking</li>
          <li>Core Web Vitals &amp; Ladezeiten im Blick</li>
          <li>Monatsberichte &amp; quartalsweise Reviews</li>
        </ul>

        <div class="overlay-art" aria-hidden="true">
          <div class="orbit-shell">
            <img
              class="planet-sprite"
              loading="lazy"
              decoding="async"
              src="./indexFotoSlideShow/planet.webp"
              alt=""
              aria-hidden="true"
              width="512" height="512">
          </div>

          <img
            class="lazy-comet astronaut-sprite"
            src="./indexFotoSlideShow/2.webp"
            data-src="./indexFotoSlideShow/2.webp"
            alt=""
            decoding="async"
            loading="lazy"
            aria-hidden="true"
            width="512" height="512">
        </div>

        <a href="./UIUXDesign.html" class="warp-cta" aria-label="Mehr über Monitoring und Alerts erfahren">Mehr erfahren</a>
      </div>
    </li>

    <!-- Backups & Recovery -->
    <li class="module-card" id="svc-grafik"
        aria-labelledby="svc-grafik-h"
        aria-describedby="svc-grafik-s">
      <div class="payload">
        <h3 id="svc-grafik-h">Backups &amp; Recovery</h3>
        <p class="card-snippet" id="svc-grafik-s">
          Versionierte Sicherungen mit regelmäßig getesteter Wiederherstellung.
        </p>

        <ul>
          <li>Tägliche &amp; On-Demand Backups (Geo-Redundanz)</li>
          <li>Restore-Tests &amp; Notfall-Runbooks</li>
          <li>RPO/RTO nach Bedarf definieren</li>
          <li>On-Call für kritische Incidents</li>
        </ul>

        <div class="overlay-art" aria-hidden="true">
          <img
            class="lazy-comet"
            src="./indexFotoSlideShow/astro sitzend.webp"
            data-src="./indexFotoSlideShow/astro sitzend.webp"
            alt=""
            decoding="async"
            loading="lazy"
            aria-hidden="true"
            width="512" height="512">
        </div>

        <a href="./Webentwicklung.html" class="warp-cta" aria-label="Mehr über Backups und Recovery erfahren">Mehr erfahren</a>
      </div>
    </li>

    <!-- SLA & Betreuung -->
    <li class="module-card" id="svc-social"
        aria-labelledby="svc-social-h"
        aria-describedby="svc-social-s">
      <div class="payload">
        <h3 id="svc-social-h">SLA &amp; Betreuung</h3>
        <p class="card-snippet" id="svc-social-s">
          Klare Reaktionszeiten, Prioritäten und feste Ansprechpersonen – ohne Support-Hickhack.
        </p>

        <ul>
          <li>Ticket-System &amp; Priorisierung (P1–P3)</li>
          <li>Definierte Servicezeiten &amp; Eskalationspfade</li>
          <li>Regelmäßige Wartungsfenster &amp; Roadmap</li>
          <li>Transparente Reports &amp; Empfehlungen</li>
        </ul>

        <a href="./Wartung.html" class="warp-cta" aria-label="Mehr über SLA und Betreuung erfahren">Mehr erfahren</a>
      </div>
    </li>

  </ul>
</section>


<!-- 1) GSAP laden (vor unseren Helfern) -->
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>
<!-- 3) Unser Helfer (F3Animations) -->
<script>
(function(){
  const hasGSAP = () => !!(window.gsap && window.ScrollTrigger);
  const prefersReduce = () => window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  // 👉 NEU: Mobile/Touch erkennen
  const isMobile = () =>
    window.matchMedia('(max-width: 768px)').matches ||
    window.matchMedia('(hover: none) and (pointer: coarse)').matches;

  // ... splitText & PRESETS wie gehabt ...

  function setupCards(sectionSelector, preset='express', contentStagger=.06){
    if(!hasGSAP() || prefersReduce()) return;
    const opts = {...PRESETS[preset]};
    gsap.registerPlugin(ScrollTrigger);
    const cards = document.querySelectorAll(`${sectionSelector} .aether-card, ${sectionSelector} .module-card`);
    const mobile = isMobile(); // 👉 NEU

    cards.forEach(card=>{
      const h3 = card.querySelector('h3');
      const tl = gsap.timeline({ scrollTrigger:{ trigger: card, start:"top 74%", once:true } });

      // 👉 NUR AUF DESKTOP: Container-Karte animieren
      if(!mobile){
        tl.from(card, {opacity:0, y:16, duration:.26, ease:"power2.out"})
          .to(card, {scale:1, duration:.12, ease:"power2.out"}, "<");
      }

      // 👉 Typo-Animationen laufen IMMER (auch Mobile)
      if(h3){
        const {words, chars} = splitText(h3, {chars: opts.charDur>0});
        tl.from(words, {
          yPercent:120,
          duration:Math.max(.36, opts.wordDur-.06),
          ease:opts.wordEase,
          stagger:{ each:Math.min(.06, opts.wordStagger) }
        }, mobile ? 0 : "-=0.08"); // kleine Justierung auf Mobile

        if(opts.charDur>0 && chars.length){
          gsap.set(chars, {
            y:()=>gsap.utils.random(16,42),
            x:()=>gsap.utils.random(-8,8),
            rotation:()=>gsap.utils.random(-16,16),
            opacity:0
          });
          tl.to(chars, {
            y:0, x:0, rotation:0, opacity:1,
            duration:Math.max(.48, opts.charDur-.1),
            ease:'back.out(1.6)',
            stagger:{ each:Math.min(.013, (opts.charStagger||.013)) }
          }, "<0.03");
        }
      }

      const snippet  = card.querySelector('.snippet, .card-snippet');
      const tsnippet = card.querySelector('.t-snippet');
      const microtag = card.querySelector('.microtag');
      const bullets  = card.querySelectorAll('.delta-list li, .payload > ul > li');

      [snippet, tsnippet, microtag].forEach((el,i)=>{
        if(!el) return;
        tl.from(el, {opacity:0, y:10, duration:.32, ease:"power2.out"}, `+=${i?contentStagger:0.04}`);
      });
      if(bullets.length){
        tl.from(bullets, {
          opacity:0, y:8, duration:.26, ease:"power2.out",
          stagger:{ each:Math.min(.07, contentStagger) }
        }, "+=0.02");
      }
    });
  }

  window.F3Animations = { setupHeadline, setupCards, PRESETS };
})();

</script>
<!-- 4) Jetzt ERST aufrufen -->
<script>
  F3Animations.setupHeadline('#nebula-hub .headline', 'signature');
  F3Animations.setupCards('#nebula-hub', 'express');
</script>






<!-- =========================================================
     SECTION: METRICS — ID: metrics
     Webwartung-Edition mit belegten Quellen
========================================================== -->
<section id="metrics">
  <div class="section-pad">
    <div class="container">
      <header class="intro">
        <span class="eyebrow">Webwartung – belegt, warum sie sich lohnt</span>
      </header>

      <!-- KPI-CARDS -->
      <div class="results-steps">
        <!-- 1) Downtime kostet -->
        <article class="result-step s1">
          <button class="src-btn" data-dialog="src-1" aria-label="Quellen öffnen">
            <i data-feather="external-link"></i>
          </button>
          <div class="result-inner">
            <div class="kpi"><span class="val">54</span><span class="unit">%</span></div>
            <h3>Teure Ausfälle vermeiden</h3>
            <p>Über die Hälfte schwerer Ausfälle kostet mehr als 100.000&nbsp;US-$ – regelmäßige Wartung senkt das Risiko.</p>
          </div>
        </article>

        <!-- 2) Geschwindigkeit & Absprung -->
        <article class="result-step s2">
          <button class="src-btn" data-dialog="src-2" aria-label="Quellen öffnen">
            <i data-feather="external-link"></i>
          </button>
          <div class="result-inner">
            <div class="kpi"><span class="val">53</span><span class="unit">%</span></div>
            <h3>Schnellere Seite, weniger Abbrüche</h3>
            <p>Bis zu 53&nbsp;% der Besuche brechen ab, wenn Seiten länger als 3&nbsp;s laden – Wartung hält Performance stabil.</p>
          </div>
        </article>

        <!-- 3) Sicherheit durch Updates -->
        <article class="result-step s3">
          <button class="src-btn" data-dialog="src-3" aria-label="Quellen öffnen">
            <i data-feather="external-link"></i>
          </button>
          <div class="result-inner">
            <div class="kpi"><span class="val">96</span><span class="unit">%</span></div>
            <h3>Updates schließen Lücken</h3>
            <p>Bei WordPress betreffen die meisten Schwachstellen Plugins – regelmäßige Updates schützen vor Angriffen.</p>
          </div>
        </article>
      </div>

      <!-- BADGES -->
      <div class="badges" role="list">
        <span class="pill"><span class="dot"></span> Uptime & Monitoring</span>
        <span class="pill"><span class="dot"></span> Core Web Vitals &amp; Geschwindigkeit</span>
        <span class="pill"><span class="dot"></span> Sicherheits-Updates &amp; Backups</span>
        <span class="pill"><span class="dot"></span> DSGVO &amp; SSL/TLS</span>
      </div>

      <!-- DIALOGE (Quellen) -->
      <dialog id="src-1" class="src-dialog" aria-labelledby="src-1-title">
        <button class="src-x" data-close="src-1" aria-label="Dialog schließen">
          <i data-feather="x"></i>
        </button>
        <div class="src-head">
          <span class="src-icon">🛑</span>
          <h4 id="src-1-title" class="src-title">Kosten von Ausfällen – Quellen</h4>
        </div>
        <p class="src-desc">
          Laut Uptime Institute gaben <strong>54&nbsp;%</strong> der Befragten an, dass ihr jüngster signifikanter Ausfall mehr als <strong>100.000&nbsp;US-$</strong> kostete; ein wachsender Anteil lag über 1&nbsp;Mio. US-$. Wartung, Tests und Prävention senken das Risiko.
        </p>
        <ul class="src-list">
          <li class="src-item">
            <a href="https://datacenter.uptimeinstitute.com/rs/711-RIA-145/images/2024.GlobalDataCenterSurvey.Report.pdf" target="_blank" rel="noopener">
              Uptime Institute – Global Data Center Survey 2024 (PDF)
            </a>
            <span class="src-meta">54&nbsp;% &gt; 100.000&nbsp;US-$; steigender Anteil &gt; 1&nbsp;Mio.</span>
          </li>
          <li class="src-item">
            <a href="https://uptimeinstitute.com/resources/research-and-reports/annual-outage-analysis-2024" target="_blank" rel="noopener">
              Uptime Institute – Annual Outage Analysis 2024 (Summary)
            </a>
            <span class="src-meta">Trends, Ursachen, Kosten</span>
          </li>
        </ul>
        <div class="src-actions">
          <button class="src-copy" data-copy="src-1">Links kopieren</button>
        </div>
      </dialog>

      <dialog id="src-2" class="src-dialog" aria-labelledby="src-2-title">
        <button class="src-x" data-close="src-2" aria-label="Dialog schließen">
          <i data-feather="x"></i>
        </button>
        <div class="src-head">
          <span class="src-icon">⚡</span>
          <h4 id="src-2-title" class="src-title">Geschwindigkeit & Absprungrate – Quellen</h4>
        </div>
        <p class="src-desc">
          Google berichtet: <strong>53&nbsp;%</strong> der mobilen Besuche brechen ab, wenn Seiten länger als <strong>3&nbsp;s</strong> laden. Gute <em>Core Web Vitals</em> werden für Nutzererlebnis und Suche empfohlen.
        </p>
        <ul class="src-list">
          <li class="src-item">
            <a href="https://www.thinkwithgoogle.com/consumer-insights/consumer-trends/mobile-site-load-time-statistics/" target="_blank" rel="noopener">
              Think with Google – Mobile load time statistics
            </a>
            <span class="src-meta">53&nbsp;% Abbruch &gt; 3&nbsp;s</span>
          </li>
          <li class="src-item">
            <a href="https://developers.google.com/search/docs/appearance/core-web-vitals" target="_blank" rel="noopener">
              Google Search – Core Web Vitals &amp; Page Experience
            </a>
            <span class="src-meta">Empfehlungen &amp; Definitionen</span>
          </li>
          <li class="src-item">
            <a href="https://web.dev/case-studies/vitals-business-impact" target="_blank" rel="noopener">
              web.dev – Business Impact von Core Web Vitals (Cases)
            </a>
            <span class="src-meta">Fallstudien & Kennzahlen</span>
          </li>
        </ul>
        <div class="src-actions">
          <button class="src-copy" data-copy="src-2">Links kopieren</button>
        </div>
      </dialog>

      <dialog id="src-3" class="src-dialog" aria-labelledby="src-3-title">
        <button class="src-x" data-close="src-3" aria-label="Dialog schließen">
          <i data-feather="x"></i>
        </button>
        <div class="src-head">
          <span class="src-icon">🔒</span>
          <h4 id="src-3-title" class="src-title">Sicherheit & Updates – Quellen</h4>
        </div>
        <p class="src-desc">
          Wordfence meldet, dass <strong>~96&nbsp;%</strong> der gemeldeten WordPress-Schwachstellen Plugins betreffen. Regelmäßige Updates und das Ausmisten unnötiger Plugins reduzieren die Angriffsfläche deutlich.
        </p>
        <ul class="src-list">
          <li class="src-item">
            <a href="https://www.wordfence.com/blog/2025/04/2024-annual-wordpress-security-report-by-wordfence/" target="_blank" rel="noopener">
              Wordfence – 2024 Annual WordPress Security Report
            </a>
            <span class="src-meta">Plugins als Hauptquelle von Schwachstellen</span>
          </li>
          <li class="src-item">
            <a href="https://www.techradar.com/pro/security/dangerous-wordpress-plugin-puts-over-160-000-sites-at-risk-heres-what-we-know" target="_blank" rel="noopener">
              TechRadar – Kritische Plugin-Lücke (CVE-2025-24000)
            </a>
            <span class="src-meta">Aktueller Fall & Update-Notwendigkeit</span>
          </li>
        </ul>
        <div class="src-actions">
          <button class="src-copy" data-copy="src-3">Links kopieren</button>
        </div>
      </dialog>
    </div>
  </div>

  <script src="https://unpkg.com/feather-icons"></script>
  <script>
    feather.replace();
    (function(){
      const section = document.getElementById('metrics');
      function openDialog(id){ const dlg=document.getElementById(id); if(dlg) dlg.showModal(); }
      function closeDialog(id){ const dlg=document.getElementById(id); if(dlg) dlg.close(); }

      // Open via Card-Button
      section.querySelectorAll('.src-btn')
        .forEach(btn=>btn.addEventListener('click',()=>openDialog(btn.dataset.dialog)));

      // X oben rechts schließt Dialog
      section.querySelectorAll('.src-x')
        .forEach(btn=>btn.addEventListener('click',()=>closeDialog(btn.dataset.close)));

      // Copy-Buttons
      section.querySelectorAll('.src-copy').forEach(btn=>{
        btn.addEventListener('click',()=>{
          const dlg=document.getElementById(btn.dataset.copy);
          const links=[...dlg.querySelectorAll('a')].map(a=>`${a.textContent.trim()} — ${a.href}`).join('\n');
          navigator.clipboard.writeText(links);
          const old=btn.textContent;
          btn.textContent='Kopiert ✓';
          setTimeout(()=>btn.textContent=old,1600);
        });
      });

      // Klick außerhalb schließt Dialog
      section.querySelectorAll('.src-dialog').forEach(dlg=>{
        dlg.addEventListener('click',e=>{
          const r=dlg.getBoundingClientRect();
          if(e.clientX<r.left||e.clientX>r.right||e.clientY<r.top||e.clientY>r.bottom) dlg.close();
        });
      });
    })();
  </script>
</section>









<section
  id="wrf-offer"
  class="wrf-section"
  role="region"
  aria-labelledby="wrf-offer-title"
  aria-describedby="wrf-offer-sub"
>
  <div class="wrf-container wrf-grid" aria-label="Angebot: Kostenloses Wireframe">

    <!-- Left: Hero Image -->
    <div class="wrf-col wrf-col--left">
      <figure class="wrf-hero">
        <img
          src="assets/wireframe-hero.jpg"
          alt="Beispiel eines Website-Wireframes mit Navigation und Layout-Struktur"
          loading="lazy"
          width="1280"
          height="800"
        />
        <figcaption class="wrf-visually-hidden">Wireframe-Preview</figcaption>
      </figure>
    </div>

    <!-- Right: Headline / Subline -->
    <div class="wrf-col wrf-col--right">
      <header class="wrf-header">
        <!-- Eyebrow -->
        <div class="wrf-eyebrow" aria-hidden="true">
          <span class="wrf-eyebrow__pill">
            Gratis • <span class="wrf-count" data-count="48" aria-hidden="true">48</span>h
          </span>
        </div>

        <h2 id="wrf-offer-title" class="wrf-title" data-anim-title>
          Kostenloses Wireframe nach Erstgespräch
        </h2>

        <p class="wrf-subtitle" id="wrf-offer-sub">
          Buche ein unverbindliches Erstgespräch. Innerhalb von
          <strong class="u-underline u-sweep">max. 2&nbsp;Tagen</strong>
          erhältst du ein individuelles Wireframe deiner Website – abgestimmt auf deine Marke
          und dein Ziel. <span class="wrf-muted">Keine Kosten. Keine Verpflichtung.</span>
        </p>
      </header>

      <!-- Secondary action -->
      <div class="wrf-secondary-action">
        <button
          type="button"
          class="wrf-btn wrf-btn--ghost"
          id="wrf-info-trigger"
          aria-haspopup="dialog"
          aria-controls="wrf-dialog"
          aria-expanded="false"
        >
          Was ist ein Wireframe?
        </button>
      </div>
    </div>

    <!-- CTA -->
    <div class="wrf-actions">
      <div class="wrf-actions__inner">
        <button
          type="button"
          class="wrf-btn wrf-btn--primary"
          data-wrf-cta
          aria-describedby="wrf-cta-note"
        >
          <span class="wrf-btn__label">Kostenloses Wireframe sichern</span>
        </button>
      </div>
      <p class="wrf-cta__note" id="wrf-cta-note">Antwort innerhalb von <strong>48&nbsp;h</strong></p>
    </div>

  </div>

  <!-- Modal: Was ist ein Wireframe? -->
  <div
    class="wrf-dialog"
    id="wrf-dialog"
    role="dialog"
    aria-modal="true"
    aria-labelledby="wrf-dialog-title"
    aria-describedby="wrf-dialog-desc"
    hidden
  >
    <div class="wrf-dialog__backdrop" data-wrf-close></div>
    <div class="wrf-dialog__panel" role="document" tabindex="-1">
      <header class="wrf-dialog__head">
        <h3 id="wrf-dialog-title" class="wrf-dialog__title">Was ist ein Wireframe?</h3>
        <button class="wrf-dialog__close" type="button" aria-label="Dialog schließen" data-wrf-close>×</button>
      </header>

      <div class="wrf-dialog__body">
        <!-- Left: Big media w/ thumbnails -->
        <figure class="wrf-media">
          <img id="wrf-step-img" alt="Beispielhafte Wireframe-Darstellung einer Website" loading="lazy" />
          <figcaption id="wrf-step-cap" class="wrf-visually-hidden"></figcaption>

          <ul class="wrf-thumbs" id="wrf-thumbs" aria-label="Beispielbilder von Wireframes"></ul>
        </figure>

        <!-- Right: Copy + stepper -->
        <div class="wrf-copy">
          <h4 id="wrf-step-title" class="wrf-stepheading"></h4>
          <p id="wrf-step-text" class="wrf-stepdesc"></p>

          <p id="wrf-dialog-desc" class="wrf-visually-hidden">
            Nutze Vor/Zurück, Dots oder Thumbnails, um zwischen den Schritten zu wechseln.
          </p>

          <nav class="wrf-stepper" aria-label="Schritte zur Erklärung eines Wireframes">
            <button class="wrf-stepper__btn" id="wrf-step-prev" type="button" aria-label="Vorheriger Schritt">‹</button>
            <ul class="wrf-dots" id="wrf-dots" aria-label="Schrittanzeige"></ul>
            <button class="wrf-stepper__btn" id="wrf-step-next" type="button" aria-label="Nächster Schritt">›</button>
          </nav>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- GSAP (optional) -->
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/TextPlugin.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/Flip.min.js" defer></script>

<script>
/* ==========================
   BUSY-STATE (CTA)
   ========================== */
(function(){
  const root = document.getElementById('wrf-offer') || document.getElementById('preview-offer');
  const btn  = root?.querySelector('[data-wrf-cta]');
  if(!btn) return;
  btn.addEventListener('click', ()=>{
    btn.setAttribute('aria-disabled','true');
    setTimeout(()=> btn.removeAttribute('aria-disabled'), 900);
  }, {passive:true});
})();

/* ==========================
   DIALOG / STEPPER (3D PREVIEW)
   ========================== */
(function(){
  const openBtn = document.getElementById('wrf-info-trigger');   // „Was umfasst die 3D-Vorschau?“
  const dialog  = document.getElementById('wrf-dialog');
  if(!openBtn || !dialog) return;

  const backdrop = dialog.querySelector('.wrf-dialog__backdrop');
  const panel    = dialog.querySelector('.wrf-dialog__panel');
  const closeBtns= dialog.querySelectorAll('[data-wrf-close], .wrf-dialog__close');
  const focusSel = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';

  // Step content
  const img   = dialog.querySelector('#wrf-step-img');
  const cap   = dialog.querySelector('#wrf-step-cap');
  const title = dialog.querySelector('#wrf-step-title');
  const text  = dialog.querySelector('#wrf-step-text');
  const dots  = dialog.querySelector('#wrf-dots');
  const prev  = dialog.querySelector('#wrf-step-prev');
  const next  = dialog.querySelector('#wrf-step-next');
  const thumbs= dialog.querySelector('#wrf-thumbs');

  // Platzhalter-SVG
  const svg = (label, tint='#e5e7eb')=>{
    const s = `<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1280 800' role='img' aria-label='${label}'>
      <defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'>
        <stop offset='0' stop-color='#ffffff'/><stop offset='1' stop-color='#f5f7fb'/>
      </linearGradient></defs>
      <rect width='1280' height='800' fill='url(#g)'/>
      <rect x='64' y='540' width='1152' height='196' rx='18' fill='#eef2f7'/>
      <rect x='200' y='360' width='260' height='160' rx='8' fill='${tint}'/>
      <rect x='500' y='320' width='320' height='200' rx='10' fill='${tint}'/>
      <rect x='860' y='380' width='180' height='140' rx='8' fill='${tint}'/>
      <ellipse cx='820' cy='250' rx='220' ry='90' fill='rgba(255,255,200,.35)'/>
      <rect x='84' y='84' width='1112' height='520' rx='18' fill='none' stroke='#9aa3af' stroke-width='6'/>
      <text x='50%' y='752' text-anchor='middle' font-family='system-ui, -apple-system, Segoe UI, Roboto' font-size='38' fill='#6b7280'>${label}</text>
    </svg>`;
    return 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(s);
  };
// Wireframe-Preview Steps
const steps = [
  {
    title: 'Idee & Zieldefinition',
    text:  'Im kurzen Gespräch klären wir Ziel, Zielgruppe und gewünschte Wirkung deiner Website. So entsteht eine klare Grundlage für Struktur und Inhalte.',
    img:   svg('Ziele • Zielgruppe • Konzept', '#e6eef9')
  },
  {
    title: 'Seitenstruktur & Navigation',
    text:  'Wir skizzieren die wichtigsten Seiten, Bereiche und Menüpunkte. Dadurch wird sofort ersichtlich, wie Besucher:innen sich intuitiv zurechtfinden.',
    img:   svg('Sitemap • Navigation • Struktur', '#efe9ff')
  },
  {
    title: 'Layout & Anordnung',
    text:  'Das Wireframe zeigt, wo Inhalte, Bilder und Buttons stehen – ganz ohne Ablenkung durch Farben oder Details. Fokus auf Benutzerführung und Klarheit.',
    img:   svg('Layout • Content-Zonen • Buttons', '#eaf7ee')
  },
  {
    title: 'Interaktion & Flow',
    text:  'Wir simulieren Klickpfade und typische Nutzerwege. So erkennst du früh, wie deine Kund:innen durch die Seite geführt werden – mobil und am Desktop.',
    img:   svg('Userflow • Klickpfade • Mobile', '#fff0e6')
  },
  {
    title: 'Feedback & Feinschliff',
    text:  'Du bekommst dein individuelles Wireframe als klickbaren Prototyp (Figma/PDF). Änderungen oder Ideen fließen direkt ein – völlig kostenlos & unverbindlich.',
    img:   svg('Feedback • Prototyp • Feinschliff', '#f6f8ff')
  }
];


  // Build UI
  function buildThumbs(){
    if(!thumbs) return;
    thumbs.innerHTML = '';
    steps.forEach((s,i)=>{
      const li=document.createElement('li'); const b=document.createElement('button'); b.type='button';
      b.setAttribute('aria-label',`Beispiel ${i+1}: ${s.title}`);
      const im=document.createElement('img'); im.src=s.img; im.alt=`Vorschau: ${s.title}`;
      b.appendChild(im); b.addEventListener('click',()=>{ idx=i; render(idx,true); });
      li.appendChild(b); thumbs.appendChild(li);
    });
  }
  function buildDots(){
    if(!dots) return;
    dots.innerHTML = '';
    steps.forEach((s,i)=>{
      const li=document.createElement('li'); const b=document.createElement('button'); b.type='button';
      b.setAttribute('aria-label',`Zu Schritt ${i+1}: ${s.title}`);
      b.addEventListener('click',()=>{ idx=i; render(idx,true); });
      li.appendChild(b); dots.appendChild(li);
    });
  }

  // Render
  function render(i, animate){
    const s = steps[i]; if(!img || !title || !text) return;

    // mit/ohne GSAP
    if(animate && window.gsap){
      gsap.killTweensOf([img,title,text]);
      const tl=gsap.timeline({defaults:{duration:0.18,ease:"power2.out"}});
      tl.to([img,title,text],{opacity:0,y:6,stagger:0.02})
        .add(()=>{ img.src=s.img; cap && (cap.textContent=s.title); title.textContent=s.title; text.textContent=s.text; })
        .fromTo([img,title,text],{opacity:0,y:6},{opacity:1,y:0,stagger:0.02});
    }else if(animate){
      [img,title,text].forEach(el=>el.classList.add('wrf-fade-out'));
      setTimeout(()=>{
        img.src=s.img; cap && (cap.textContent=s.title); title.textContent=s.title; text.textContent=s.text;
        [img,title,text].forEach(el=>{
          el.classList.remove('wrf-fade-out'); el.classList.add('wrf-fade-in');
          setTimeout(()=>el.classList.remove('wrf-fade-in'),160);
        });
      },140);
    }else{
      img.src=s.img; cap && (cap.textContent=s.title); title.textContent=s.title; text.textContent=s.text;
    }

    // aria-current
    if(dots){ [...dots.children].forEach((li,n)=>{ li.firstElementChild?.setAttribute('aria-current', String(n===i)); }); }
    if(thumbs){ [...thumbs.querySelectorAll('button')].forEach((b,n)=> b.setAttribute('aria-current', String(n===i))); }
  }

  // Focus Trap
  function trapFocus(e){
    if (dialog.hidden) return;
    const els = panel.querySelectorAll(focusSel); if(!els.length) return;
    const first=els[0], last=els[els.length-1];
    if(e.key==='Tab'){
      if(e.shiftKey && document.activeElement===first){ e.preventDefault(); last.focus(); }
      else if(!e.shiftKey && document.activeElement===last){ e.preventDefault(); first.focus(); }
    }
    if(e.key==='Escape'){ close(); }
  }

  let idx=0, lastFocus=null;

  function open(){
    lastFocus = document.activeElement;
    idx=0; buildThumbs(); buildDots(); render(idx,false);
    dialog.hidden=false; openBtn.setAttribute('aria-expanded','true');
    document.body.style.overflow='hidden'; document.addEventListener('keydown', trapFocus);

    if(window.gsap){
      gsap.timeline({defaults:{ease:"power2.out"}})
        .to(backdrop,{opacity:1,duration:0.18},0)
        .fromTo(panel,{opacity:0,y:12},{opacity:1,y:0,duration:0.22},0.02)
        .then(()=>{ (panel.querySelector('button')||panel).focus?.(); });
    }else{
      backdrop.style.opacity=1; panel.style.opacity=1; panel.style.transform='translateY(0)';
      (panel.querySelector('button')||panel).focus?.();
    }
  }

  function close(){
    if(window.gsap){
      gsap.timeline({defaults:{ease:"power2.in"}})
        .to(panel,{opacity:0,y:12,duration:0.16},0)
        .to(backdrop,{opacity:0,duration:0.16},0)
        .then(done);
    }else{
      done();
    }
    function done(){
      dialog.hidden=true; openBtn.setAttribute('aria-expanded','false');
      document.body.style.overflow=''; document.removeEventListener('keydown', trapFocus);
      if(lastFocus && lastFocus.focus) lastFocus.focus();
    }
  }

  // Events
  openBtn.addEventListener('click', open);
  closeBtns.forEach(el=>el.addEventListener('click', close));
  backdrop?.addEventListener('click', close);
  prev?.addEventListener('click', ()=>{ idx=(idx+steps.length-1)%steps.length; render(idx,true); });
  next?.addEventListener('click', ()=>{ idx=(idx+1)%steps.length; render(idx,true); });
})();

/* ==========================
   SECTION ANIMATIONS (GSAP optional)
   ========================== */
(function(){
  function countUp(el, target=48, dur=800){
    if(window.gsap){
      const obj={val:0};
      gsap.to(obj,{val:target,duration:dur/1000,ease:"power1.out",onUpdate:()=>{ el.textContent = String(Math.round(obj.val)); }});
      return;
    }
    const start=performance.now();
    function tick(t){ const p=Math.min(1,(t-start)/dur); el.textContent=String(Math.round(target*p)); if(p<1) requestAnimationFrame(tick); }
    requestAnimationFrame(tick);
  }

  function initGSAP(){
    if(!window.gsap) return;
    gsap.registerPlugin(ScrollTrigger, TextPlugin, Flip);

    const tl = gsap.timeline({
      scrollTrigger:{ trigger:"#wrf-offer, #preview-offer", start:"top 70%", once:true }
    });

    // Eyebrow
    tl.from(".wrf-eyebrow",{x:-8,opacity:0,duration:0.35,ease:"power2.out"});

    // Fancy title split (lightweight version)
    const el = document.querySelector('[data-anim-title]');
    if(el){
      const text = el.textContent.trim();
      el.innerHTML = text.split(' ').map(w=>`<span class="word"><span class="chars">${[...w].map(c=>`<span class="char">${c}</span>`).join('')}</span></span>`).join(' ');
      const words = el.querySelectorAll('.word');
      tl.from(words,{yPercent:120,duration:0.48,ease:"power3.out",stagger:{each:0.06}},"-=0.15");
    }

    tl.from(".wrf-subtitle",{y:10,opacity:0,duration:0.5,ease:"power2.out"},"-=0.1");
    tl.from("#wrf-info-trigger",{y:8,opacity:0,duration:0.4,ease:"power2.out"},"-=0.2");

    // CTA settle
    tl.fromTo(".wrf-actions .wrf-btn--primary",
      {scale:0.98, boxShadow:"0 0 0 rgba(0,0,0,0)"},
      {scale:1, duration:0.16, ease:"power2.out", boxShadow:"0 10px 24px rgba(255,106,0,.32)"}
    );

    // Parallax hero
    gsap.to(".wrf-hero img",{
      yPercent:2, ease:"none",
      scrollTrigger:{ trigger:"#wrf-offer, #preview-offer", start:"top bottom", end:"bottom top", scrub:0.1 }
    });
  }

  // Count-up (48h) – läuft auch ohne GSAP
  document.addEventListener('DOMContentLoaded', ()=>{
    const el = document.querySelector('.wrf-count');
    if(el){ const target = parseFloat(el.dataset.count || '48'); countUp(el, target, 800); }
    initGSAP();
  });
})();
</script>







<section class="pane-transition" id="flowhub" aria-labelledby="flowhub-h">
  <div class="pane-world is-visible" id="paneWorld">
    <div class="pane-wrap">
      <h2 id="flowhub-h" class="pane-title">So läuft Wartung &amp; Support ab</h2>
      <p class="pane-subtitle">
        Proaktiv und transparent – mit klaren Ergebnissen nach jeder Phase.
      </p>

      <div class="flow-rail" role="list">

        <!-- 01: Onboarding & Audit -->
        <div class="flow-card has-art" id="flow-step-01" role="button" tabindex="0"
             data-stage="01" aria-expanded="false" aria-labelledby="flow-step-01-h" aria-controls="flow-step-01-details">
          <span class="card-num-giant" aria-hidden="true">01</span>
          <div class="card-core">
            <span class="card-num" aria-hidden="true">01</span>
            <h3 id="flow-step-01-h">Onboarding &amp; System-Audit</h3>
            <p class="m-snippet">
              Zugänge klären, Bestand aufnehmen, Risiken bewerten.
            </p>
            <p class="t-snippet">
              Security-/Performance-Check, Abhängigkeiten, Backup-Status, Monitoring-Ist.
            </p>
            <p>
              Ergebnis: Wartungsplan, Prioritäten (P1–P3), KPI-Set &amp; klarer Maßnahmenkatalog.
            </p>
            <div class="details" id="flow-step-01-details">
              <p>Dokumentiert im Audit-Report inkl. Risiko-Matrix, Quick Wins, Zeitplan &amp; Verantwortlichkeiten.</p>
            </div>
          </div>
        </div>

        <!-- 02: Stabilisierung & Updates -->
        <div class="flow-card" id="flow-step-02" role="button" tabindex="0"
             data-stage="02" aria-expanded="false" aria-labelledby="flow-step-02-h" aria-controls="flow-step-02-details">
          <span class="card-num-giant" aria-hidden="true">02</span>
          <div class="card-core">
            <span class="card-num" aria-hidden="true">02</span>
            <h3 id="flow-step-02-h">Stabilisierung &amp; Updates</h3>
            <p class="m-snippet">
              Patches &amp; Upgrades ohne Ausfallzeiten.
            </p>
            <p class="t-snippet">
              Staging/Canary, Tests &amp; Rollback – in definierten Wartungsfenstern.
            </p>
            <p>
              Ergebnis: gehärtete, aktuelle Umgebung – dokumentiert im Change-Log.
            </p>
            <div class="details" id="flow-step-02-details">
              <p>Output: Update-Protokolle, Kompatibilitäts-Checks, Hardening-Maßnahmen &amp; Freigaben.</p>
            </div>
          </div>
        </div>

        <!-- 03: Monitoring & Backups -->
        <div class="flow-card" id="flow-step-03" role="button" tabindex="0"
             data-stage="03" aria-expanded="false" aria-labelledby="flow-step-03-h" aria-controls="flow-step-03-details">
          <span class="card-num-giant" aria-hidden="true">03</span>
          <div class="card-core">
            <span class="card-num" aria-hidden="true">03</span>
            <h3 id="flow-step-03-h">Monitoring &amp; Backups</h3>
            <p class="m-snippet">
              Uptime, Leistung und Fehler im Blick – 24/7 Alerts.
            </p>
            <p class="t-snippet">
              APM, Logs, Core Web Vitals &amp; verifizierte Backup-/Restore-Tests.
            </p>
            <p>
              Ergebnis: nachweisbare Stabilität &amp; belastbare Wiederherstellbarkeit.
            </p>
            <div class="details" id="flow-step-03-details">
              <p>Zugänge zu Dashboards, Backup-Protokolle, Alarmierungsregeln &amp; Test-Nachweise inklusive.</p>
            </div>
          </div>
        </div>

        <!-- 04: Betrieb, Incident & Reporting -->
        <div class="flow-card" id="flow-step-04" role="button" tabindex="0"
             data-stage="04" aria-expanded="false" aria-labelledby="flow-step-04-h" aria-controls="flow-step-04-details">
          <span class="card-num-giant" aria-hidden="true">04</span>
          <div class="card-core">
            <span class="card-num" aria-hidden="true">04</span>
            <h3 id="flow-step-04-h">Betrieb, Incidents &amp; Reporting</h3>
            <p class="m-snippet">
              SLA-geführt reagieren, Ursachen beheben, nachhaltig verbessern.
            </p>
            <p class="t-snippet">
              Runbooks &amp; Eskalation, Post-Mortems, Monatsberichte &amp; Quartals-Reviews.
            </p>
            <p>
              Ergebnis: kontinuierliche Optimierung statt Feuerwehr – planbarer, sicherer Betrieb.
            </p>
            <div class="details" id="flow-step-04-details">
              <p>Regelmäßige Roadmap-Updates, Priorisierung nach Impact &amp; klare Empfehlungen für die nächsten Schritte.</p>
            </div>
          </div>
        </div>

      </div><!-- /.flow-rail -->
    </div>
  </div>
</section>
<script>
(function(){
  const rail = document.querySelector('#flowhub .flow-rail');
  if(!rail) return;
  const firstCard = document.querySelector('#flowhub .flow-card');

  function updateTracker(){
    // nur Mobile
    if(!window.matchMedia('(max-width: 699.98px)').matches) return;

    const railRect = rail.getBoundingClientRect();
    const vh = window.innerHeight;

    // Referenzlinie im Viewport (wo "gemessen" wird)
    const refY = vh * 0.15;

    // Fortschritt: 0 wenn rail-top @ refY, 1 wenn rail-bottom @ refY
    const progress = (refY - railRect.top) / railRect.height;
    const p = Math.max(0, Math.min(1, progress));

    // Mitte der ersten Karte relativ zur Rail
    let firstCenter = 0;
    if(firstCard){
      const r = firstCard.getBoundingClientRect();
      firstCenter = (r.top - railRect.top) + (r.height / 2);
      // Sicherheitsnetz: falls erste Karte sehr klein/außerhalb ist
      firstCenter = Math.max(0, Math.min(firstCenter, railRect.height));
    }

    // Mapping: bei p=0 -> firstCenter; bei p=1 -> railRect.height
    const y = firstCenter + p * (railRect.height - firstCenter);

    rail.style.setProperty('--tracker-y', y + 'px');
  }

  const ro = new ResizeObserver(updateTracker);
  ro.observe(document.documentElement);
  updateTracker();
  window.addEventListener('scroll', updateTracker, { passive: true });
  window.addEventListener('resize', updateTracker);
  window.addEventListener('load', updateTracker);
})();
</script>
<!-- GSAP -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js" defer></script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    if (window.gsap) {
      // ScrollTrigger wird NICHT mehr verwendet (Scroll-Reveal entfernt),
      // Registrierung ist aber unschädlich, falls du später wieder willst.
      gsap.registerPlugin(window.ScrollTrigger || {});

      const cardsList = Array.from(document.querySelectorAll('#flowhub .flow-card'));

      // === Nummerierung 00-basiert (00, 01, 02, ...) ===
      cardsList.forEach((card, i) => {
        const nn = String(i).padStart(2, '0');
        card.setAttribute('data-stage', nn); // für ::after
        const small = card.querySelector('.card-num');
        const giant = card.querySelector('.card-num-giant');
        if (small) small.textContent = nn;
        if (giant) giant.textContent = nn;
      });

      // === KEIN Scroll-Reveal mehr: Basiszustand sofort sichtbar/neutral ===
      gsap.set(cardsList, { opacity: 1, y: 0 });

      // === Nudge (Doppel-Stups) der zweiten Karte, zyklisch — bleibt erhalten ===
      const isDesktop = () => window.matchMedia('(min-width: 1025px)').matches;
      let nudgeInterval = null;
      let nudgeTl = null;

      function clearNudgeTl() {
        if (nudgeTl) { nudgeTl.kill(); nudgeTl = null; }
        if (cardsList[1]) gsap.set(cardsList[1], { y: 0 });
      }

      function stopNudge() {
        if (nudgeInterval) {
          clearInterval(nudgeInterval);
          nudgeInterval = null;
        }
        clearNudgeTl();
      }

      function makeNudge(target, amp = 10) {
        // zwei leichte Stupser
        const tl = gsap.timeline({ defaults: { clearProps: false } });
        tl.to(target, { y: -amp, duration: 0.16, ease: 'power1.out' })
          .to(target, { y: 0, duration: 0.20, ease: 'power2.out' }, '+=0.02')
          .to(target, { y: -(amp * 0.7), duration: 0.14, ease: 'power1.out' }, '+=0.18')
          .to(target, { y: 0, duration: 0.18, ease: 'power2.out' });
        return tl;
      }

      function startNudge() {
        if (prefersReduced || nudgeInterval || !isDesktop() || !cardsList[1]) return;
        nudgeInterval = setInterval(() => {
          clearNudgeTl();
          nudgeTl = makeNudge(cardsList[1], 10);
        }, 7000);
      }

      // === Expand/Auto-Cycle nur auf Desktop — bleibt erhalten ===
      (function(){
        const rail = document.querySelector('#flowhub .flow-rail');
        if(!rail) return;
        const cards = Array.from(rail.querySelectorAll('.flow-card'));
        const rootEl = document.documentElement;
        const root = document.getElementById('flowhub');
        let autoId=null,selectedIdx=-1,railInView=false,booted=false;

        const mqDesktop = window.matchMedia('(min-width:1025px)');
        let expandMode = mqDesktop.matches && !prefersReduced;

        function syncHeightFromFirst(){
          const first=cards[0];
          if(!first) return;
          const wasOpen=first.classList.contains('is-open');
          if(!wasOpen) first.classList.add('is-open');
          const h=first.getBoundingClientRect().height;
          rootEl.style.setProperty('--tile-h', (h||0)+'px');
          if(!wasOpen) first.classList.remove('is-open');
        }

        function openAt(idx){
          if(!expandMode) return;
          if(idx<0||idx>=cards.length) return;
          selectedIdx=idx;
          stopNudge();
          cards.forEach((c,i)=>{
            const open=i===idx;
            c.classList.toggle('is-open',open);
            c.setAttribute('aria-expanded',open?'true':'false');
          });
          if(idx===0) syncHeightFromFirst();
        }

        function clearAutoCycle(){ if(autoId){ clearTimeout(autoId); autoId=null; } }
        function planNext(delayMs=18000){
          if(!expandMode) return;
          clearAutoCycle();
          if(!railInView) return;
          autoId=setTimeout(()=>{
            if(!railInView) return;
            const next=(selectedIdx+1)%cards.length;
            openAt(next);
            planNext(delayMs);
          },delayMs);
        }

        cards.forEach((c,i)=>{
          c.addEventListener('click',()=>{ if(!expandMode) return; stopNudge(); openAt(i); planNext(); });
          c.addEventListener('keydown',e=>{
            if(!expandMode) return;
            if(e.key==='Enter'||e.key===' '){ e.preventDefault(); stopNudge(); openAt(i); planNext(); }
          });
        });

        const io=new IntersectionObserver((entries)=>{
          const entry=entries[0];
          railInView=entry.isIntersecting && entry.intersectionRatio>=0.5;
          if(!expandMode) return;
          if(railInView){
            if(!booted){ booted=true; openAt(0); planNext(); root.classList.add('booted'); }
            else { planNext(); }
            startNudge(); // Sichtbar + Desktop -> Nudge starten
          } else {
            stopNudge();  // nicht sichtbar -> pausieren
          }
        },{threshold:[0,0.5,1]});
        io.observe(rail);

        function applyMode(){
          expandMode = mqDesktop.matches && !prefersReduced;
          if (root){
            root.classList.toggle('is-enhanced', expandMode);
          }
          if(!expandMode){
            clearAutoCycle();
            cards.forEach(c=>{ c.classList.add('is-open'); c.setAttribute('aria-expanded','true'); });
            rootEl.style.setProperty('--tile-h','auto');
            stopNudge();
            root?.classList.remove('booted');
          }else{
            cards.forEach(c=>{ c.classList.remove('is-open'); c.setAttribute('aria-expanded','false'); });
            openAt(Math.max(0,selectedIdx,0)); // sofort öffnen
            root?.classList.add('booted');     // Boot-Modus aktivieren
            if(railInView){ planNext(); startNudge(); }
          }
        }

        mqDesktop.addEventListener('change', applyMode);
        window.addEventListener('resize', () => { if(expandMode) syncHeightFromFirst(); });

        applyMode();

        // Doppelt absichern: beim Laden direkt öffnen falls Desktop
        if (expandMode) { openAt(0); root?.classList.add('booted'); }
      })();
    }
  });
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebPage",
      "@id": "https://example.com/prozess/#webpage",
      "url": "https://example.com/prozess/",
      "name": "Projektablauf mit Fusion³",
      "inLanguage": "de",
      "description": "So läuft ein Projekt mit Fusion³: transparenter Ablauf von Kick-off bis Launch – schnell, klar, partnerschaftlich.",
      "isPartOf": { "@type": "WebSite", "@id": "https://example.com/#website", "url": "https://example.com/" },
      "mainEntity": { "@id": "https://example.com/prozess/#howto-flow" }
    },
    {
      "@type": "HowTo",
      "@id": "https://example.com/prozess/#howto-flow",
      "name": "So läuft ein Projekt mit Fusion³",
      "inLanguage": "de",
      "description": "Schritt-für-Schritt-Ablauf von Erstgespräch über Konzeption bis Feinschliff und Übergabe.",
      "step": [
        {
          "@type": "HowToStep",
          "position": 0,
          "name": "Unser Ansatz",
          "url": "https://example.com/prozess/#flow-step-00",
          "itemListElement": [
            { "@type": "HowToDirection", "text": "Strukturiertes Onboarding nach Projektstart." },
            { "@type": "HowToDirection", "text": "Erstgespräch zu Rahmenbedingungen, Zielen und Wünschen." }
          ]
        },
        {
          "@type": "HowToStep",
          "position": 1,
          "name": "Erstgespräch – Der Grundstein",
          "url": "https://example.com/prozess/#flow-step-01",
          "itemListElement": [
            { "@type": "HowToDirection", "text": "Ziele, Zielgruppen und gewünschte Wirkungen klären." },
            { "@type": "HowToTip", "text": "Auf Wunsch nächste Schritte und Zeitplan definieren." }
          ]
        },
        {
          "@type": "HowToStep",
          "position": 2,
          "name": "Konzeption & Design",
          "url": "https://example.com/prozess/#flow-step-02",
          "itemListElement": [
            { "@type": "HowToDirection", "text": "Wireframes, Styleframes und Interaktionsideen entwickeln." },
            { "@type": "HowToDirection", "text": "Iterativ Look & Feel verfeinern – Story, Usability, Performance." }
          ]
        },
        {
          "@type": "HowToStep",
          "position": 3,
          "name": "Feedback & Feinschliff",
          "url": "https://example.com/prozess/#flow-step-03",
          "itemListElement": [
            { "@type": "HowToDirection", "text": "Feedbackschleifen zur Erwartungsabstimmung und Detailoptimierung." },
            { "@type": "HowToDirection", "text": "Übergabe, Dokumentation und Roadmap für spätere Ausbaustufen." }
          ]
        }
      ]
    }
  ]
}
</script>






<section id="aurora-sheet" class="aurora-sheet container" aria-labelledby="aurora-crown" aria-describedby="aurora-chant">
  <h2 id="aurora-crown" class="aurora-title" data-anim-aurora>Wartung &amp; Support: Stabil. Sicher. Transparent.</h2>

  <p id="aurora-chant" class="aurora-subtitle" aria-live="polite">
    <span class="subtitle-snippet">Vorausschauend betreiben – statt reaktiv reparieren.</span>
    <span class="subtitle-t">Unser Ansatz: Planbare Wartung, aktives Monitoring und klare Kommunikation – für dauerhafte Stabilität und Sicherheit.</span>
    <span class="subtitle-full">
      Wartung ist kein „nach dem Launch“-Gedanke: Wir sorgen für Updates, Sicherheit, Performance und Support auf SLA-Niveau.<br>
      Transparent dokumentiert, kontinuierlich optimiert, zuverlässig im Betrieb.
    </span>
  </p>

  <!-- Semantische Liste der Wartungsbereiche -->
  <ul class="quasar-grid" aria-label="Bereiche: Audit, Monitoring, Betrieb">

    <!-- System-Audit & Onboarding -->
    <li>
      <article class="aether-card" id="aether-workshops"
               aria-labelledby="aether-workshops-h"
               aria-describedby="aether-workshops-k aether-workshops-s">
        <h3 id="aether-workshops-h">System-Audit &amp; Onboarding</h3>
        <p class="snippet" id="aether-workshops-s">Wir prüfen Systeme, erfassen Risiken und schaffen Transparenz – bevor der Betrieb startet.</p>
        <p class="t-snippet">Im technischen Audit analysieren wir Code, Sicherheit, Hosting und Abhängigkeiten. So entsteht ein klarer Wartungsplan mit Prioritäten und Zuständigkeiten.</p>
        <p class="microtag" id="aether-workshops-k">Analyse, Struktur &amp; Planung</p>

        <ul class="delta-list" aria-label="Schwerpunkte im Audit">
          <li>
            <span class="visually-hidden">Aspekt: </span>
            <span class="lead">Technik-Check</span>
            <span class="copy">Core, Plugins, Server, Security-Header und Performance werden geprüft.</span>
          </li>
          <li>
            <span class="visually-hidden">Aspekt: </span>
            <span class="lead">Sicherheitsstatus</span>
            <span class="copy">CVE-, Backup- und Update-Status dokumentiert, Risiken priorisiert.</span>
          </li>
          <li>
            <span class="visually-hidden">Aspekt: </span>
            <span class="lead">Wartungsplan</span>
            <span class="copy">Definierte Frequenzen, Aufgaben, Ansprechpartner und Eskalationswege.</span>
          </li>
        </ul>
      </article>
    </li>

    <!-- Monitoring & Updates -->
    <li>
      <article class="aether-card" id="aether-planning"
               aria-labelledby="aether-planning-h"
               aria-describedby="aether-planning-k aether-planning-s">
        <h3 id="aether-planning-h">Monitoring &amp; Updates</h3>
        <p class="snippet" id="aether-planning-s">Wir halten Systeme aktuell und überwachen sie in Echtzeit – ohne Betriebsunterbrechung.</p>
        <p class="t-snippet">Automatisierte Monitoring-Lösungen melden Fehler, bevor sie Nutzer treffen. Geplante Updates und Tests sichern Stabilität und Performance langfristig ab.</p>
        <p class="microtag" id="aether-planning-k">Uptime, Sicherheit &amp; Aktualität</p>

        <ul class="delta-list" aria-label="Elemente der Monitoringphase">
          <li>
            <span class="visually-hidden">Element: </span>
            <span class="lead">Live-Monitoring</span>
            <span class="copy">Uptime, Response Times und Error-Tracking in Echtzeit.</span>
          </li>
          <li>
            <span class="visually-hidden">Element: </span>
            <span class="lead">Updates</span>
            <span class="copy">Core-, Plugin- und System-Updates nach Staging-Tests und Rollback-Plan.</span>
          </li>
          <li>
            <span class="visually-hidden">Element: </span>
            <span class="lead">Berichte</span>
            <span class="copy">Monatliche Reports zu Performance, Sicherheit und Änderungen.</span>
          </li>
        </ul>
      </article>
    </li>

    <!-- Support & Reporting -->
    <li>
      <article class="aether-card" id="aether-impact"
               aria-labelledby="aether-impact-h"
               aria-describedby="aether-impact-k aether-impact-s">
        <h3 id="aether-impact-h">Support &amp; Reporting</h3>
        <p class="snippet" id="aether-impact-s">Wir reagieren, dokumentieren und verbessern – auf Basis klarer SLAs und nachvollziehbarer Daten.</p>
        <p class="t-snippet">Tickets, Prioritäten und Laufzeiten sind definiert. Incidents werden analysiert, Ursachen beseitigt und Lessons Learned fließen direkt in zukünftige Wartungen ein.</p>
        <p class="microtag" id="aether-impact-k">SLA, Kommunikation &amp; Verbesserung</p>

        <ul class="delta-list" aria-label="Kernbereiche im Support">
          <li>
            <span class="visually-hidden">Faktor: </span>
            <span class="lead">SLA &amp; Priorisierung</span>
            <span class="copy">Definierte Reaktions- und Lösungszeiten nach Dringlichkeit.</span>
          </li>
          <li>
            <span class="visually-hidden">Faktor: </span>
            <span class="lead">Incident-Management</span>
            <span class="copy">Post-Mortems, Runbooks und Monitoring-Optimierung nach jedem Vorfall.</span>
          </li>
          <li>
            <span class="visually-hidden">Faktor: </span>
            <span class="lead">Reporting &amp; Empfehlungen</span>
            <span class="copy">Transparente Monatsberichte mit Kennzahlen, Maßnahmen und Roadmap-Vorschlägen.</span>
          </li>
        </ul>
      </article>
    </li>

  </ul>
</section>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebPage",
      "@id": "https://example.com/ueber-fusion3/#webpage",
      "url": "https://example.com/ueber-fusion3/",
      "name": "Über Fusion3 — Design, 3D & Web",
      "inLanguage": "de",
      "isPartOf": {
        "@type": "WebSite",
        "@id": "https://example.com/#website",
        "url": "https://example.com/"
      },
      "description": "Wir verbinden Design, 3D und Web – für Marken, die in Erinnerung bleiben. Kreativität trifft Technologie. Wirkung trifft Tempo.",
      "primaryImageOfPage": {
        "@type": "ImageObject",
        "url": "https://example.com/assets/og/ueber-fusion3.jpg"
      },
      "mainEntity": { "@id": "https://example.com/ueber-fusion3/#mission-team-vision" }
    },
    {
      "@type": "ItemList",
      "@id": "https://example.com/ueber-fusion3/#mission-team-vision",
      "name": "Mission, Team & Vision",
      "inLanguage": "de",
      "itemListOrder": "http://schema.org/ItemListOrderAscending",
      "numberOfItems": 3,
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "item": {
            "@type": "WebPageElement",
            "@id": "https://example.com/ueber-fusion3/#aether-mission",
            "url": "https://example.com/ueber-fusion3/#aether-mission",
            "name": "Unsere Mission",
            "description": "Design, Code & 3D als Einheit — Balance, Erlebnis und skalierbare Systeme."
          }
        },
        {
          "@type": "ListItem",
          "position": 2,
          "item": {
            "@type": "WebPageElement",
            "@id": "https://example.com/ueber-fusion3/#aether-crew",
            "url": "https://example.com/ueber-fusion3/#aether-crew",
            "name": "Unser Team",
            "description": "Interdisziplinär, agil und erfahren — Designer, Entwickler & 3D-Artists als Produktteam."
          }
        },
        {
          "@type": "ListItem",
          "position": 3,
          "item": {
            "@type": "WebPageElement",
            "@id": "https://example.com/ueber-fusion3/#aether-vision",
            "url": "https://example.com/ueber-fusion3/#aether-vision",
            "name": "Unsere Vision",
            "description": "Zukunftsorientiertes Design mit Wirkung — Emotion, Technologie und Nachhaltigkeit."
          }
        }
      ]
    }
  ]
}
</script>





<section id="design-study" class="aurora-sheet" data-theme="auto">
  <!-- Titel mit Varianten -->
  <h2 class="aurora-title">
    <span class="title-full">Webdesign für MMBurgers – Geschmack, der klickt</span>
    <span class="title-t">Webdesign für MMBurgers</span>
    <span class="title-short">MMBurgers – Webdesign</span>
  </h2>

  <p class="aurora-subtitle" id="design-study-sub" aria-live="polite">
    <!-- Mobile -->
    <span class="subtitle-snippet">
      Frische Burger. Schnelles UX. Klarer Look.
    </span>

    <!-- Tablet -->
    <span class="subtitle-t">
      Ein appetitliches Webdesign für MMBurgers – starke Bilder, klare Navigation
      und eine Bestellung, die in Sekunden startet.
    </span>

    <!-- Desktop -->
    <span class="subtitle-full">
      Für <strong>MMBurgers</strong> entsteht eine Website, die Hunger macht:
      schnelle Ladezeiten, große Produktbilder und ein Bestellfluss ohne Umwege – 
      vom ersten Klick bis zum Checkout. Alles on-brand, performant und leicht zu pflegen.
    </span>
  </p>

  <!-- Desktop/Tablet -->
  <div class="ds-top ds-hide-on-mobile">
    <!-- Video Card -->
    <article class="ds-preview-card" aria-label="MMBurgers Website Vorschau">
      <div class="ds-preview-wrap">
        <video class="ds-preview-video"
               src="./3DSlideShow/vid2.mp4"
               autoplay
               muted
               loop
               playsinline
               preload="auto"
               title="MMBurgers Webdesign Preview"></video>
      </div>
    </article>

    <!-- Teaser-Karte mit Tablet-Variante im Titel -->
    <article class="aether-card ds-teaser-card" aria-labelledby="study-teaser">
      <h3 id="study-teaser">
        <span class="teaser-title-full">Appetit anregen. Bestellungen vereinfachen.</span>
        <span class="teaser-title-t">Appetit & einfache Bestellung.</span>
      </h3>
      <ul class="delta-list" role="list">
        <li><span class="lead">Fokus</span><span class="copy">Markenauftritt &amp; Conversion</span></li>
        <li><span class="lead">Effizienz</span><span class="copy">Schnelle Iterationen &amp; Live-Previews</span></li>
        <li><span class="lead">Impact</span><span class="copy">Mehr Online-Bestellungen &amp; Stammkundschaft</span></li>
      </ul>
    </article>
  </div>

  <!-- Info Row (Benefits) -->
  <div class="ds-info-row ds-hide-on-mobile">
    <article class="aether-card aether-card--orange">
      <h3>Mehr Bestellungen</h3>
      <ul class="delta-list">
        <li><span class="lead">Express-Start</span><span class="copy">Kickoff → klickbarer Prototyp in 3–5 Tagen</span></li>
        <li><span class="lead">Hohe Taktung</span><span class="copy">Iterationen in Stunden statt Tagen</span></li>
        <li><span class="lead">Max. Performance</span><span class="copy">Core Web Vitals im grünen Bereich</span></li>
      </ul>
    </article>

    <article class="aether-card aether-card--navy">
      <h3>Reibungsloser Prozess</h3>
      <ul class="delta-list">
        <li><span class="lead">Klare Struktur</span><span class="copy">Sitemap, Menü &amp; Bestellwege auf einen Blick</span></li>
        <li><span class="lead">Live-Previews</span><span class="copy">Feedback in Echtzeit – direkt im Browser</span></li>
        <li><span class="lead">Transparenz</span><span class="copy">Fixpreise, klare Pakete, keine Überraschungen</span></li>
      </ul>
    </article>

    <article class="aether-card aether-card--violet">
      <h3>Launch-ready Assets</h3>
      <ul class="delta-list">
        <li><span class="lead">CMS &amp; Menü</span><span class="copy">Einfache Pflege von Speisen, Preisen &amp; Aktionen</span></li>
        <li><span class="lead">Alle Kanäle</span><span class="copy">Optimiert für Web, App &amp; Lieferdienste</span></li>
        <li><span class="lead">On-Brand QA</span><span class="copy">Typo, Farben &amp; Bildstil sauber geprüft</span></li>
      </ul>
    </article>
  </div>

  <!-- Mobile -->
  <article class="ds-mobile-card" aria-labelledby="mobile-study-title">
    <div class="ds-mobile-preview-wrap">
      <video class="ds-mobile-preview-video"
             src="./3DSlideShow/vid2.mp4"
             autoplay
             muted
             loop
             playsinline
             preload="auto"
             title="MMBurgers Webdesign (mobil)"></video>
    </div>
    <div class="ds-mobile-body">
      <h3 id="mobile-study-title">MMBurgers – frisch auf die Hand</h3>
      <p class="t-snippet ds-mobile-text">
        Knackiges Webdesign mit Appetit-Faktor: große Produktbilder, 
        schnelle Bestellung, klare Öffnungszeiten &amp; Standorte.
      </p>
    </div>
  </article>

  <!-- CTA direkt unter dem Inhalt -->
  <div class="ds-cta">
    <a href="#menu" class="btn-cta" aria-label="Speisekarte von MMBurgers ansehen">Speisekarte ansehen</a>
  </div>
</section>






<!-- =============================================
     Kontakt + Video (gleich hohe Karten) + Testimonials
     – 6-Step Wizard-Form (Formspree) + Success-Screen
     ============================================= -->
<section class="kontakt-testimonial-section" id="kontakt">
  <div class="kontakt-testimonial-wrapper">

    <!-- === Kontaktkarte === -->
    <div class="kontakt-area">
      <h2 class="section-title">Lass uns loslegen!</h2>
      <p class="kontakt-subline">
        Eine starke Idee verdient ein starkes digitales Erlebnis.
      </p>

      <!-- === Formular (Wizard) === -->
      <form action="https://formspree.io/f/xqapdvaq" method="POST" class="kontakt-form" id="kontaktForm" novalidate>

        <!-- STEP 1: Leistungswahl -->
        <fieldset class="form-step active" data-step="1" aria-labelledby="step1Title">
          <legend id="step1Title" class="sr-only">Leistungswahl</legend>
          <p class="copy step1-copy">Wofür interessierst du dich?</p>

          <div class="grid-choices" role="radiogroup" aria-label="Leistung wählen">
            <label class="choice" tabindex="0">
              <input type="radio" name="service" value="Webdesign" data-toggle="web" />
              <span class="title">Kostenloses Wireframe</span>
              <small>0€, innerhalb von 24h!</small>
            </label>

          </div>
        </fieldset>

        <!-- STEP 2: Material & Styleguide -->
        <fieldset class="form-step" data-step="2" aria-labelledby="step2Title">
          <legend id="step2Title" class="sr-only">Material & Styleguide</legend>

          <!-- Web -->
          <div class="service-block" data-service="web">
            <label class="select-row">
              <span class="website-label">Material (Texte / Bilder / Logo)</span>
              <select name="web_material">
                <option value="">Bitte wählen</option>
                <option value="alles">Alles vorhanden</option>
                <option value="teilweise">Teilweise vorhanden</option>
                <option value="nichts">Bitte komplett erstellen</option>
              </select>
            </label>

            <label class="select-row">
              <span class="website-label">Styleguide / CI vorhanden?</span>
              <select name="web_styleguide">
                <option value="">Bitte wählen</option>
                <option value="ja">Ja</option>
                <option value="nein">Nein</option>
              </select>
            </label>
          </div>

          <!-- 3D -->
          <div class="service-block" data-service="d3">
       <label class="select-row">
              <span class="website-label">3D-Daten / Modelle vorhanden?</span>
              <select name="d3_daten">
                <option value="">Bitte wählen</option>
                <option value="vorhanden">Ja, vorhanden</option>
                <option value="modellierung_noetig">Nein, bitte modellieren</option>
              </select>
            </label>
          </div>

          <!-- Grafik -->
          <div class="service-block" data-service="gfx">
            <label class="select-row">
              <span class="website-label">Branding / Styleguide vorhanden?</span>
              <select name="gfx_styleguide">
                <option value="">Bitte wählen</option>
                <option value="ja">Ja</option>
                <option value="nein">Nein</option>
              </select>
            </label>

            <label class="select-row">
              <span class="website-label">Text- / Bildmaterial</span>
              <select name="gfx_material">
                <option value="">Bitte wählen</option>
                <option value="alles">Alles vorhanden</option>
                <option value="teilweise">Teilweise</option>
                <option value="nichts">Bitte erstellen</option>
              </select>
            </label>
          </div>
        </fieldset>

        <!-- STEP 3: Projektspezifikationen -->
        <fieldset class="form-step" data-step="3" aria-labelledby="step3Title">
          <legend id="step3Title" class="sr-only">Projektspezifikationen</legend>

          <!-- Web -->
          <div class="service-block" data-service="web">
            <label class="select-row">
              <span class="website-label">Website-Typ</span>
              <select name="web_typ">
                <option value="">Bitte wählen</option>
                <option value="unternehmensseite">Unternehmensseite</option>
                <option value="portfolio">Portfolio</option>
                <option value="shop">Online-Shop</option>
                <option value="landingpage">Landingpage</option>
                <option value="sonstiges">Sonstiges</option>
              </select>
            </label>

            <fieldset class="checkbox-group tags" aria-label="Besondere Schwerpunkte">
              <legend class="checkbox-legend">Besondere Schwerpunkte</legend>
              <label class="pill"><input type="checkbox" name="web_prios[]" value="Ladegeschwindigkeit" /><span>Ladegeschwindigkeit</span></label>
              <label class="pill"><input type="checkbox" name="web_prios[]" value="Responsiveness" /><span>Responsiveness</span></label>
              <label class="pill"><input type="checkbox" name="web_prios[]" value="SEO" /><span>SEO</span></label>
              <label class="pill"><input type="checkbox" name="web_prios[]" value="Benutzerfreundlichkeit" /><span>Benutzerfreundlichkeit</span></label>
              <label class="pill"><input type="checkbox" name="web_prios[]" value="Designqualität" /><span>Designqualität</span></label>
            </fieldset>
          </div>

          <!-- 3D -->
          <div class="service-block" data-service="d3">
            <label class="select-row">
              <span class="website-label">Was soll entstehen?</span>
              <select name="d3_typ">
                <option value="">Bitte wählen</option>
                <option value="rendering">Rendering</option>
                <option value="animation">Animation</option>
                <option value="produktvisualisierung">Produktvisualisierung</option>
                <option value="architekturvisualisierung">Architekturvisualisierung</option>
                <option value="sonstiges">Sonstiges</option>
              </select>
            </label>

            <label class="select-row">
              <span class="website-label">Verwendungszweck</span>
              <select name="d3_use">
                <option value="">Bitte wählen</option>
                <option value="marketing">Marketing / Werbung</option>
                <option value="praesentation">Präsentation</option>
                <option value="shop">Online-Shop</option>
                <option value="print">Print</option>
              </select>
            </label>
          </div>

          <!-- Grafik -->
          <div class="service-block" data-service="gfx">
            <label class="select-row">
              <span class="website-label">Design-Typ</span>
              <select name="gfx_typ">
                <option value="">Bitte wählen</option>
                <option value="logo">Logo</option>
                <option value="visitenkarte">Visitenkarte</option>
                <option value="flyer_poster">Flyer / Poster</option>
                <option value="styleguide">Styleguide</option>
                <option value="sonstiges">Sonstiges</option>
              </select>
            </label>

            <fieldset class="checkbox-group tags" aria-label="Prioritäten Grafikdesign">
              <legend class="checkbox-legend">Besondere Schwerpunkte</legend>
              <label class="pill"><input type="checkbox" name="gfx_prios[]" value="Brand-Konsistenz" /><span>Brand-Konsistenz</span></label>
              <label class="pill"><input type="checkbox" name="gfx_prios[]" value="Typografie" /><span>Typografie</span></label>
              <label class="pill"><input type="checkbox" name="gfx_prios[]" value="Druckvorbereitung" /><span>Druckvorbereitung</span></label>
              <label class="pill"><input type="checkbox" name="gfx_prios[]" value="Illustration" /><span>Illustration</span></label>
              <label class="pill"><input type="checkbox" name="gfx_prios[]" value="Schnelle Umsetzung" /><span>Schnelle Umsetzung</span></label>
            </fieldset>
          </div>
        </fieldset>

        <!-- STEP 4: Zeit & Budget -->
        <fieldset class="form-step" data-step="4" aria-labelledby="step4Title">
          <legend id="step4Title" class="sr-only">Zeit & Budget</legend>

          <label class="input-row">
            <span class="website-label">Deadline / Zeitraum</span>
            <input type="text" name="deadline" placeholder="z. B. bis 15. November oder Q4" />
          </label>

          <label class="input-row">
            <span class="website-label">Budgetrahmen (optional)</span>
            <input type="text" name="budget" placeholder="z. B. 3 000–6 000 €" />
          </label>
        </fieldset>

        <!-- STEP 5: Kontaktdaten -->
        <fieldset class="form-step" data-step="5" aria-labelledby="step5Title">
          <legend id="step5Title" class="sr-only">Kontaktdaten</legend>

          <input type="hidden" name="_subject" id="autoSubject" />
          <textarea class="sr-only" name="summary_plain" id="summaryPlain" aria-hidden="true"></textarea>
          <input type="hidden" name="selected_service" id="selectedService" />

          <div class="contact-grid">
            <div class="field span-6">
              <label for="name" class="req">Name</label>
              <input id="name" type="text" name="name" placeholder="Dein Name" autocomplete="name" required />
            </div>

            <div class="field span-6">
              <label for="email" class="req">E-Mail</label>
              <input id="email" type="email" name="email" placeholder="dein@mail.de" autocomplete="email" required />
            </div>

            <div class="field span-6">
              <label for="phone">Telefon (optional)</label>
              <input id="phone" type="tel" name="phone" placeholder="z. B. +49 151 12345678" autocomplete="tel" />
            </div>

            <div class="field span-12">
              <label for="message" class="req">Nachricht</label>
              <textarea id="message" name="message" rows="6" placeholder="Kurz dein Projekt / Ziel beschreiben …" minlength="5" required></textarea>
            </div>

            <p class="req-note">* Pflichtfelder</p>
          </div>

          <p class="legal-hint">
            Deine Angaben werden über <strong>Formspree</strong> zur Beantwortung deiner Anfrage verarbeitet.
            Mehr unter <a href="/datenschutz.html" target="_blank" rel="noopener">Datenschutz</a>.
          </p>
        </fieldset>

        <!-- STEP 6: Erfolg -->
        <fieldset class="form-step" data-step="6" aria-labelledby="step6Title">
          <legend id="step6Title" class="sr-only">Abschluss</legend>
          <div class="success-card" role="status" aria-live="polite">
            <h3 class="success-title">Geschafft! 🎉</h3>
            <p class="success-copy">Vielen Dank für deine Anfrage. <br>Wir melden uns in Kürze bei dir.</p>
            <p class="success-sub">Du wirst gleich automatisch zum Start zurückgeführt …</p>
            <button type="button" class="success-btn" disabled>✅ Anfrage gesendet</button>
          </div>
        </fieldset>

        <!-- === Fortschritt === -->
        <div class="stepper" aria-label="Fortschritt" role="progressbar" aria-valuemin="1" aria-valuemax="6" aria-valuenow="1">
          <div class="stepper-header"><span id="stepLabel">Schritt 1 / 6</span></div>
          <div class="stepper-track"><div class="stepper-fill" id="stepperFill" style="width:0%"></div></div>
        </div>

        <!-- === Navigation === -->
        <div class="wizard-nav" id="wizardNav">
          <button type="button" class="nav-btn prev" id="prevBtn" disabled>Zurück</button>
          <button type="button" class="nav-btn next" id="nextBtn" disabled>Weiter</button>
          <button type="submit" class="kontakt-btn submit" id="submitBtn" hidden>Senden!</button>
        </div>
      </form>
    </div>

    <!-- === Video-Karte === -->
    <div class="video-area" aria-label="Einblick in Prozess, Tools & Zusammenarbeit">
      <div class="video-card">
        <video class="video-media" autoplay loop muted playsinline preload="auto">
          <source src="./indexFotoSlideShow/kartenvideo.mp4" type="video/mp4">
          Dein Browser unterstützt das Video-Tag nicht.
        </video>
      </div>
    </div>

    <!-- === Testimonials === -->
    <div class="testimonial-area">
      <testimonial-slider></testimonial-slider>
    </div>
  </div>
</section>

<script>
(function () {
  const form = document.getElementById('kontaktForm');
  if (!form) return;

  /* =========================
     Cache DOM
  ========================== */
  const allSteps  = Array.from(form.querySelectorAll('.form-step'));
  const stepper   = form.querySelector('.stepper');
  const stepLabel = document.getElementById('stepLabel');
  const stepFill  = document.getElementById('stepperFill');
  const prevBtn   = document.getElementById('prevBtn');
  const nextBtn   = document.getElementById('nextBtn');
  const submitBtn = document.getElementById('submitBtn');

  // Success-Card DOM
  const successFieldset = allSteps.find(s => s.dataset.step === '6');
  const successCard     = successFieldset?.querySelector('.success-card');
  const successBtn      = successFieldset?.querySelector('.success-btn');
  const successSub      = successFieldset?.querySelector('.success-sub');

  /* =========================
     Live Status (a11y)
  ========================== */
  let statusBox = form.querySelector('[data-status]');
  if (!statusBox) {
    statusBox = document.createElement('div');
    statusBox.setAttribute('data-status','');
    statusBox.setAttribute('role','status');
    statusBox.setAttribute('aria-live','polite');
    statusBox.style.cssText = 'margin:.5rem 0 .25rem;font-weight:700;text-align:center;';
    form.insertBefore(statusBox, form.firstChild);
  }
  const setStatus = (msg, tone='')=>{
    statusBox.textContent = msg || '';
    statusBox.style.color =
      tone==='error' ? '#b00020' :
      tone==='ok'    ? '#0a7f2e' :
      tone==='warn'  ? '#a15c00' : 'inherit';
  };

  /* =========================
     Hidden Fields / Honeypot
  ========================== */
  ensureHidden({ id:'autoSubject',     name:'_subject',         tag:'input'    });
  ensureHidden({ id:'summaryPlain',    name:'summary_plain',    tag:'textarea' });
  ensureHidden({ id:'selectedService', name:'selected_service', tag:'input'    });
  ensureHidden({ id:'honeypot',        name:'_gotcha',          tag:'input'    });
  ensureHidden({ id:'metaRef',         name:'_referrer',        tag:'input'    }).value = location.href;
  ensureHidden({ id:'metaUA',          name:'_userAgent',       tag:'input'    }).value = navigator.userAgent;
  ensureHidden({ id:'metaOrigin',      name:'_origin',          tag:'input'    }).value = location.origin;

  function ensureHidden({id,name,tag='input'}) {
    let el = form.querySelector('#'+id);
    if (!el) {
      el = document.createElement(tag);
      el.id = id; el.name = name;
      if (tag==='input') el.type = 'hidden';
      el.className = 'sr-only'; el.setAttribute('aria-hidden','true');
      form.appendChild(el);
    } else if (el.name !== name) {
      el.name = name;
    }
    return el;
  }

  /* =========================
     Helpers
  ========================== */
  const q  = (sel,root=form)=>root.querySelector(sel);
  const qa = (sel,root=form)=>Array.from(root.querySelectorAll(sel));
  const trim = s => (s||'').toString().trim();

  function collectStepData(stepEl) {
    const data = {};
    stepEl.querySelectorAll('input, select, textarea').forEach(el=>{
      if (el.disabled || el.closest('[hidden]')) return;
      if (el.type === 'checkbox') {
        if (!data[el.name]) data[el.name] = [];
        if (el.checked) data[el.name].push(el.value);
      } else if (el.type === 'radio') {
        if (el.checked) data[el.name] = el.value;
      } else if (el.tagName === 'SELECT') {
        if (el.value) data[el.name] = el.value;
      } else {
        const v = trim(el.value);
        if (v) data[el.name] = v;
      }
    });
    return data;
  }
  function hasVisibleControls(stepEl){
    const controls = Array.from(stepEl.querySelectorAll('input,select,textarea'));
    return controls.some(el => !el.disabled && !el.closest('[hidden]'));
  }
  function getApplicableSteps(){
    const base = allSteps.filter(s => hasVisibleControls(s) && s.dataset.step !== '6');
    const success = allSteps.find(s => s.dataset.step === '6');
    return form.classList.contains('is-success') && success ? [...base, success] : base;
  }
  function getCurrentIndex(){ return Math.max(0, getApplicableSteps().indexOf(currentStepEl)); }
  function clampIndex(i){ const st = getApplicableSteps(); return Math.min(Math.max(i,0), st.length-1); }

  function isContactStep(stepEl){
    if (!stepEl) return false;
    if (stepEl.dataset.step === '5') return true;
    const hasName = stepEl.querySelector('input[name="name"]');
    const hasMail = stepEl.querySelector('input[name="email"]');
    const hasMsg  = stepEl.querySelector('textarea[name="message"]');
    return !!(hasName || hasMail || hasMsg);
  }

  /* =========================
     UI / Progress
  ========================== */
  function updateChoiceUI(){
    form.querySelectorAll('.grid-choices .choice').forEach(label=>{
      const rb = label.querySelector('input[type="radio"]');
      label.classList.toggle('selected', !!(rb && rb.checked));
    });
    const any = form.querySelector('input[name="service"]:checked');
    if(currentStepEl === allSteps[0]) nextBtn.disabled = !any;
    setProgress(getCurrentIndex());
  }

  function updatePillUI(){
    form.querySelectorAll('.pill').forEach(lbl=>{
      const cb = lbl.querySelector('input[type="checkbox"]');
      lbl.classList.toggle('selected', !!(cb && cb.checked));
    });
  }

  function syncServiceBlocks(){
    const sel = form.querySelector('input[name="service"]:checked');
    const key = sel ? sel.dataset.toggle : null;
    ['web','d3','gfx'].forEach(k=>{
      form.querySelectorAll(`.service-block[data-service="${k}"]`).forEach(block=>{
        const vis = key === k;
        block.hidden = !vis;
        block.querySelectorAll('input,select,textarea').forEach(el=>{
          el.disabled = !vis;
          if(!vis){
            if(el.type==='checkbox'||el.type==='radio') el.checked=false;
            else if(el.tagName==='SELECT') el.selectedIndex=0;
            else el.value='';
          }
        });
      });
    });
    // nach dem Umschalten neu bewerten (grün hinterlegen)
    updatePillUI();
  }

  function setProgress(idx){
    const steps = getApplicableSteps();
    let pct = 0;
    if(idx === 0){
      pct = form.querySelector('input[name="service"]:checked') ? 12 : 0;
    } else {
      pct = Math.min(100, Math.round((idx / (steps.length - 1)) * 100));
    }
    if (stepFill) stepFill.style.width = pct + '%';
    stepper?.setAttribute('aria-valuenow', String(idx + 1));
    if (stepLabel) stepLabel.textContent = `Schritt ${idx + 1}/${steps.length}`;
  }

  function enhanceSubmitBtn() {
    if (!submitBtn || submitBtn.dataset.enhanced === '1') return;
    submitBtn.dataset.enhanced = '1';
    if (!submitBtn.textContent.trim()) submitBtn.textContent = 'Jetzt Anfrage senden';
  }

  /* =========================
     Navigation
  ========================== */
  let currentStepEl = allSteps[0];

  function showStepByIndex(idx){
    const steps = getApplicableSteps();
    if(!steps.length) return;
    const targetIdx = clampIndex(idx);
    const targetEl  = steps[targetIdx];

    allSteps.forEach(s => s.classList.remove('active'));
    targetEl.classList.add('active');
    currentStepEl = targetEl;

    const isSuccess = targetEl.dataset.step === '6';

    if (isSuccess) {
      form.classList.add('is-success');

      prevBtn.hidden = true;
      nextBtn.hidden = true;
      submitBtn.hidden = true;

      const step1 = allSteps.find(s => s.dataset.step === '1');
      const h = step1 ? step1.scrollHeight : 320;
      targetEl.style.setProperty('--step6-minh', h + 'px');

      // 💡 Restart-Button immer neu, immer klickbar
      const oldBtn = successFieldset.querySelector('.success-btn');
      if (oldBtn) {
        const freshBtn = oldBtn.cloneNode(true);
        oldBtn.parentNode.replaceChild(freshBtn, oldBtn);
        freshBtn.disabled = false;
        freshBtn.textContent = 'Neu starten';
        freshBtn.setAttribute('aria-label','Wizard neu starten');
        freshBtn.style.color = '#fff';
        freshBtn.addEventListener('click', handleRestart);
      }

      if (successSub) {
        successSub.textContent = 'Du kannst jetzt neu starten und die Schritte erneut durchlaufen.';
        successSub.style.color = '#fff';
      }

    } else {
      form.classList.remove('is-success');
      prevBtn.hidden = false;
      const onContact = isContactStep(targetEl);
      nextBtn.hidden   = onContact;
      submitBtn.hidden = !onContact;
      if (onContact) enhanceSubmitBtn();
      prevBtn.disabled = targetIdx === 0;
      nextBtn.disabled = targetEl === allSteps[0] && !form.querySelector('input[name="service"]:checked');
    }

    // sicherstellen, dass Pills korrekt eingefärbt bleiben
    updatePillUI();

    setProgress(targetIdx);
    const first = targetEl.querySelector('input:not([disabled]),select:not([disabled]),textarea:not([disabled])');
    first?.focus({preventScroll:true});
  }

  /* =========================
     Restart / Success Handling
  ========================== */
  function resetToStep1(scrollToStart = true){
    form.reset();
    form.classList.remove('is-success');
    allSteps.forEach(s => s.classList.remove('active'));
    const step1 = allSteps.find(s => s.dataset.step === '1') || allSteps[0];
    step1.classList.add('active');
    currentStepEl = step1;
    syncServiceBlocks();
    updateChoiceUI();
    updatePillUI();
    setProgress(0);
    toggleFormDisabled(false);
    setStatus('', '');
    if (scrollToStart) {
      step1.scrollIntoView({ behavior:'smooth', block:'start' });
      const first = step1.querySelector('input,select,textarea,button');
      first?.focus({ preventScroll:true });
    }
  }

  function handleRestart(e){
    if (e) { e.preventDefault(); e.stopPropagation(); }
    resetToStep1(true);
  }

  function showSuccessScreen(){
    const steps = getApplicableSteps();
    const successIdx = steps.findIndex(s => s.dataset.step === '6');
    if (successIdx >= 0) showStepByIndex(successIdx);
  }

  /* =========================
     Validierung / Markierung
  ========================== */
  function markInvalid(el, msg){
    el.classList.add('is-invalid');
    el.setAttribute('aria-invalid','true');
    if (!el.nextElementSibling || !el.nextElementSibling.matches('.field-error')) {
      const e = document.createElement('div');
      e.className = 'field-error';
      e.style.cssText = 'color:#b00020;font-weight:700;margin-top:.2rem;font-size:.9rem;';
      e.textContent = msg;
      el.insertAdjacentElement('afterend', e);
    } else el.nextElementSibling.textContent = msg;
  }
  function clearInvalids(){
    qa('.is-invalid', form).forEach(el=>{
      el.classList.remove('is-invalid'); el.removeAttribute('aria-invalid');
    });
    qa('.field-error', form).forEach(el=> el.remove());
  }
  function validEmail(s){ return /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(s); }
  function validateRequired(){
    clearInvalids();
    const name  = q('input[name="name"]');
    const email = q('input[name="email"]');
    const msg   = q('textarea[name="message"]');
    let ok = true;
    if (!trim(name?.value))               { markInvalid(name,'Bitte Namen angeben.'); ok=false; }
    if (!validEmail(trim(email?.value)))  { markInvalid(email,'Bitte gültige E-Mail angeben.'); ok=false; }
    if (trim(msg?.value).length < 5)      { markInvalid(msg,'Bitte kurz dein Projekt beschreiben.'); ok=false; }
    if (!ok) {
      const first = q('.is-invalid');
      first?.focus({preventScroll:true});
      setStatus('Bitte fehlende Angaben ergänzen.', 'warn');
    } else setStatus('', '');
    return ok;
  }

  /* =========================
     Submit Flow
  ========================== */
  let submitting = false;
  function toggleFormDisabled(disabled){
    qa('input,select,textarea,button', form).forEach(el=> el.disabled = disabled);
  }

  async function postWithTimeout(url, options={}, timeoutMs=12000) {
    const controller = new AbortController();
    const t = setTimeout(()=>controller.abort(), timeoutMs);
    try { return await fetch(url, { ...options, signal: controller.signal }); }
    finally { clearTimeout(t); }
  }

  form.addEventListener('submit', async function(e){
    e.preventDefault();
    if (submitting) return;

    if (!validateRequired()) return;

    const selectedServiceEl = q('input[name="service"]:checked');
    const selectedService   = selectedServiceEl ? selectedServiceEl.value : '';

    const summary = {};
    getApplicableSteps().forEach((step, i) => { summary[`step_${i+1}`] = collectStepData(step); });

    const lines = [];
    lines.push(`[Service] ${selectedService}`);
    lines.push(`[Kontakt]`);
    lines.push(`- Name: ${summary.step_5?.name || '-'}`);
    lines.push(`- E-Mail: ${summary.step_5?.email || '-'}`);
    if (summary.step_5?.message) lines.push(`- Nachricht: ${summary.step_5.message}`);
    const compiledPlain = lines.join('\n');

    q('#autoSubject').value     = `Projektanfrage: ${selectedService}`;
    q('#selectedService').value = selectedService;
    q('#summaryPlain').value    = compiledPlain;
    q('#honeypot').value        = '';

    const fd = new FormData(form);
    submitting = true;
    toggleFormDisabled(true);
    submitBtn.innerText = 'Senden …';
    setStatus('Sende Anfrage …');

    try {
      const res = await postWithTimeout(form.action, {
        method:'POST',
        body:fd,
        headers:{Accept:'application/json'}
      }, 12000);
      if (!res.ok) throw new Error(res.statusText);
      submitBtn.innerText = '✅ Anfrage gesendet!';
      setStatus('Danke! Wir melden uns in Kürze.', 'ok');
      form.classList.add('is-success');
      showSuccessScreen();
    } catch (err) {
      console.error(err);
      setStatus('Fehler beim Senden – bitte später erneut versuchen.', 'error');
      submitBtn.innerText = 'Fehler!';
      toggleFormDisabled(false);
    } finally {
      submitting = false;
    }
  });

  /* =========================
     Buttons & Choices
  ========================== */
  prevBtn.addEventListener('click', (e)=>{
    e.preventDefault();
    showStepByIndex(getCurrentIndex()-1);
  });
  nextBtn.addEventListener('click', ()=>{
    if (isContactStep(currentStepEl)) form.requestSubmit();
    else showStepByIndex(getCurrentIndex()+1);
  });

  // Klick auf Step-1-Karten (Service)
  form.addEventListener('click', (e)=>{
    const choice = e.target.closest('.choice');
    if(choice){
      const rb = choice.querySelector('input[type="radio"]');
      if(rb){
        setTimeout(()=>{
          form.classList.remove('is-success');
          updateChoiceUI();
          syncServiceBlocks();
          showStepByIndex(getCurrentIndex());
        },0);
      }
    }
    // Klick auf Pill-Labels (Schwerpunkte)
    const pill = e.target.closest('.pill');
    if (pill) {
      // Wait until checkbox toggled, then refresh UI
      setTimeout(updatePillUI, 0);
    }
  });

  // Änderungen an Service oder Pill-Checkboxen
  form.addEventListener('change', (e)=>{
    if(e.target && e.target.matches('input[name="service"]')){
      form.classList.remove('is-success');
      updateChoiceUI();
      syncServiceBlocks();
      showStepByIndex(getCurrentIndex());
      return;
    }
    if (e.target && (e.target.matches('.pill input[type="checkbox"]') || e.target.matches('input[data-pills]'))) {
      updatePillUI();
    }
  });

  /* =========================
     Init
  ========================== */
  function init(){
    form.classList.remove('is-success');
    syncServiceBlocks();
    updateChoiceUI();
    updatePillUI();
    showStepByIndex(0);
    setStatus('');
  }
  init();

})();
</script>
<script>
  // … dein bestehendes IIFE …

  // === Patch: Step 1 auf "Webdesign" beschränken + vorauswählen ===
  (function lockToWebdesign(){
    const form = document.getElementById('kontaktForm');
    if (!form) return;

    // 1) Vorauswählen
    const webRadio = form.querySelector('input[name="service"][value="Webdesign"]');
    if (webRadio) {
      webRadio.checked = true;
      webRadio.setAttribute('aria-checked','true');
    }

    // 2) Falls doch weitere Choices vorhanden wären -> entfernen
    const choices = Array.from(form.querySelectorAll('.grid-choices .choice'));
    choices.forEach(ch => {
      const rb = ch.querySelector('input[type="radio"][name="service"]');
      if (rb && rb.value !== 'Webdesign') ch.remove();
    });

    // 3) UI & Service-Blöcke syncen + Next aktivieren
    try {
      // diese Funktionen existieren in deinem Script:
      // updateChoiceUI(), syncServiceBlocks(), showStepByIndex()
      updateChoiceUI();
      syncServiceBlocks();
      // Step 2 wird aktiv, sobald der User "Weiter" drückt
      const nextBtn = form.querySelector('#nextBtn');
      if (nextBtn) nextBtn.disabled = false;
    } catch(e){}
  })();
</script>


<section id="warumwir">

<div class="container">
  <header class="intro">
    <h2 class="title">Wartung mit System, Support mit Tempo</h2>
    <p class="sub" aria-live="polite">
      <!-- Mobile -->
      <span class="snippet"><strong>Stabil. Sicher. Messbar.</strong> Updates, Monitoring, Backups.</span>
      <!-- Tablet -->
      <span class="t-snippet">Wir kombinieren Patch-Management, Härtung und Monitoring – planbar im Prozess, klar in der Kommunikation, zuverlässig im Betrieb.</span>
      <!-- Desktop -->
      <span class="full">Wir vereinen <strong>Updates &amp; Patches, Security-Hardening, Monitoring &amp; Backups</strong> zu einem proaktiven Betriebsmodell – mit SLAs, Reports und klaren Wartungsfenstern. Von Onboarding bis Incident-Response.</span>
    </p>
  </header>

  <div class="grid" aria-label="Unsere Stärken">
    <!-- Karte 1 -->
    <article class="card s1">
      <div class="card-inner">
        <h3>Sicherheit &amp; Aktualität zuerst</h3>
        <p class="leadcopy">
          <span class="snippet">Regelmäßig patchen, Risiken minimieren.</span>
          <span class="t-snippet">Staging-Tests, Canary-Releases &amp; Rollback – ohne Ausfälle.</span>
          <span class="full">Planmäßige Core-/Plugin-/Dependency-Updates, verifizierte Tests und dokumentierte Changes – für einen belastbaren, aktuellen Betrieb.</span>
        </p>
        <ul class="points">
          <li class="point">
            <span class="p-text">
              <span class="lead">Patch-Management</span>
              <span class="copy">
                <span class="snippet">Aktuell &amp; kontrolliert.</span>
                <span class="t-snippet">Wartungsfenster &amp; Freigaben.</span>
                <span class="full">Staging, Regressionstests und Freigabeprozess mit sauberem Change-Log und Rückfallebene.</span>
              </span>
            </span>
          </li>
          <li class="point">
            <span class="p-text">
              <span class="lead">Härtung &amp; Compliance</span>
              <span class="copy">
                <span class="snippet">Angriffsfläche senken.</span>
                <span class="t-snippet">CSP, Rate Limits, Rechte.</span>
                <span class="full">Security-Header, Rechte-/Rollenmodell, CVE-Checks &amp; Protokollierung nach Best Practices.</span>
              </span>
            </span>
          </li>
          <li class="point">
            <span class="p-text">
              <span class="lead">Backups &amp; Recovery</span>
              <span class="copy">
                <span class="snippet">Im Fall der Fälle bereit.</span>
                <span class="t-snippet">Versioniert &amp; getestet.</span>
                <span class="full">Tägliche und On-Demand-Backups, Geo-Redundanz, regelmäßige Restore-Tests und Runbooks.</span>
              </span>
            </span>
          </li>
        </ul>
      </div>
    </article>

    <!-- Karte 2 -->
    <article class="card s2">
      <div class="card-inner">
        <h3>Prozessklarheit &amp; Reaktionszeit</h3>
        <p class="leadcopy">
          <span class="snippet">Planbar. Transparent. Verlässlich.</span>
          <span class="t-snippet">SLA-Zeiten, klare Prioritäten &amp; definierte Wartungsfenster.</span>
          <span class="full">Strukturierte Abläufe von Ticket bis Lösung – mit Dokumentation, Übergaben und klarer Kommunikation.</span>
        </p>
        <ul class="points">
          <li class="point">
            <span class="p-text"><span class="lead">Wartungsfenster</span>
              <span class="copy">
                <span class="snippet">Ohne Überraschungen.</span>
                <span class="t-snippet">Vorab angekündigt.</span>
                <span class="full">Geplante Zeitfenster für Updates inkl. Downtime-Hinweisen und Stakeholder-Info.</span>
              </span>
            </span>
          </li>
          <li class="point">
            <span class="p-text"><span class="lead">Dokumentation &amp; Handover</span>
              <span class="copy">
                <span class="snippet">Alles nachvollziehbar.</span>
                <span class="t-snippet">Tickets, Changelogs, Runbooks.</span>
                <span class="full">Vollständige Protokolle, klare Verantwortlichkeiten und Übergaben an interne/ externe Teams.</span>
              </span>
            </span>
          </li>
          <li class="point">
            <span class="p-text"><span class="lead">SLA-Reaktionszeit</span>
              <span class="copy">
                <span class="snippet">Schnell zur Lösung.</span>
                <span class="t-snippet">Prioritäten P1–P3.</span>
                <span class="full">Definierte Reaktions- und Lösungszeiten je Schweregrad – mit Eskalationspfad.</span>
              </span>
            </span>
          </li>
        </ul>

        <figure class="card-media" aria-hidden="true">
          <img src="./indexFotoSlideShow/2.webp" alt="" loading="lazy" decoding="async">
        </figure>
      </div>
    </article>

    <!-- Karte 3 -->
    <article class="card s3">
      <div class="card-inner">
        <h3>Transparenz &amp; Wirkung</h3>
        <p class="leadcopy">
          <span class="snippet">Daten statt Bauchgefühl.</span>
          <span class="t-snippet">Monitoring, Reports &amp; klare Empfehlungen.</span>
          <span class="full">Wir messen Uptime, Performance und Fehlerbilder – und leiten daraus messbare Verbesserungen ab.</span>
        </p>
        <ul class="points">
          <li class="point">
            <span class="p-text"><span class="lead">Monitoring-Kanäle</span>
              <span class="copy">
                <span class="snippet">Alles im Blick.</span>
                <span class="t-snippet">Uptime, Logs, Errors.</span>
                <span class="full">APM, Log-Analyse, Error-Tracking und CWV – zentral ausgewertet.</span>
              </span>
            </span>
          </li>
          <li class="point">
            <span class="p-text"><span class="lead">Performance &amp; CWV</span>
              <span class="copy">
                <span class="snippet">Schnell &amp; stabil.</span>
                <span class="t-snippet">Ladezeiten optimiert.</span>
                <span class="full">Core Web Vitals, Caching &amp; Bildpipelines kontinuierlich verbessert.</span>
              </span>
            </span>
          </li>
          <li class="point">
            <span class="p-text"><span class="lead">Skalierung &amp; Automatisierung</span>
              <span class="copy">
                <span class="snippet">Wächst mit.</span>
                <span class="t-snippet">Pipelines &amp; Alerts.</span>
                <span class="full">CI/CD, automatisierte Tests, Alerting-Regeln und Roadmap für nächste Ausbaustufen.</span>
              </span>
            </span>
          </li>
        </ul>
      </div>
    </article>
  </div>

  <div class="badges">
    <span class="pill"><span class="ok"></span> SLA-geführt</span>
    <span class="pill"><span class="ok"></span> Monitoring &amp; Alerts</span>
    <span class="pill"><span class="ok"></span> Backups verifiziert</span>
  </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/gsap@3/dist/ScrollTrigger.min.js"></script>
  <script>
    (function(){
      const root = document.getElementById('warumwir');
      if (!window.gsap) return;
      gsap.registerPlugin(ScrollTrigger);
      const typoEls = root.querySelectorAll('.card .leadcopy, .p-text .lead, .p-text .copy');
      typoEls.forEach((el) => {
        gsap.from(el, {
          autoAlpha: 0,
          y: 14,
          duration: 0.6,
          ease: "power2.out",
          scrollTrigger: {
            trigger: el,
            start: "top 85%",
            toggleActions: "play none none reverse"
          }
        });
      });
    })();
  </script>
</section>



<section class="lyra-vault" id="lyra-faq">
  <h2 class="lyra-heading">Häufige Fragen</h2>

  <div class="lyra-console" role="search">
    <input
      type="text"
      id="lyraSearch"
      placeholder="Nach Stichwort suchen …"
      aria-label="FAQ durchsuchen"
      enterkeyhint="search"
      autocomplete="off"
    >
    <div class="lyra-nav">
      <button id="lyraPrev" type="button" aria-label="Vorheriges Ergebnis">
        <i data-feather="chevron-left" aria-hidden="true"></i>
      </button>
      <span id="lyraIndex" aria-live="polite">0 / 0</span>
      <button id="lyraNext" type="button" aria-label="Nächstes Ergebnis">
        <i data-feather="chevron-right" aria-hidden="true"></i>
      </button>
    </div>
  </div>

  <div class="lyra-grid">

    <!-- Card 1 -->
    <div class="lyra-card">
      <button class="lyra-toggle" aria-expanded="false">
        <span>Ablauf &amp;<br> Laufzeiten</span>
        <i class="lyra-icon" data-feather="arrow-down-circle" aria-hidden="true"></i>
      </button>
      <div class="lyra-drop">
        <p><strong>Wie startet die Wartung?</strong><br>Onboarding mit System-Audit (Sicherheit, Performance, Backups, Monitoring) und Wartungsplan inkl. Prioritäten (P1–P3).</p>
        <p><strong>Wie lange dauert das Onboarding?</strong><br>Je nach Setup ca. 3–10&nbsp;Werktage. Quick Wins (z.&nbsp;B. kritische Patches) sofort.</p>
        <p><strong>Wie sieht der Regelbetrieb aus?</strong><br>Monatliche Updates, laufendes Monitoring &amp; Reports; geplante Wartungsfenster für größere Änderungen.</p>
      </div>
    </div>

    <!-- Card 2 -->
    <div class="lyra-card">
      <button class="lyra-toggle" aria-expanded="false">
        <span>Kosten &amp;<br> Pakete</span>
        <i class="lyra-icon" data-feather="arrow-down-circle" aria-hidden="true"></i>
      </button>
      <div class="lyra-drop">
        <p><strong>Wovon hängen die Kosten ab?</strong><br>Systemkomplexität, Anzahl der Umgebungen, Updatefrequenz, SLA-Level, Monitoring- und Backup-Tiefe.</p>
        <p><strong>Gibt es Pauschalen?</strong><br>Ja – z.&nbsp;B. Basic (monatliche Updates), Pro (inkl. Monitoring &amp; Backups), Enterprise (inkl. SLA &amp; On-Call). Individuelle Pläne möglich.</p>
        <p><strong>Wie erfolgt die Abrechnung?</strong><br>Monatlich im Voraus; projektbezogene Sonderleistungen (z.&nbsp;B. Migrationsarbeiten) nach Angebot.</p>
      </div>
    </div>

    <!-- Card 3 -->
    <div class="lyra-card">
      <button class="lyra-toggle" aria-expanded="false">
        <span>Tools &amp;<br> Zusammenarbeit</span>
        <i class="lyra-icon" data-feather="arrow-down-circle" aria-hidden="true"></i>
      </button>
      <div class="lyra-drop">
        <p><strong>Welche Tools nutzt ihr?</strong><br>Ticketing (Jira/Asana), Monitoring/APM, Uptime-Checks, Log-Analyse, Error-Tracking; Doku/Runbooks in Confluence/Notion.</p>
        <p><strong>Wie melde ich ein Anliegen?</strong><br>Über das Ticketsystem mit Priorität (P1–P3) oder bei Notfällen via On-Call-Hotline (Enterprise).</p>
        <p><strong>Wer ist mein Ansprechpartner?</strong><br>Ein festes Betreuungsteam inkl. technischer Lead – klare Eskalationspfade über SLA.</p>
      </div>
    </div>

    <!-- Card 4 -->
    <div class="lyra-card">
      <button class="lyra-toggle" aria-expanded="false">
        <span>Prozess &amp;<br> SLAs</span>
        <i class="lyra-icon" data-feather="arrow-down-circle" aria-hidden="true"></i>
      </button>
      <div class="lyra-drop">
        <p><strong>Welche Reaktionszeiten gelten?</strong><br>Je nach Paket: z.&nbsp;B. P1 binnen 1–2&nbsp;Std., P2 am gleichen Tag, P3 innerhalb 2–3&nbsp;Werktagen.</p>
        <p><strong>Wie laufen Updates ab?</strong><br>Erst Staging mit Tests, dann Live per Canary/Rollout; dokumentiert im Changelog, mit Rollback-Plan.</p>
        <p><strong>Wie behaltet ihr Risiken im Blick?</strong><br>Security-Hardening (CSP, Rate Limits), CVE-Checks, regelmäßige Audits und Restore-Tests.</p>
      </div>
    </div>

    <!-- Card 5 -->
    <div class="lyra-card">
      <button class="lyra-toggle" aria-expanded="false">
        <span>Betrieb &amp;<br> Weiterentwicklung</span>
        <i class="lyra-icon" data-feather="arrow-down-circle" aria-hidden="true"></i>
      </button>
      <div class="lyra-drop">
        <p><strong>Gibt es laufende Optimierungen?</strong><br>Ja – Performance-Tuning (CWV, Caching, Bildpipeline), SEO-Tech-Checks und Fehlerprävention durch Telemetrie.</p>
        <p><strong>Können Features ergänzt werden?</strong><br>Klar – wir planen Erweiterungen in separaten Tickets/Sprints und sichern sie über Staging ab.</p>
        <p><strong>Welche Reports erhalte ich?</strong><br>Monatsberichte (Uptime, Performance, Incidents, Änderungen) und quartalsweise Roadmap-Reviews.</p>
      </div>
    </div>

    <!-- Card 6 -->
    <div class="lyra-card">
      <button class="lyra-toggle" aria-expanded="false">
        <span>Rechtliches &amp;<br> Datenschutz</span>
        <i class="lyra-icon" data-feather="arrow-down-circle" aria-hidden="true"></i>
      </button>
      <div class="lyra-drop">
        <p><strong>Ist alles DSGVO-konform?</strong><br>Ja – inkl. Auftragsverarbeitung, Protokollierung, Consent-Mechanik und datensparsamer Messung.</p>
        <p><strong>Wie geht ihr mit Zugängen um?</strong><br>Least-Privilege, 2FA, getrennte Rollen; Zugriffe werden dokumentiert und regelmäßig geprüft.</p>
        <p><strong>Wem gehören die Daten &amp; Backups?</strong><br>Die Daten gehören euch. Backups liegen nach Wunsch in eurer Infrastruktur oder getrennt in eurer Region.</p>
      </div>
    </div>

  </div>
</section>

<script src="https://unpkg.com/feather-icons" defer></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  if (window.feather) feather.replace();

  const vault = document.getElementById("lyra-faq");
  const cards = [...document.querySelectorAll(".lyra-card")];
  const input = document.getElementById("lyraSearch");
  const prev = document.getElementById("lyraPrev");
  const next = document.getElementById("lyraNext");
  const indexLbl = document.getElementById("lyraIndex");

  const prefersReduced = matchMedia("(prefers-reduced-motion: reduce)").matches;
  const smoothOpts = prefersReduced ? {behavior:"auto"} : {behavior:"smooth"};

  // ---- Utilities ------------------------------------------------------------
  const normalize = (s) => s.normalize("NFD").replace(/\p{Diacritic}/gu, "").toLowerCase();

  let matches = [], current = 0, debounceTo = null;

  function setButtonsEnabled(enabled){
    [prev, next].forEach(b=>{
      b.disabled = !enabled;
      b.setAttribute("aria-disabled", String(!enabled));
      b.style.opacity = enabled ? "" : ".6";
      b.style.cursor  = enabled ? "pointer" : "not-allowed";
    });
  }

  function closeAll(){
    cards.forEach(c=>{
      const b = c.querySelector(".lyra-toggle");
      const d = c.querySelector(".lyra-drop");
      b.setAttribute("aria-expanded","false");
      d.style.maxHeight = null;
    });
  }

  function removeMarks(){
    vault.querySelectorAll("mark").forEach(m=>{
      const t = document.createTextNode(m.textContent);
      m.replaceWith(t);
    });
  }

  // Escape RegExp Sonderzeichen
  const escapeRegExp = (str) => str.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');

  function highlight(node, keyword){
    const terms = keyword.split(/\s+/).filter(Boolean).map(escapeRegExp);
    if (!terms.length) return;
    const rx = new RegExp("(" + terms.join("|") + ")", "gi");

    if (node.nodeType === 3){
      const span = document.createElement("span");
      span.innerHTML = node.nodeValue.replace(rx, "<mark>$1</mark>");
      node.parentNode.replaceChild(span, node);
    } else if (node.nodeType === 1 && node.childNodes && !["SCRIPT","STYLE","INPUT","BUTTON"].includes(node.tagName)){
      [...node.childNodes].forEach(child => highlight(child, keyword));
    }
  }

  function scrollToCard(c){
    const y = c.getBoundingClientRect().top + window.scrollY - 80;
    window.scrollTo({ top: y, ...smoothOpts });
  }

  function openCard(c){
    const b = c.querySelector(".lyra-toggle");
    const d = c.querySelector(".lyra-drop");
    b.setAttribute("aria-expanded","true");
    d.style.maxHeight = d.scrollHeight + "px";
  }

  function recalcOpenHeights(){
    cards.forEach(c=>{
      const b = c.querySelector(".lyra-toggle");
      const d = c.querySelector(".lyra-drop");
      if (b.getAttribute("aria-expanded")==="true"){
        d.style.maxHeight = d.scrollHeight + "px";
      }
    });
  }

  function updateIndex(){
    indexLbl.textContent = matches.length ? `${current+1} / ${matches.length}` : "0 / 0";
    setButtonsEnabled(matches.length > 0);
  }

  // Precompute normalisierte Inhalte für schnelle Suche
  const cardCache = cards.map(c => ({
    el: c,
    textNorm: normalize(c.innerText)
  }));

  function doSearch(keyword){
    const qRaw = keyword.trim();
    const q = normalize(qRaw);
    removeMarks();
    closeAll();
    matches = [];
    if (!q){ updateIndex(); return; }

    cardCache.forEach(({el, textNorm})=>{
      if (textNorm.includes(q)){
        matches.push(el);
        // Markiere realen DOM-Text (nicht den Cache)
        highlight(el, qRaw);
      }
    });

    current = 0;
    if (matches.length){
      openCard(matches[0]);
      scrollToCard(matches[0]);
    }
    updateIndex();
  }

  // ---- Events ---------------------------------------------------------------
  input.addEventListener("input", e=>{
    clearTimeout(debounceTo);
    debounceTo = setTimeout(()=>doSearch(e.target.value), 140);
  });

  prev.addEventListener("click", ()=>{
    if (!matches.length) return;
    current = (current - 1 + matches.length) % matches.length;
    closeAll(); openCard(matches[current]); scrollToCard(matches[current]); updateIndex();
  });

  next.addEventListener("click", ()=>{
    if (!matches.length) return;
    current = (current + 1) % matches.length;
    closeAll(); openCard(matches[current]); scrollToCard(matches[current]); updateIndex();
  });

  // Akkordeon: IDs + ARIA + Click
  cards.forEach((c, i)=>{
    const btn  = c.querySelector(".lyra-toggle");
    const drop = c.querySelector(".lyra-drop");
    const btnId  = `lyra-toggle-${i+1}`;
    const dropId = `lyra-drop-${i+1}`;
    btn.id = btnId;
    drop.id = dropId;

    // bessere Roles/Labels
    drop.setAttribute("role","region");
    drop.setAttribute("aria-labelledby", btnId);
    btn.setAttribute("aria-controls", dropId);

    btn.addEventListener("click", ()=>{
      const isOpen = btn.getAttribute("aria-expanded")==="true";
      btn.setAttribute("aria-expanded", isOpen ? "false" : "true");
      drop.style.maxHeight = isOpen ? null : drop.scrollHeight + "px";
    });

    // ResizeObserver: offene Panels passen sich automatisch an
    const ro = new ResizeObserver(()=>{
      if (btn.getAttribute("aria-expanded")==="true"){
        drop.style.maxHeight = drop.scrollHeight + "px";
      }
    });
    ro.observe(drop);
  });

  // Tastatur-Navigation (Akkordeon-Header)
  const toggles = cards.map(c=>c.querySelector(".lyra-toggle"));
  function focusToggle(idx){
    if (idx<0) idx = 0;
    if (idx>=toggles.length) idx = toggles.length-1;
    toggles[idx].focus();
  }
  toggles.forEach((btn, idx)=>{
    btn.addEventListener("keydown", (e)=>{
      switch(e.key){
        case "ArrowDown": e.preventDefault(); focusToggle(idx+1); break;
        case "ArrowUp":   e.preventDefault(); focusToggle(idx-1); break;
        case "Home":      e.preventDefault(); focusToggle(0);     break;
        case "End":       e.preventDefault(); focusToggle(toggles.length-1); break;
        case "Enter":
        case " ":
          e.preventDefault();
          btn.click();
          break;
      }
    });
  });

  // Shortcut: "/" fokussiert Suche
  document.addEventListener("keydown", (e)=>{
    if (e.key === "/" && document.activeElement !== input){
      e.preventDefault();
      input.focus();
    }
  });

  // Recalc on resize (responsive)
  let resizeTo;
  window.addEventListener("resize", ()=>{
    clearTimeout(resizeTo);
    resizeTo = setTimeout(recalcOpenHeights, 120);
  });

  // Initial
  setButtonsEnabled(false);
  updateIndex();
});
</script>



<section class="angled-image-section" aria-labelledby="angled-image-heading">
  <h2 id="angled-image-heading" class="visually-hidden">Modernes Webdesign – diagonale Bildsektion</h2>

  <figure class="angled-image-wrapper">
    <picture>
      <source srcset="./WebdesignPic/webgerade.webp" type="image/webp">
      <img
        src="./WebdesignPic/webgerade.webp"
        alt="Beispiel eines modernen Webdesign-Layouts, leicht diagonal ausgerichtet"
        width="1920"
        height="1080"
        loading="lazy"
        decoding="async"
        style="aspect-ratio:16/9">
    </picture>
  </figure>
</section>




<footer itemscope itemtype="https://schema.org/Organization" class="footer-clean">
  <!-- In Microdata ist <meta itemprop> im Body erlaubt und ersetzt hier das unzulässige <link>. -->
  <meta itemprop="url" content="https://www.fusion3.de">

  <div class="fc-container">

    <!-- Head: Brand & Claim + CTA -->
    <section class="fc-head" aria-labelledby="fc-head-title">
      <h2 id="fc-head-title" class="sr-only">Markenbereich</h2>
      <div class="fc-brand">
        <!-- Optional: Logo als Link zur Startseite -->
        <a class="fc-logo" href="/" itemprop="name">Fusion³</a>
        <p class="fc-claim">UX &amp; Webdesign – Nutzerzentriert. Visuell stark. Technisch fundiert.</p>
      </div>
      <div class="fc-cta">
        <a class="fc-btn" href="mailto:hello@fusion3.de" aria-label="Projekt anfragen per E-Mail">Projekt anfragen</a>
      </div>
    </section>

    <!-- Grid -->
    <nav class="fc-grid" aria-labelledby="fc-nav-title">
      <h2 id="fc-nav-title" class="sr-only">Footer-Navigation</h2>

      <div class="fc-col">
        <h3 class="fc-col-title" id="fc-services">Leistungen</h3>
        <ul class="fc-links" aria-labelledby="fc-services">
          <li><a href="/ux-audit.html">UX-Audit</a></li>
          <li><a href="/webdesign.html">Webdesign</a></li>
          <li><a href="/prototyping.html">Prototyping</a></li>
          <li><a href="/design-system.html">Design-Systeme</a></li>
        </ul>
      </div>

      <div class="fc-col">
        <h3 class="fc-col-title" id="fc-resources">Ressourcen</h3>
        <ul class="fc-links" aria-labelledby="fc-resources">
          <li><a href="/cases.html">Case Studies</a></li>
          <li><a href="/blog.html">Insights &amp; Blog</a></li>
          <li><a href="/faq.html">FAQ</a></li>
          <li><a href="/kontakt.html">Termin buchen</a></li>
        </ul>
      </div>

      <div class="fc-col">
        <h3 class="fc-col-title" id="fc-legal">Rechtliches</h3>
        <ul class="fc-links" aria-labelledby="fc-legal">
          <li><a href="/impressum.html">Impressum</a></li>
          <li><a href="/datenschutz.html">Datenschutzerklärung</a></li>
          <li><a href="/cookies.html">Cookie-Hinweis</a></li>
        </ul>
      </div>

      <div class="fc-col">
        <h3 class="fc-col-title" id="fc-contact">Kontakt</h3>
        <ul class="fc-links" aria-labelledby="fc-contact">
          <li><a href="mailto:hello@fusion3.de" itemprop="email">hello@fusion3.de</a></li>
          <li><a href="tel:+491234567890" itemprop="telephone">+49&nbsp;123&nbsp;4567890</a></li>
          <li>
            <address itemprop="address" itemscope itemtype="https://schema.org/PostalAddress" class="fc-address">
              <span itemprop="addressLocality">Berlin</span>, <span itemprop="addressCountry">Deutschland</span>
            </address>
          </li>
        </ul>

        <!-- Socials jetzt als echte Liste (keine role=list / role=listitem nötig) -->
        <h3 id="fc-socials-title" class="sr-only">Social Media</h3>
        <ul class="fc-socials" aria-labelledby="fc-socials-title">
          <li>
            <a class="fc-social" href="mailto:hello@fusion3.de" aria-label="E-Mail" itemprop="sameAs">
              <span class="sr-only">E-Mail</span>
              <img src="./FooterIcons/Gmail.png" alt="" loading="lazy" decoding="async" width="20" height="20">
            </a>
          </li>
          <li>
            <a class="fc-social fc-li" href="https://www.linkedin.com/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" itemprop="sameAs">
              <span class="sr-only">LinkedIn</span>
              <img src="./FooterIcons/LinkedIn.png" alt="" loading="lazy" decoding="async" width="20" height="20">
            </a>
          </li>
          <li>
            <a class="fc-social fc-wa" href="https://wa.me/491234567890" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp" itemprop="sameAs">
              <span class="sr-only">WhatsApp</span>
              <img src="./FooterIcons/Whatsapp.svg" alt="" loading="lazy" decoding="async" width="20" height="20">
            </a>
          </li>
          <li>
            <a class="fc-social fc-ig" href="https://www.instagram.com/" target="_blank" rel="noopener noreferrer" aria-label="Instagram" itemprop="sameAs">
              <span class="sr-only">Instagram</span>
              <img src="./FooterIcons/instagram.jpg" alt="" loading="lazy" decoding="async" width="20" height="20">
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <!-- Bottom -->
    <div class="fc-legal" aria-labelledby="fc-legal-title">
      <h3 id="fc-legal-title" class="sr-only">Rechtliches &amp; Hinweise</h3>
      <p>© <time id="currentYear" datetime="2025">2025</time> <span class="nowrap">Fusion³</span> · DSGVO-konform &amp; barrierearm entwickelt.</p>
    </div>

  </div>
</footer>

<script>
  (function(){
    var el = document.getElementById('currentYear');
    if (el) el.textContent = new Date().getFullYear();
  })();
</script>

</body>
</html>