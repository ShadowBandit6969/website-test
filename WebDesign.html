<!DOCTYPE html>
<html lang="de" data-theme="auto">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fusion³ – UX & Webdesign Studio</title>
  <meta name="description" content="Fusion³ ist dein Partner für UX-Design, Webdesign & Prototyping. Wir gestalten digitale Erlebnisse mit Substanz.">

  <!-- Google Fonts Optimierung -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap">
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet" media="all" onload="this.media='all'">
  <noscript>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">
  </noscript>

  <!-- Lokale Fonts optimieren -->
  <link rel="preload" as="style" href="./fonts/fonts.css">
  <link rel="stylesheet" href="./fonts/fonts.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="./fonts/fonts.css"></noscript>

  <!-- Optional Scripts -->
  <!-- Module: ohne defer (Module laden implizit deferred) -->
  <script type="module" src="https://unpkg.com/feather-icons"></script>
  <!-- Legacy Fallback -->
  <script nomodule src="feather-icons.legacy.js"></script>
  <!-- Normales Script kann defer tragen -->
  <script src="https://unpkg.com/scrollreveal" defer></script>

  <!-- Analytics Beispiel -->
  <script>
    (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "t1mbvlhldj");
  </script>

  <!-- ===============================
       GLOBAL CSS
       =============================== -->
  <style>
    :root{
      --accent:#0062ff;
      --text:#111;
      --muted:#555;
      --border:rgba(0,0,0,.08);
      --surface:#ffffff;
      --container-width: min(95vw, 1340px);
      --header-pad-y: .75rem;
      --radius: 12px;
      --primary: #ff4d00;
      --secondary: #ff9900;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --text:#f5f7fa;
        --muted:#b7bec7;
        --border:rgba(255,255,255,.12);
        --surface:#000000;
      }
    }
    :root[data-theme="dark"]{
      --text:#f5f7fa;
      --muted:#b7bec7;
      --border:rgba(255,255,255,.12);
      --surface:#000000;
    }

    *{margin:0;padding:0;box-sizing:border-box}
    html,body{
      font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial,sans-serif;
      background:#fff;
      color:var(--text);
      scroll-behavior:smooth;
    }
    :root[data-theme="dark"] body{ background:#000 }

    a{color:inherit;text-decoration:none;transition:color .2s ease,opacity .2s ease}
    h1,h2,h3,h4{font-weight:900;letter-spacing:-.02em}
    .container{max-width:var(--container-width);margin:0 auto;padding:5rem 2rem}
    .section-title{font-size:clamp(2rem, 1.2rem + 2.4vw, 2.8rem);text-align:center;margin-bottom:.5rem;color:var(--text);font-weight:700;letter-spacing:-.02em}

    /* Skip-Link */
    .skip-link{ position:absolute; left:-9999px; top:auto; z-index:1000; }
    .skip-link:focus{
      left:auto; top:.5rem; inset-inline-start:.5rem;
      background:#000; color:#fff; padding:.5rem .75rem; border-radius:.5rem;
    }

    /* ===== HERO (Video) ===== */
    main{ display:block; }

    .hero-video-wrapper {
      position: relative;
      min-height: 100svh;
      width: 100%;
      overflow: hidden;
      display: flex; align-items: center; justify-content: center;
      text-align: center;
      background: #000 url('./IndexM/PC.webp') center/cover no-repeat;
    }
    @media (max-width: 1024px) { .hero-video-wrapper { background-image: url('./IndexM/Tablet.webp'); } }
    @media (max-width: 480px)  { .hero-video-wrapper { background-image: url('./IndexM/handy.webp'); } }

    .hero-video-content{
      position: relative; z-index: 2;
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      padding: 3rem 2rem; max-width: 800px; width: 100%;
      color:#fff; text-align:center; border-radius:12px;
      background-color:#2a2a2a63; margin-top:-5rem;
    }
    .hero-video-content::before{ content:none !important; }

    .video-background{
      position:absolute; inset:0; width:100%; height:100%;
      object-fit:cover; object-position:center; z-index:0; pointer-events:none;
    }

    .hero-video-content h1{ font-size:3.8rem; line-height:1.1; margin-bottom:1.2rem; color:#fff; }
    .hero-video-content p { font-size:1.3rem; line-height:1.6; color:rgba(255,255,255,.85); }

    .cta-btn{
      background: linear-gradient(to right, var(--primary), var(--secondary));
      color:#fff; font-weight:700; padding:1rem 2.2rem; border-radius:12px;
      font-size:1rem; text-transform:uppercase; margin-top:2rem; border:none;
      box-shadow:0 0 12px rgba(255,102,0,.3), 0 0 24px rgba(255,102,0,.25);
      transition:all .3s ease; display:inline-block; text-decoration:none;
    }
    .cta-btn:hover,.cta-btn:focus{
      background:var(--secondary); color:#000; transform:scale(1.03);
      cursor:pointer; outline:2px solid var(--primary); outline-offset:4px;
    }

    .video-fallback-image{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; object-position:center; z-index:0; pointer-events:none; }

    @media (max-width:1024px){
      .hero-video-content{ padding:2rem; }
      .hero-video-content h1{ font-size:3rem; }
      .hero-video-content p { font-size:1.1rem; line-height:1.5; }
    }
    @media (max-width:768px){
      .hero-video-content{ padding:1.5rem; margin-top:0; }
      .hero-video-content h1{ font-size:2.2rem; line-height:1.2; }
      .hero-video-content p { font-size:1rem; line-height:1.4; }
      .cta-btn{ font-size:.95rem; padding:.75rem 1.5rem; width:auto; max-width:90%; margin:1.5rem auto 0; }
    }
    @media (max-width:480px){
      .hero-video-content h1{ font-size:1.6rem; line-height:1.3; }
      .hero-video-content p { font-size:.95rem; }
    }
    @media (max-width:425px){
      .cta-btn{ width:100%; max-width:180px; font-size:.9rem; padding:.9rem 1.2rem; text-align:center; margin-inline:auto; }
    }

    @media (min-width:1025px){
      .video-background{
        top:50%; left:50%; width:auto; height:110%;
        transform:translate(-50%,-50%); object-fit:contain;
      }
    }
    @media (min-width:832px) and (max-width:1024px) and (max-height:832px){
      .video-background{
        top:50%; left:50%; width:auto; height:110%;
        transform:translate(-50%,-50%); object-fit:contain;
      }
    }
  </style>

  <style>
    /* ===== Section Headings – Root Tokens ===== */
    :root{
      --sec-title-fs: clamp(2rem, 1.5rem + 2vw, 3rem);
      --sec-title-fw: 900;
      --sec-title-ls: -0.02em;
      --sec-title-mb: 0rem;
      --sec-title-color: var(--text-main, #1c1c1e);
      --sec-sub-fs: 1.1rem;
      --sec-sub-color: #666;
      --sec-sub-mb: 2rem;
      --sec-sub-lh: 1.5;
      --sec-sub-max: 65ch;
    }
    .section-title{
      font-size: var(--sec-title-fs);
      font-weight: var(--sec-title-fw);
      letter-spacing: var(--sec-title-ls);
      margin: 0 0 var(--sec-title-mb);
      color: var(--sec-title-color);
      text-align: center;
    }
    .section-subtitle{
      font-size: var(--sec-sub-fs);
      color: var(--sec-sub-color);
      margin: 0 0 var(--sec-sub-mb);
      line-height: var(--sec-sub-lh);
      max-width: var(--sec-sub-max);
      margin-inline: auto;
      text-align: center;
    }
    :is(.persona-title){ all:unset; display:block; }
    :is(.persona-subline){ all:unset; display:block; }
    .persona-title{
      font-size: var(--sec-title-fs);
      font-weight: var(--sec-title-fw);
      letter-spacing: var(--sec-title-ls);
      margin: 0 0 var(--sec-title-mb);
      color: var(--sec-title-color);
      text-align: center;
    }
    .persona-subline{
      font-size: var(--sec-sub-fs);
      color: var(--sec-sub-color);
      margin: 0 0 var(--sec-sub-mb);
      line-height: var(--sec-sub-lh);
      max-width: var(--sec-sub-max);
      margin-inline: auto;
      text-align: center;
    }
    :root[data-theme="dark"] .section-title,
    :root[data-theme="dark"] .persona-title{ color:#fff; }
    :root[data-theme="dark"] .section-subtitle,
    :root[data-theme="dark"] .persona-subline{ color:#fff; }
    @media (prefers-color-scheme: dark){
      :root[data-theme="auto"] .section-title,
      :root[data-theme="auto"] .persona-title{ color:#fff; }
      :root[data-theme="auto"] .section-subtitle,
      :root[data-theme="auto"] .persona-subline{ color:#fff; }
    }
  </style>

  <!-- Webflow/Normalize -->
  <meta name="generator" content="Webflow">
  <link href="css/denizs-dapper-site-2d192b.webflow.css" rel="stylesheet" type="text/css">
  
  <!-- Titelpage-spezifische Bild-Overrides (in den Head verschoben) -->
  <style>
    body[data-page="webdesign"] .hero-image-background {
      background-image: url("./images/hero-bg-sky_1hero-bg-sky.webp") !important;
    }
    body[data-page="webdesign"] .hero-image-foreground {
      background-image: url("./images/webdesign-fg.webp") !important;
    }
    @media (max-width: 1024px) {
      body[data-page="webdesign"] .hero-image-foreground {
        background-image: url("./images/webdesign-fg-tablet.webp") !important;
      }
    }
    @media (max-width: 480px) {
      body[data-page="webdesign"] .hero-image-foreground {
        background-image: url("./images/webdesign-fg-mobile.webp") !important;
      }
    }
  </style>
<link rel="stylesheet" href="css/lyraV.css" type="text/css">
<link rel="stylesheet" href="css/footer.css" type="text/css">
<link rel="stylesheet" href="css/angledimg.css" type="text/css">
<link rel="stylesheet" href="css/arbeitsproben.css" type="text/css">
<link rel="stylesheet" href="css/contact.css" type="text/css">
<link rel="stylesheet" href="css/ablauf.css" type="text/css">
<link rel="stylesheet" href="css/cosmosSuite.css" type="text/css">
<link rel="stylesheet" href="css/aurora.css" type="text/css">
<link rel="stylesheet" href="css/herolast.css" type="text/css">
<link rel="stylesheet" href="css/navbar.css" type="text/css">
<link rel="stylesheet" href="css/darkmodeLast.css" type="text/css">
<link rel="stylesheet" href="css/reviews.css" type="text/css">
<style>
/* --------------------------
   Lokale Bild-Overrides nur für webdesign.html
--------------------------- */
body[data-page="webdesign"] .hero-image-background {
  background-image: url("./images/hero-bg-sky_1hero-bg-sky.webp") !important;
}

body[data-page="webdesign"] .hero-image-foreground {
  background-image: url("./images/hintegrundweb.webp") !important;
}

/* Optional: Mobile- oder Tablet-Varianten */
@media (max-width: 1024px) {
  body[data-page="webdesign"] .hero-image-foreground {
    background-image: url("./images/webdesign-bg-tablet.webp") !important;
  }
}
@media (max-width: 480px) {
  body[data-page="webdesign"] .hero-image-foreground {
    background-image: url("./images/webdesign-bg-mobile.webp") !important;
  }
}

@media (min-width: 768px) {
  .hero-image-foreground {
    transform: translateY(10%);              /* dein bisheriger Versatz */
  }
}
@media (min-width: 1400px) {
  .hero-image-foreground {
    transform: translateY(15%);              /* dein bisheriger Versatz */
  }
}
@media (min-width: 1800px) {
  .hero-image-foreground {
    transform: translateY(15%);              /* dein bisheriger Versatz */
  }
}
@media (min-width: 2200px) {
  .hero-image-foreground {
    transform: translateY(7%);              /* dein bisheriger Versatz */
  }
}

  html, body {
    margin: 0;
    padding: 0;
    overflow-x: hidden;
    width: 100%;
  }

  .hero-section {
    padding: 0;
    margin: 0;
    width: 100%;
  }

  .hero-images-wrapper {
    position: relative;
    width: 100%;      /* statt 100vw, verhindert Scrollbar-Lücke links */
    min-height: 100vh;
    height: 100vh;
    overflow: hidden; /* falls Kinder minimal überstehen */
  }

  .hero-image-background,
  .hero-image-foreground {
    position: absolute;
    inset: 0;         /* top/right/bottom/left = 0 */
    width: 100%;
    max-width: none;
  }


  /* Nur Handys: Hintergrund minimal „herauszoomen“ */
@media (max-width: 767px) {
  .hero-image-foreground {
    background-position: center bottom;
    background-repeat: no-repeat;
    background-attachment: scroll;
    margin: 0 !important;                  /* falls woanders Mobile-Margins gesetzt sind */
        transform: translateY(17%);              /* dein bisheriger Versatz */
  }
}
</style>

<style>
/* === BASIS (umbenannt, mystisch) ===================================================== */
.aether-header{
  position:sticky; top:0; z-index:50;
  background:rgba(255,255,255,.9);
  border-bottom:1px solid var(--border);
/* padding mit safe-area-bottom */
padding: clamp(.75rem, 2vw, 1.5rem) clamp(1rem, 3vw, 2rem)
          max(1rem, env(safe-area-inset-bottom)) clamp(1rem, 3vw, 2rem);
/* oder nur bottom ergänzen */
padding-bottom: max(1rem, env(safe-area-inset-bottom));

  transition:box-shadow .2s ease, background-color .2s ease, padding .2s ease;
}
@supports(backdrop-filter: blur(8px)){
  .aether-header{ backdrop-filter:saturate(1.1) blur(8px); background:color-mix(in oklab, var(--surface) 88%, transparent); }
}
.aether-header.is-ascended{ box-shadow: 0 6px 24px rgba(0,0,0,.08); }

.aether-header__bar{
  max-width:var(--container-width);
  margin:0 auto;
  padding:var(--header-pad-y) clamp(6px,5vw,10px);
  display:grid;
  grid-template-columns:auto 1fr auto; /* Sigil | Nav | Actions */
  align-items:center;
  gap:1rem;
}

.sigil-mark{
  font-size:clamp(1.1rem, 2vw, 1.4rem);
  font-weight:900; letter-spacing:0.02em;
  color:var(--text);
  display:inline-flex; align-items:center; gap:.5rem;
  white-space:nowrap; text-decoration:none;
}

/* Actions */
.astral-actions{ display:inline-flex; align-items:center; gap:.5rem; }
.charm-cta{
  padding:.6rem .9rem; border-radius:var(--radius); font-weight:600;
  background:var(--primary); color:#fff; text-decoration:none; line-height:1;
  min-height:44px; display:inline-flex; align-items:center; justify-content:center;
}
/* CTA-Button global */
.charm-cta{ background: var(--primary) !important; }

/* Toggle (Burger/X) */
.portal-toggle{
  appearance:none; border:1px solid var(--border); background:var(--surface);
  border-radius:var(--radius); padding:.5rem .6rem; line-height:1; cursor:pointer;
  display:inline-flex; align-items:center; gap:.5rem; justify-self:end; min-width:44px; min-height:44px;
  color:var(--text);
}
.portal-toggle:focus-visible{outline:2px solid color-mix(in oklab, var(--text) 20%, transparent); outline-offset:2px}
.portal-toggle .icon{ width:22px; height:22px; }
.portal-toggle .icon-close{ display:none; }
.portal-toggle[aria-expanded="true"] .icon-burger{ display:none; }
.portal-toggle[aria-expanded="true"] .icon-close{ display:inline; }

/* NAV – Basis */
.astral-nav{ width:100%; }
.astral-nav__list{ list-style:none; padding:0; margin:0; }
.astral-item{ position:relative; border:0; }
.astral-link{
  display:block; text-decoration:none;
  font-weight:500; color:var(--muted);
  white-space:nowrap; text-align:center;
  padding:0.85rem 1rem; min-height:44px; line-height:44px;
  position:relative;
}
.astral-link:hover,
.astral-link:focus-visible{ color:var(--text); }
.astral-link[aria-current="page"],
.astral-link[data-active]{ color:var(--text); font-weight:600; }
.astral-link::after{
  content:""; position:absolute; left:10px; right:10px; bottom:6px;
  height:2px; background:currentColor; opacity:0; transform:scaleX(.6);
  transition:opacity .18s ease, transform .18s ease;
}
@media(hover:hover){
  .astral-link:hover::after,
  .astral-link:focus-visible::after,
  .astral-link[aria-current="page"]::after,
  .astral-link[data-active]::after{ opacity:.75; transform:scaleX(1); }
}

/* Mobile Menüs */
@media (max-width:479px){
  .astral-nav{
    display:flex; flex-direction:column;
    position:fixed; inset:var(--gate-height) 0 0;
    background:var(--surface);
    transform:translateY(-8px); opacity:0; pointer-events:none;
    transition:transform .18s ease, opacity .18s ease;
    height:calc(100dvh - var(--gate-height));
  }
  .astral-nav.is-awakened{ transform:translateY(0); opacity:1; pointer-events:auto; }
  .astral-nav__list{
    display:grid; grid-template-columns:1fr; gap:0;
    padding:.25rem clamp(16px,5vw,40px) .75rem;
    flex:1 1 auto; overflow:auto;
  }
  .astral-link{ padding:0.95rem 0; font-size:1rem; line-height:1.4; min-height:auto; }
  .astral-actions .charm-cta{ display:none; }
}
.night-veil{ position:fixed; inset:var(--gate-height) 0 0; background:rgba(0,0,0,.28); opacity:0; pointer-events:none; transition:opacity .18s ease; }
.night-veil.is-awakened{ opacity:1; pointer-events:auto; }

@media (min-width:480px) and (max-width:767px){
  .astral-nav{
    display:flex; flex-direction:column;
    position:fixed; inset:var(--gate-height) 0 0;
    background:var(--surface);
    transform:translateY(-8px); opacity:0; pointer-events:none;
    transition:transform .18s ease, opacity .18s ease;
    height:calc(100dvh - var(--gate-height));
  }
  .astral-nav.is-awakened{ transform:translateY(0); opacity:1; pointer-events:auto; }
  .astral-nav__list{
    display:flex; flex-direction:column; gap:0;
    padding:.5rem clamp(16px,6vw,48px) .75rem;
    flex:1 1 auto; overflow:auto;
  }
  .astral-link{ padding:.8rem 0; }
  .astral-actions .charm-cta{ display:none; }
}

/* Tablet & Desktop */
@media (min-width:768px){
  .portal-toggle{ display:none; }
  .astral-nav{ display:block; position:static; transform:none; opacity:1; pointer-events:auto; background:transparent; width:auto; height:auto; }
  .astral-nav__list{ display:flex; gap:0; padding:0; align-items:center; justify-content:center; overflow:visible; }
  .astral-item{ border:0; }
  .astral-link{ padding:.85rem 1.05rem; color:var(--muted); min-height:auto; line-height:normal; }
  .astral-actions{ display:inline-flex; }
}

/* Fokus-Stile */
.astral-link:focus-visible{ outline:2px solid color-mix(in oklab, currentColor 60%, transparent); outline-offset:3px; border-radius:8px; }

/* Scroll-Lock */
.nav-lock, .nav-lock body{ overflow:hidden; }

/* Mobile CTA Container */
.astral-nav__mobile-actions{ display:none; }
@media (max-width:767px){
  .astral-nav__mobile-actions{
    display:grid; grid-template-columns: 1fr; gap:.75rem;
    padding:.75rem clamp(16px,6vw,48px) 1rem; background:inherit;
    margin-top:auto; border-top:none !important;
  }
  .astral-nav__mobile-actions .charm-cta{ width:100%; min-height:44px; }
}

/* THEME scopes bleiben gleich (data-theme) */
:root:not([data-theme="dark"]) .astral-nav.is-awakened{ background:#fff; }
:root:not([data-theme="dark"]) .astral-link{ color:#111; }
:root:not([data-theme="dark"]) .astral-link[aria-current="page"],
:root:not([data-theme="dark"]) .astral-link[data-active]{ color:#000; }
:root:not([data-theme="dark"]) .portal-toggle{ color:#111; border-color:var(--border); background:#fff; }
[data-theme="dark"] .astral-nav.is-awakened{ background:#000; }
[data-theme="dark"] .astral-link{ color:#fff; }
[data-theme="dark"] .astral-link::after{ background:#fff; }
[data-theme="dark"] .astral-link[aria-current="page"],
[data-theme="dark"] .astral-link[data-active]{ color:#fff; }
[data-theme="dark"] .portal-toggle{ color:#fff; border-color:rgba(255,255,255,.25); background:#111; }
[data-theme="dark"] .night-veil.is-awakened{ background:rgba(0,0,0,.6); }

/* Kompaktere Abstände Mobile */
@media (max-width: 767px){
  .astral-nav__list{ padding: .25rem clamp(16px,5vw,40px) .5rem; }
  .astral-link{ padding: .5rem 0; line-height: 1.25; min-height: 40px; font-size: .98rem; }
  .astral-link::after{ bottom:4px; height:2px; opacity:.6; }
  .astral-item + .astral-item{ border-top:none !important; }
}
@media (max-width: 479px){
  .astral-nav__list{ padding:.2rem clamp(14px,5vw,36px) .45rem; }
  .astral-link{ padding:.45rem 0; font-size:.95rem; min-height:38px; }
}

/* Mobile Subnav Grundlayout */
@media (max-width: 767px){
  .astral-item{ display:block; position:relative; }
  .astral-item > .astral-link{ text-align:center !important; padding-right: 2.5rem; }
  .gatelet{
    position:absolute; right: clamp(16px,5vw,40px); top:50%; transform:translateY(-50%);
    appearance:none; border:0; background:transparent; padding:.25rem; line-height:1; cursor:pointer;
    display:inline-flex; align-items:center; justify-content:center;
    min-width:36px; min-height:36px; border-radius:8px; color:var(--muted);
  }
  .gatelet svg{ width:18px; height:18px; transition:transform .18s ease, color .18s ease; }
  .gatelet[aria-expanded="true"] svg{ transform:rotate(180deg); color:var(--text); }
  .underrealm{ list-style:none; padding:0; margin:.2rem 0 .4rem; }
  .astral-link--sub{
    text-align:left; padding:.35rem 0 .35rem 1rem;
    line-height:1.25; min-height:36px; font-size:.95rem;
    color: color-mix(in oklab, var(--muted) 90%, var(--text) 10%);
  }
  .astral-link--sub:hover, .astral-link--sub:focus-visible{ color:var(--text); }
}

/* Pill/Active im Mobile */
@media (max-width:767px){
  .astral-item{ display:grid; grid-template-columns: 1fr auto; align-items:center; border-bottom:1px solid color-mix(in oklab, var(--muted) 12%, transparent); }
  .astral-item:last-child{ border-bottom:0; }
  .astral-item > .astral-link{ text-align:left !important; padding: 0.85rem clamp(16px,6vw,24px); padding-right: 3.25rem; line-height:1.3; }
  .gatelet{ position:static; transform:none; margin-right: clamp(12px,5vw,24px); color: var(--muted); }
  .gatelet:hover{ color: var(--text); }
  .astral-link[aria-current="page"],
  .astral-link[data-active]{ background: color-mix(in oklab, var(--accent) 9%, transparent); color: var(--text); border-radius:12px; }
  .astral-link::after{ display:none; }
}

/* Subnav Kompaktheit + Einblendung */
@media (max-width:767px){
  .underrealm{ margin: .25rem 0 .6rem; padding-left: clamp(18px, 7vw, 28px); border-left: 2px solid color-mix(in oklab, var(--muted) 20%, transparent); }
  .astral-link--sub{ padding: .45rem 0; font-size: .96rem; color: color-mix(in oklab, var(--text) 70%, var(--muted) 30%); }
  .underrealm[hidden]{ display:block !important; height:0; overflow:hidden; opacity:0; }
  .underrealm:not([hidden]){ animation: subreveal .18s ease-out; }
  @keyframes subreveal { from{ opacity:0; height:0 } to{ opacity:1; height:auto } }
  .astral-link{ padding-top:.9rem; padding-bottom:.9rem; }
  .astral-nav__mobile-actions{
    position:sticky; bottom:0;
    padding: .85rem clamp(16px,6vw,24px) calc(.85rem + env(safe-area-inset-bottom));
    background: inherit; box-shadow: 0 -8px 24px rgba(0,0,0,.08);
  }
  .astral-nav__mobile-actions .charm-cta{ font-size:1rem; font-weight:700; border-radius: 12px; }
  .astral-item > .astral-link{ font-weight: 750; font-size: 1.08rem; letter-spacing: .1px; }
}
[data-theme="dark"] .astral-nav.is-awakened{ background:#000000; }
@media (max-width:767px){
  [data-theme="dark"] .astral-item{ border-bottom:1px solid rgba(255,255,255,.07); }
  [data-theme="dark"] .underrealm{ border-left-color: rgba(255,255,255,.12); }
}

/* Zusätzliche Feinheiten Mobile */
@media (max-width:767px){
  .underrealm{ margin: .15rem 0 .5rem; padding-left: clamp(16px,6vw,24px); border-left: 2px solid color-mix(in oklab, var(--muted) 22%, transparent); }
  .astral-link--sub{ padding: .4rem 0; font-size: .96rem; }
  .astral-item.is-awakened > .astral-link{ padding-bottom: .35rem; }
  .astral-item.is-awakened .underrealm{ margin-top: .1rem; }
}

/* CTA Effekte/States */
.charm-cta { text-rendering: optimizeLegibility; -webkit-font-smoothing: antialiased; }
@media (hover:hover){
  .charm-cta:hover{ transform: translateY(-1px); box-shadow: var(--cta-shadow-hover), inset 0 0 0 1px rgba(255,255,255,.08); }
  .charm-cta:active{ transform: translateY(0); box-shadow: var(--cta-shadow); }
}
.charm-cta:focus-visible{
  outline: none;
  box-shadow:
    0 0 0 3px color-mix(in oklab, var(--cta-focus) 70%, transparent),
    0 0 0 6px color-mix(in oklab, var(--cta-focus) 25%, transparent),
    var(--cta-shadow);
}
.charm-cta__icon{ width: 1.15em; height: 1.15em; flex: 0 0 auto; transform: translateX(0); transition: transform .18s ease; }
@media(hover:hover){ .charm-cta:hover .charm-cta__icon{ transform: translateX(2px); } }
@media (prefers-contrast: more){
  .charm-cta{ box-shadow: 0 0 0 2px color-mix(in oklab, #000 20%, var(--cta-bg)); }
  .charm-cta:focus-visible{ box-shadow: 0 0 0 3px #fff, 0 0 0 6px color-mix(in oklab, var(--cta-bg) 60%, #000 40%); }
}
[data-theme="dark"] .charm-cta{ --cta-shadow: 0 10px 24px rgba(0,0,0,.36); --cta-shadow-hover: 0 14px 34px rgba(0,0,0,.46); }
.charm-cta::before{
  content:""; position:absolute; inset:0; border-radius:inherit; z-index:0;
  background: radial-gradient(120% 140% at 0% 0%, rgba(255,255,255,.22), rgba(255,255,255,.08) 35%, transparent 60%);
  mix-blend-mode: soft-light; pointer-events:none; opacity:.95;
}
.charm-cta > *{ position:relative; z-index:1; }
.charm-cta .cta-ripple{
  position:absolute; inset:auto; border-radius:50%;
  pointer-events:none; transform: translate(-50%, -50%) scale(0);
  opacity:.5; filter:saturate(120%);
  background: radial-gradient(circle at center, rgba(255,255,255,.55), rgba(255,255,255,.22), rgba(255,255,255,0) 70%);
}
.charm-cta .cta-ripple.is-anim{ animation: ctaRipple .6s ease-out forwards; }
@keyframes ctaRipple{ to{ transform: translate(-50%, -50%) scale(20); opacity:0; } }
@media (prefers-reduced-motion: reduce){
  .charm-cta .cta-ripple{ display:none !important; }
  .charm-cta{ transition: box-shadow .01ms, transform .01ms; }
}
.charm-cta[aria-busy="true"]{ cursor: progress; filter: saturate(.9) brightness(.96); }
.charm-cta[aria-busy="true"] .charm-cta__labl{ opacity:.0; }
.charm-cta[aria-busy="true"] .charm-cta__icon{ opacity:0; }
.charm-cta[aria-busy="true"]::after{
  content:""; position:absolute; inset:0; display:block; margin:auto;
  width:1.25rem; height:1.25rem; border-radius:50%;
  border: 2px solid rgba(255,255,255,.55);
  border-top-color: rgba(255,255,255,0);
  animation: ctaSpin .9s linear infinite; z-index:2;
}
@keyframes ctaSpin{ to{ transform: rotate(360deg); } }
.charm-cta[aria-disabled="true"], .charm-cta.is-disabled{ opacity:.58; cursor:not-allowed; pointer-events:none; }
.charm-cta--lg{ padding: .9rem 1.1rem; font-size:1.05rem; }
.charm-cta--sm{ padding: .55rem .8rem; font-size:.92rem; }
.astral-actions .charm-cta{ white-space:nowrap; }

/* Header-Actions rechtsbündig + Reihenfolge */
.astral-actions{ justify-content:flex-end; gap:.5rem; }
.astral-actions .orb-toggle{ order:0; }
.astral-actions .charm-cta{ order:1; }

/* Mobile Subnav – enger */
@media (max-width:767px){
  .astral-item.is-awakened > .underrealm{ margin-top: -2rem !important; }
  .astral-item.is-awakened > .astral-link,
  .astral-item:has(.gatelet[aria-expanded="true"]) > .astral-link{ padding-bottom: .18rem !important; }
  .underrealm{ margin: .08rem 0 .38rem !important; padding-left: clamp(16px,6vw,24px); border-left: 2px solid color-mix(in oklab, var(--muted) 22%, transparent); }
  .astral-link--sub{ padding: .35rem 0 !important; }
  .astral-item.is-awakened{ border-bottom: 0 !important; }
}

/* Tablet kompakt */
@media (min-width:768px) and (max-width:1023px){
  .astral-nav__list{ flex-wrap: nowrap !important; justify-content: flex-start; gap: .25rem !important; overflow-x:auto; -webkit-overflow-scrolling:touch; scrollbar-width:none; }
  .astral-nav__list::-webkit-scrollbar{ display:none; }
  .astral-link{ padding:.56rem .68rem !important; font-size:.80rem !important; line-height:1.15 !important; }
  .aether-header__bar{ grid-template-columns: auto minmax(0,1fr) auto !important; gap:.5rem !important; }
  .sigil-mark{ flex-shrink:0 !important; white-space:nowrap !important; margin-right: clamp(8px,2vw,16px) !important; font-size: clamp(1.05rem, 1.6vw, 1.25rem) !important; line-height:1 !important; }
  .astral-nav{ min-width:0 !important; justify-self:end !important; margin-left: clamp(10px, 2.5vw, 28px) !important; }
  .gatelet{ display:none !important; }
  .astral-actions{ gap:.35rem !important; }
  .astral-actions .charm-cta{ font-size:.80rem !important; padding:.55rem .85rem !important; min-height:38px !important; border-radius:10px !important; margin:0 !important; white-space:nowrap !important; }
}

/* Desktop/Tablet Dropdown */
@media (min-width:768px){
  .gatelet{ display:inline-flex !important; appearance:none; border:0; background:transparent; cursor:pointer; padding:.25rem; line-height:1; color:var(--muted); }
  .gatelet svg{ width:16px; height:16px; transition:transform .18s ease, color .18s ease; }
  .gatelet[aria-expanded="true"] svg{ transform:rotate(180deg); color:var(--text); }

  .astral-item{ display:inline-flex; align-items:center; position:relative; }
  .astral-item > .astral-link{ padding-right:.25rem; }

  .underrealm{
    position:absolute; left:0; top:calc(100% + 8px);
    min-width: 240px; max-width:420px;
    padding:.5rem 0 !important;
    background: rgba(0,0,0,.9) !important; color:#fff;
    border-radius:12px; border:1px solid rgba(255,255,255,.10) !important;
    box-shadow:0 14px 34px rgba(0,0,0,.36);
    display:none; z-index:2000 !important;
  }
  .underrealm::before{
    content:""; position:absolute; top:-6px; left:14px; width:12px; height:12px;
    background: rgba(0,0,0,.9) !important;
    transform:rotate(45deg);
    border-left:1px solid rgba(255,255,255,.10) !important;
    border-top:1px solid rgba(255,255,255,.10) !important;
  }
  .underrealm li{ list-style:none; margin:0; }
  .underrealm li + li{ border-top:1px solid rgba(255,255,255,.12); }
  .astral-link--sub{
    display:block; text-align:left !important;
    padding:.6rem .9rem !important; margin:0; border-radius:0; color:#e9e9e9;
  }
  .astral-link--sub:hover, .astral-link--sub:focus-visible{ background: rgba(255,255,255,.08); color:#fff; }
  .astral-item.is-awakened > .underrealm{ display:block !important; }
  .astral-nav__list{ overflow: visible !important; }
}

/* Light-Mode Dropdown */
:root:not([data-theme="dark"]) .underrealm{
  background:#fff !important; color:#111 !important;
  border:1px solid rgba(0,0,0,.12) !important; box-shadow:0 14px 34px rgba(0,0,0,.14) !important;
}
:root:not([data-theme="dark"]) .underrealm::before{
  background:#fff !important;
  border-left:1px solid rgba(0,0,0,.12) !important;
  border-top:1px solid rgba(0,0,0,.12) !important;
}
:root:not([data-theme="dark"]) .astral-link--sub{ color:#111 !important; }
:root:not([data-theme="dark"]) .astral-link--sub:hover,
:root:not([data-theme="dark"]) .astral-link--sub:focus-visible{ background:rgba(0,0,0,.06) !important; color:#000 !important; }

/* Mobile Light Mode: Subnav ohne Box */
@media (max-width: 767px){
  :root:not([data-theme="dark"]) .underrealm{
    background: transparent !important; border: 0 !important; box-shadow: none !important; border-radius: 0 !important;
    padding: .08rem 0 .38rem clamp(16px,6vw,24px) !important;
  }
  :root:not([data-theme="dark"]) .underrealm::before{ display:none !important; }
  :root:not([data-theme="dark"]) .astral-link--sub{ color:#111 !important; }
  :root:not([data-theme="dark"]) .astral-link--sub:hover,
  :root:not([data-theme="dark"]) .astral-link--sub:focus-visible{
    background: rgba(0,0,0,.05) !important; color:#000 !important; border-radius:8px;
  }
}

/* XS Phones: Einrückungen & Abstände */
@media (max-width: 479px){
  .astral-item.is-awakened > .underrealm{ margin-top: 0.35rem !important; margin-bottom: 2.35rem !important; }
  .astral-item.is-awakened > .astral-link{ padding-bottom: .35rem !important; }
  .underrealm{ padding-left: clamp(16px, 6vw, 22px) !important; }
}

/* Brand größer auf Phones */
@media (max-width: 767px){
  .sigil-mark{ font-size: clamp(1.4rem, 6vw, 1.9rem) !important; line-height: 1.1; }
}

/* Mobile CTA unten ohne Box-Hintergrund */
@media (max-width: 767px){
  .astral-nav__mobile-actions{
    background: transparent !important; box-shadow: none !important; border-top: none !important; padding-top: 1rem;
  }
}

/* Mobile: Subnav nur beim offenen Punkt zeigen */
@media (max-width:767px){
  .astral-nav__list{ display:flex; flex-direction:column; }
  .underrealm{ display:none; }
  .astral-item.is-awakened > .underrealm{ display:block; }
}

/* === Aurora Typo-Feeling im Header/Nav (nur Schrift) ===================== */
.aether-header,
.astral-link,
.astral-link--sub,
.sigil-mark,
.charm-cta{
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
}
.sigil-mark{
  font-weight: 900 !important;
  letter-spacing: -0.02em !important;
}
.astral-link{
  font-weight: 750 !important;
  letter-spacing: 0.01em !important;
  line-height: 1.2 !important;
}
.astral-link--sub{
  font-weight: 650 !important;
  letter-spacing: 0.005em !important;
  line-height: 1.25 !important;
}

/* Balken/Shadow über Mobile-Menü entfernen, wenn Menü offen */
@media (max-width: 767px){
  .aether-header.portal-open{
    border-bottom: 0 !important;
    box-shadow: none !important;
    background: var(--surface) !important;
  }
}

/* === Header-Typo wie Lead-Text – voll responsive =================== */

/* Skalierung global steuerbar */
:root{ --nav-scale: 1; }

/* XS Phones (≤360px) -> minimal kleiner */
@media (max-width:360px){ :root{ --nav-scale:.92; } }

/* Small Phones (361–479px) */
@media (min-width:361px) and (max-width:479px){ :root{ --nav-scale:.96; } }

/* Phones / Phablets (480–767px) */
@media (min-width:480px) and (max-width:767px){ :root{ --nav-scale:.98; } }

/* Large Desktops (≥1200px) -> leicht größer */
@media (min-width:1200px){ :root{ --nav-scale:1.06; } }

/* Header als Container für feineres Tuning */
.aether-header__bar{ container-type:inline-size; }

/* Container-Query: wenn der Header sehr wenig Platz hat (z.B. viele Menüpunkte) */
@container (max-width:520px){
  .sigil-mark{ letter-spacing:-0.012em !important; }
  .astral-link{ letter-spacing:0 !important; line-height:1.55 !important; }
}

/* Brand (ähnlich .lead) */
.sigil-mark{
  font-weight:950 !important;
  letter-spacing:-0.01em !important;
  line-height:1.28 !important;
  font-size: calc(var(--nav-scale) * clamp(1.06rem, 1rem + .5vw, 1.22rem)) !important;
  text-wrap:balance !important;
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
}

/* Hauptlinks (ähnlich .copy) */
.astral-link{
  font-weight:690 !important;
  letter-spacing:-0.002em !important;
  font-size: calc(var(--nav-scale) * clamp(1.02rem, .98rem + .35vw, 1.16rem)) !important;
  line-height:1.7 !important;
  text-wrap:pretty !important;
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
}

/* Subnav-Links (0.95 der Hauptlinks) */
.astral-link--sub{
  font-weight:690 !important;
  letter-spacing:-0.002em !important;
  font-size: calc(var(--nav-scale) * clamp(.97rem, .93rem + .33vw, 1.10rem)) !important;
  line-height:1.65 !important;
  text-wrap:pretty !important;
}

/* CTA wie Lead: kräftig & kompakt */
.charm-cta{
  font-weight:950 !important;
  letter-spacing:-0.01em !important;
  font-size: calc(var(--nav-scale) * clamp(1.02rem, .98rem + .35vw, 1.16rem)) !important;
  line-height:1.28 !important;
  text-wrap:balance !important;
}

/* Optional: engere, lead-typische Pillen-Unterstreichung */
.astral-link::after{
  height:2px !important;
  transform:scaleX(.6);
}

/* Feinschliff je Breakpoint */
@media (max-width:479px){
  .astral-link{ line-height:1.5 !important; }
  .astral-link--sub{ line-height:1.5 !important; }
}
@media (min-width:768px) and (max-width:1023px){
  .astral-link{ line-height:1.6 !important; }
}
@media (min-width:1024px){
  .astral-link{ line-height:1.55 !important; }
}
/* === Responsive Feinjustierung: kleinere Nav-Schrift zwischen 768–880px === */
@media (min-width: 768px) and (max-width: 880px){
  .astral-link{
    font-size: clamp(.88rem, .82rem + .25vw, 1rem) !important;
    line-height: 1.55 !important;
    letter-spacing: -0.001em !important;
  }
}
/* === OVERRIDE: Brand (Fusion³) größer ===================== */
/* Desktop/Tablet */
.sigil-mark{
  font-size: clamp(1.6rem, 1.05rem + 1.6vw, 2.4rem) !important;
  line-height: 1.15 !important;
  letter-spacing: -0.015em !important;
}

/* Phones */
@media (max-width: 767px){
  .sigil-mark{
    font-size: clamp(1.8rem, 7.2vw, 2.3rem) !important;
  }
}

/* Optional: gib der Brand minimal mehr Luft auf sehr schmalen Headern */
@container (max-width:520px){
  .sigil-mark{ letter-spacing:-0.006em !important; }
}
/* Fix: 480–767 px – Subnav nicht in den Überpunkt schieben */
@media (min-width:480px) and (max-width:767px){
  .astral-item.is-awakened > .astral-link{
    padding-bottom:.35rem !important;   /* kleine Bodenluft beim Überpunkt */
  }
  .astral-item.is-awakened > .underrealm{
    margin-top:.35rem !important;        /* Abstand zum Überpunkt */
    padding-top:.1rem !important;         /* minimale Innenluft, optional */
  }
}
/* ===== NAV: Überpunkte fetter (alle Breakpoints) ===== */
.aether-header .astral-item > .astral-link{
  font-weight: 900 !important;           /* deutlich fetter */
  letter-spacing: -0.01em !important;    /* kompakter, wirkt hochwertiger */
}

/* Unterpunkte unverändert / etwas leichter lassen (falls nötig) */
.aether-header .astral-link--sub{
  font-weight: 650 !important;
}

</style>
</head>

<body data-page="webdesign">
  <!-- dein Body-Inhalt hier -->





<header class="aether-header" id="aetherGate">
  <div class="aether-header__bar">
    <a href="/" class="sigil-mark">Fusion³</a>

    <!-- NAV mit Subnav-Accordions (mobil sichtbar) -->
    <nav class="astral-nav" id="astralWay" aria-label="Hauptnavigation">
      <ul class="astral-nav__list">
        <!-- Leistungen -->
        <li class="astral-item">
          <a class="astral-link" href="/leistungen">Leistungen</a>
          <button
            class="gatelet"
            type="button"
            aria-expanded="false"
            aria-controls="grimoire-services"
            aria-haspopup="true"
            aria-label="Unterpunkte zu Leistungen ein- oder ausklappen">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <ul id="grimoire-services" class="underrealm" hidden>
            <li><a class="astral-link astral-link--sub" href="/leistungen/webdesign">Webdesign</a></li>
            <li><a class="astral-link astral-link--sub" href="/leistungen/branding-ci">Branding &amp; CI</a></li>
            <li><a class="astral-link astral-link--sub" href="/leistungen/performance">Performance Marketing</a></li>
            <li><a class="astral-link astral-link--sub" href="/leistungen/support">Wartung &amp; Support</a></li>
          </ul>
        </li>

        <!-- Blog (vorher "Über uns" im Kommentar) -->
        <li class="astral-item">
          <a class="astral-link" href="#ueber-uns">Blog</a>
          <button
            class="gatelet"
            type="button"
            aria-expanded="false"
            aria-controls="codex-about"
            aria-haspopup="true"
            aria-label="Unterpunkte zu Blog ein- oder ausklappen">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <ul id="codex-about" class="underrealm" hidden>
            <li><a class="astral-link astral-link--sub" href="#team">Team</a></li>
            <li><a class="astral-link astral-link--sub" href="#werte">Werte</a></li>
            <li><a class="astral-link astral-link--sub" href="/jobs">Jobs</a></li>
            <li><a class="astral-link astral-link--sub" href="/presse">Presse</a></li>
          </ul>
        </li>

        <!-- Portfolio -->
        <li class="astral-item">
          <a class="astral-link" href="#portfolio">Portfolio</a>
          <button
            class="gatelet"
            type="button"
            aria-expanded="false"
            aria-controls="vault-portfolio"
            aria-haspopup="true"
            aria-label="Unterpunkte zu Portfolio ein- oder ausklappen">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <ul id="vault-portfolio" class="underrealm" hidden>
            <li><a class="astral-link astral-link--sub" href="#web-projekte">Web-Projekte</a></li>
            <li><a class="astral-link astral-link--sub" href="#markenauftritte">Markenauftritte</a></li>
            <li><a class="astral-link astral-link--sub" href="/cases">Case Studies</a></li>
            <li><a class="astral-link astral-link--sub" href="/referenzen">Referenzen</a></li>
          </ul>
        </li>

        <!-- Kontakt -->
        <li class="astral-item">
          <a class="astral-link" href="#kontakt">Kontakt</a>
          <button
            class="gatelet"
            type="button"
            aria-expanded="false"
            aria-controls="altar-contact"
            aria-haspopup="true"
            aria-label="Unterpunkte zu Kontakt ein- oder ausklappen">
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
          <ul id="altar-contact" class="underrealm" hidden>
            <li><a class="astral-link astral-link--sub" href="/anfrage">Anfrage stellen</a></li>
            <li><a class="astral-link astral-link--sub" href="/beratung">Beratung buchen</a></li>
            <li><a class="astral-link astral-link--sub" href="/standort">Standort</a></li>
            <li><a class="astral-link astral-link--sub" href="/impressum">Impressum</a></li>
          </ul>
        </li>
      </ul>
    </nav>

    <div class="astral-actions">
      <!-- Theme Toggle -->
      <button
  class="orb-toggle"
  id="eclipseStone"
  type="button"
  aria-pressed="true"
  aria-controls="omenWhisper"
  aria-label="Dunkelmodus aktiv">

  <span class="sky day-sky" aria-hidden="true"></span>
  <span class="sky night-sky" aria-hidden="true"></span>
  <span class="stars" id="starField" aria-hidden="true"></span>

  <span class="clouds" id="nebulaSea" aria-hidden="true">
    <span class="leyline back" data-lane="back"></span>
    <span class="leyline mid" data-lane="mid"></span>
    <span class="leyline front" data-lane="front"></span>
  </span>

  <span class="thumb" id="moonShard" aria-hidden="true"></span>
</button>


      <!-- Live-Region für Modusansage -->
      <p id="omenWhisper" class="visually-hidden" aria-live="polite" aria-atomic="true">Dunkelmodus aktiv</p>

      <!-- CTA (Link bleibt Link; kein role="button" nötig) -->
      <a
        class="charm-cta charm-cta--prime"
        href="#kontakt"
        id="sigilOffer"
        aria-label="Angebot anfordern"
        data-cta
        data-cta-context="header">
        <span class="charm-cta__label">Check starten</span>
      </a>
    </div>

    <!-- Mobile Menü-Button -->
    <button
      class="portal-toggle"
      id="runeSwitch"
      type="button"
      aria-expanded="false"
      aria-controls="astralWay"
      aria-label="Menü öffnen">
      <svg class="icon icon-burger" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M3 6h18M3 12h18M3 18h18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
      <svg class="icon icon-close" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M6 6l12 12M18 6L6 18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      </svg>
    </button>
  </div>
<div class="night-veil" id="voidVeil" hidden></div>

</header>


<script>
  /* ---------------------------
     Aether / Astral Navigation
     --------------------------- */
  (function(){
    const docEl   = document.documentElement;
    const gate    = document.getElementById('aetherGate');
    const switchRune = document.getElementById('runeSwitch');
    const astral  = document.getElementById('astralWay');
    const veil    = document.getElementById('voidVeil');
    if(!switchRune || !astral) return;

    // Headerhöhe -> CSS Var
    function setGateHeight(){
      const h = gate.getBoundingClientRect().height;
      docEl.style.setProperty('--gate-height', h + 'px');
    }
    setGateHeight();
    addEventListener('resize', setGateHeight, {passive:true});

    // MQ Sync
    const mq = window.matchMedia('(min-width: 768px)');

    // Mobile Actions Container
    const mobileSatchelId = 'mobileSatchel';
    let mobileSatchel = null;
    function ensureSatchel(){
      if(!mobileSatchel){
        mobileSatchel = document.createElement('div');
        mobileSatchel.id = mobileSatchelId;
        mobileSatchel.className = 'astral-nav__mobile-actions';
        mobileSatchel.setAttribute('hidden','');
        astral.appendChild(mobileSatchel);
      }
    }
    function stowCharm(){
      ensureSatchel();
      const cta = document.querySelector('.charm-cta');
      if(cta && cta.parentElement !== mobileSatchel){ mobileSatchel.appendChild(cta); }
      mobileSatchel.removeAttribute('hidden');
    }
    function recallCharm(){
      const actions = document.querySelector('.astral-actions');
      if(!actions) return;
      const cta = mobileSatchel?.querySelector('.charm-cta');
      if(cta && actions !== cta.parentElement){
        actions.appendChild(cta);
      }
      mobileSatchel?.setAttribute('hidden','');
    }

    // Focus Trap
    const ward = (()=>{
      let active = false;
      function handle(e){
        if(!active || e.key !== 'Tab') return;
        const focusables = astral.querySelectorAll('a, button, [tabindex]:not([tabindex="-1"])');
        const list = Array.from(focusables).filter(el=>!el.hasAttribute('disabled'));
        if(list.length === 0) return;
        const first = list[0];
        const last  = list[list.length-1];
        if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
        else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
      }
      return {
        activate(){ if(!active){ active = true; document.addEventListener('keydown', handle); }},
        deactivate(){ if(active){ active = false; document.removeEventListener('keydown', handle); }}
      };
    })();

    function sealUnderrealms(){
      astral.querySelectorAll('.gatelet[aria-expanded="true"]').forEach(btn=>{
        btn.setAttribute('aria-expanded','false');
      });
      astral.querySelectorAll('.underrealm:not([hidden])').forEach(ul=>{
        ul.setAttribute('hidden','');
      });
      astral.querySelectorAll('.astral-item.is-awakened').forEach(li=>{
        li.classList.remove('is-awakened');
      });
    }

    function closePortal(){
      astral.classList.remove('is-awakened');
      veil?.classList.remove('is-awakened');
      veil?.setAttribute('hidden', '');
      switchRune.setAttribute('aria-expanded','false');
      switchRune.setAttribute('aria-label','Menü öffnen');
      docEl.classList.remove('nav-lock');
      ward.deactivate();
      document.querySelector('main')?.removeAttribute('inert');
      sealUnderrealms();
      recallCharm();
      gate.classList.remove('portal-open'); /* Balken/Shadow fix */
      switchRune.focus();
    }
    function openPortal(){
      astral.classList.add('is-awakened');
      veil?.classList.add('is-awakened');
      veil?.removeAttribute('hidden');
      switchRune.setAttribute('aria-expanded','true');
      switchRune.setAttribute('aria-label','Menü schließen');
      docEl.classList.add('nav-lock');

      const firstLink = astral.querySelector('a');
      if(firstLink) firstLink.focus();

      ward.activate();
      document.querySelector('main')?.setAttribute('inert', '');
      stowCharm();
      gate.classList.add('portal-open'); /* Balken/Shadow fix */
    }
    function syncState(){ if(mq.matches){ closePortal(); } }
    mq.addEventListener?.('change', syncState);
    syncState();

    // Toggle Button
    switchRune.addEventListener('click', function(){
      const isOpen = astral.classList.contains('is-awakened');
      if(isOpen) closePortal(); else openPortal();
    });

    // Overlay / Outside click
    veil?.addEventListener('click', () => closePortal());
    document.addEventListener('click', (e) => {
      if(!astral.classList.contains('is-awakened')) return;
      if (e.target.closest('.orb-toggle')) return; // Theme-Toggle schließt nicht
      if(!astral.contains(e.target) && !switchRune.contains(e.target)) closePortal();
    });

    // ESC
    document.addEventListener('keydown', (e) => {
      if(e.key === 'Escape' && astral.classList.contains('is-awakened')){
        e.preventDefault(); closePortal();
      }
    });

    // Scroll Shadow
    addEventListener('scroll', () => {
      const y = window.scrollY || 0;
      gate.classList.toggle('is-ascended', y>4);
    }, {passive:true});

    // Scrollspy
    const links = [...document.querySelectorAll('.astral-link')];
    const linkMap = Object.fromEntries(links.map(a=>[a.getAttribute('href'), a]));
    const obs = new IntersectionObserver(entries => {
      entries.forEach(e => {
        const id = '#'+e.target.id;
        if(e.isIntersecting){
          links.forEach(l=>{ l.removeAttribute('data-active'); l.removeAttribute('aria-current'); });
          const link = linkMap[id];
          if(link){ link.setAttribute('data-active',''); link.setAttribute('aria-current','page'); }
        }
      });
    }, {rootMargin:'-40% 0px -55% 0px', threshold:[0, 1]});
    document.querySelectorAll('section[id]').forEach(s=>obs.observe(s));

    // Smooth scroll Offset
    links.forEach(a=>{
      a.addEventListener('click', (ev)=>{
        const href = a.getAttribute('href')||'';
        if(href.startsWith('#')){
          const target = document.getElementById(href.slice(1));
          if(target){
            ev.preventDefault();
            const y = target.getBoundingClientRect().top + window.scrollY - (gate.getBoundingClientRect().height + 8);
            window.scrollTo({top:y, behavior:'smooth'});
            closePortal();
          }
        }
      });
    });
  })();
</script>
<script>
/* CTA Ripple (Namen mystisch gelassen, Klassen bereits umbenannt) */
(function(){
  const prefersReduced = matchMedia('(prefers-reduced-motion: reduce)').matches;

  function makeRipple(btn, x, y){
    if (prefersReduced) return;
    const r = document.createElement('span');
    r.className = 'cta-ripple';
    r.style.left = x + 'px';
    r.style.top  = y + 'px';
    btn.appendChild(r);
    r.offsetWidth; r.classList.add('is-anim');
    r.addEventListener('animationend', ()=> r.remove(), {once:true});
  }

  function keyRipple(e){
    if(e.key !== ' ' && e.key !== 'Enter') return;
    const btn = e.currentTarget;
    const rect = btn.getBoundingClientRect();
    makeRipple(btn, rect.width/2, rect.height/2);
  }

  function setBusy(btn, busy=true){
    btn.setAttribute('aria-busy', String(!!busy));
    const live = btn.querySelector('[aria-live]');
    if(live){ live.textContent = busy ? 'Lädt…' : 'Bereit'; }
  }

  document.querySelectorAll('[data-cta]').forEach(btn=>{
    btn.addEventListener('pointerdown', e=>{
      if(e.pointerType === 'mouse' || e.pointerType === 'touch' || e.pointerType === 'pen'){
        const rect = btn.getBoundingClientRect();
        makeRipple(btn, e.clientX - rect.left, e.clientY - rect.top);
      }
    });
    btn.addEventListener('keydown', keyRipple);
    btn.addEventListener('click', (e)=>{
      const href = btn.getAttribute('href') || '';
      const targetLocal = href.startsWith('#');
      if(targetLocal){
        setBusy(btn, true);
        setTimeout(()=> setBusy(btn, false), 420);
      }
    }, {passive:true});
  });
})();
</script>
<script>
/* Underrealm Toggle (Subnav) */
(function(){
  const nav = document.getElementById('astralWay');
  if(!nav) return;

  nav.addEventListener('click', (e)=>{
    const btn = e.target.closest('.gatelet');
    if(!btn) return;
    e.preventDefault();
    e.stopPropagation();

    const li  = btn.closest('.astral-item');
    const id  = btn.getAttribute('aria-controls');
    const sub = id ? document.getElementById(id) : li?.querySelector('.underrealm');
    if(!li || !sub) return;

    const isOpen = btn.getAttribute('aria-expanded') === 'true';

    // andere schließen
    nav.querySelectorAll('.astral-item.is-awakened').forEach(other=>{
      if(other !== li){
        other.classList.remove('is-awakened');
        const otherBtn = other.querySelector('.gatelet[aria-expanded="true"]');
        const otherSub = other.querySelector('.underrealm');
        if(otherBtn) otherBtn.setAttribute('aria-expanded','false');
        if(otherSub) otherSub.setAttribute('hidden','');
      }
    });

    btn.setAttribute('aria-expanded', String(!isOpen));
    li.classList.toggle('is-awakened', !isOpen);
    sub.toggleAttribute('hidden', isOpen);
  });

  // Outside-Click schließt alles
  document.addEventListener('click', (e)=>{
    if(!nav.contains(e.target)){
      nav.querySelectorAll('.astral-item.is-awakened').forEach(li=>{
        li.classList.remove('is-awakened');
        const b = li.querySelector('.gatelet[aria-expanded="true"]');
        const s = li.querySelector('.underrealm');
        if(b) b.setAttribute('aria-expanded','false');
        if(s) s.setAttribute('hidden','');
      });
    }
  });

  // ESC schließt alle
  document.addEventListener('keydown', (e)=>{
    if(e.key !== 'Escape') return;
    nav.querySelectorAll('.astral-item.is-awakened').forEach(li=>{
      li.classList.remove('is-awakened');
      const b = li.querySelector('.gatelet[aria-expanded="true"]');
      const s = li.querySelector('.underrealm');
      if(b) b.setAttribute('aria-expanded','false');
      if(s) s.setAttribute('hidden','');
    });
  });
})();
</script>
<script>
  (function(){
    const rootEl   = document.documentElement;
    const bodyEl   = document.body;
    const toggleEl = document.getElementById('eclipseStone');
    const shard    = document.getElementById('moonShard');
    const stars    = document.getElementById('starField');
    const statusEl = document.getElementById('omenWhisper');

    /* Sterne */
    (function seedStars(){
      if(!stars) return;
      const N = 26;
      const frag = document.createDocumentFragment();
      for(let i=0;i<N;i++){
        const el = document.createElement('i');
        el.style.top = (5 + Math.random()*90) + '%';
        el.style.left = (5 + Math.random()*90) + '%';
        el.style.animationDelay = (Math.random()*2.5).toFixed(2)+'s';
        frag.appendChild(el);
      }
      stars.appendChild(frag);
    })();

    /* Wolken */
    (function seedClouds(){
      const lanes = Array.from(document.querySelectorAll('[data-lane]'));
      if(!lanes.length || !toggleEl) return;

      const presets = {
        back:  { count: 3, speed:[80,120], scale:[0.60,0.90],  opacity:[0.25,0.40] },
        mid:   { count: 3, speed:[60, 90], scale:[0.80,1.00],  opacity:[0.50,0.70] },
        front: { count: 2, speed:[45, 70], scale:[1.00,1.15],  opacity:[0.85,0.95] }
      };

      function render(){
        lanes.forEach(l=>l.innerHTML = '');
        const rect = toggleEl.getBoundingClientRect();
        const W = Math.max(60, Math.round(rect.width));
        const H = Math.max(24, Math.round(rect.height));
        lanes.forEach(lane=>{
          const cfg = presets[lane.dataset.lane];
          for(let i=0;i<cfg.count;i++){
            const cloud = document.createElement('span');
            cloud.className = 'cloud';

            const minW = Math.max(0.28*W, 36);
            const maxW = Math.max(0.46*W, 54);
            const cw   = randf(minW, maxW);
            const ch   = cw*0.5;

            cloud.style.width  = cw+'px';
            cloud.style.height = ch+'px';

            const freeY = Math.max(0, H - ch);
            cloud.style.top  = (freeY ? randf(0, freeY) : 0) + 'px';

            cloud.style.left = (Math.max(0, W - cw) ? randf(0, W - cw) : 0) + 'px';

            const dur = rand(cfg.speed[0], cfg.speed[1]);
            cloud.style.animationDuration = dur+'s';
            cloud.style.animationDelay = (-Math.random()*dur).toFixed(2)+'s';
            cloud.style.opacity = randf(cfg.opacity[0], cfg.opacity[1]);
            cloud.style.transform = `translateX(0) scale(${randf(cfg.scale[0], cfg.scale[1])})`;

            ['b1','b2','b3','b4','b5'].forEach((b,idx)=>{
              const s = document.createElement('span');
              s.className = 'bubble '+b;
              const w = [0.58,0.50,0.66,0.38,0.42][idx] * (0.92 + Math.random()*0.16);
              const h = [0.78,0.70,0.88,0.58,0.62][idx] * (0.92 + Math.random()*0.16);
              s.style.width  = (w*100)+'%';
              s.style.height = (h*100)+'%';
              const lefts = [10,38,46,-2,22];
              const tops  = [12,-4,12,28,28];
              s.style.left = (lefts[idx] + (Math.random()*4-2))+'%';
              s.style.top  = (tops[idx]  + (Math.random()*4-2))+'%';
              cloud.appendChild(s);
            });

            lane.appendChild(cloud);
          }
        });
      }

      function rand(min,max){ return Math.floor(min + Math.random()*(max-min+1)); }
      function randf(min,max){ return +(min + Math.random()*(max-min)).toFixed(2); }

      let t;
      const onResize = () => { clearTimeout(t); t = setTimeout(render, 120); };
      render();
      addEventListener('resize', onResize, {passive:true});
    })();

    const KEY = 'theme-pref';
    function apply(mode){ // 'dark' | 'light'
      const isDark = (mode === 'dark');
      bodyEl.classList.toggle('nocturne', isDark);
      bodyEl.classList.toggle('dawn', !isDark);
      rootEl.setAttribute('data-theme', isDark ? 'dark' : 'light');
      if(toggleEl) toggleEl.setAttribute('aria-pressed', String(isDark));
      if(statusEl) statusEl.textContent = isDark ? 'Dunkelmodus aktiv' : 'Hellmodus aktiv';
    }

    (function init(){
      const saved = localStorage.getItem(KEY);
      if(saved === 'light' || saved === 'dark'){
        apply(saved);
      }else{
        const sysDark = matchMedia('(prefers-color-scheme:dark)').matches;
        apply(sysDark ? 'dark' : 'light');
      }
    })();

    document.addEventListener('click', (e)=>{
      const t = e.target.closest?.('.orb-toggle');
      if(!t) return;
      const nowDark = !bodyEl.classList.contains('nocturne');
      apply(nowDark ? 'dark' : 'light');
      localStorage.setItem(KEY, nowDark ? 'dark' : 'light');
      if(shard){
        shard.classList.remove('pulse'); void shard.offsetWidth; shard.classList.add('pulse');
      }
    });

    matchMedia('(prefers-color-scheme:dark)').addEventListener('change', (e)=>{
      if(localStorage.getItem(KEY)) return;
      apply(e.matches ? 'dark' : 'light');
    });
  })();
</script>






  <section class="hero-section">
    <div class="hero-images-wrapper">
      <div class="hero-image-background"></div>
      <div class="page-title">
        <div class="container">
          <h1 class="large-title">Fusion3</h1>
        </div>
      </div>
      <div class="hero-image-foreground"></div>
    </div>
  </section>




<section id="aurora-sheet" class="aurora-sheet container" aria-labelledby="aurora-crown" aria-describedby="aurora-chant">
  <h2 id="aurora-crown" class="aurora-title">Webdesign</h2>

  <p id="aurora-chant" class="aurora-subtitle" aria-live="polite">
    <span class="subtitle-snippet">Schnelle, klare Websites – mit Design, das bleibt.</span>
    <span class="subtitle-t">Webdesign bedeutet bei uns Klarheit, Performance und erlebbares Design – auf allen Geräten, für alle Marken.</span>
    <span class="subtitle-full">
      Wir gestalten Websites, die nicht nur gut aussehen, sondern wirken.  
      Klar im Aufbau, schnell im Code, präzise in der Marke.
    </span>
  </p>

  <!-- Webdesign Inhalte -->
  <ul class="quasar-grid" aria-label="Bereiche: Strategie, Gestaltung, Entwicklung">

    <li>
      <article class="aether-card" id="aether-strategy"
               aria-labelledby="aether-strategy-h"
               aria-describedby="aether-strategy-k aether-strategy-s">
        <h3 id="aether-strategy-h">Strategie</h3>
        <p class="snippet" id="aether-strategy-s">Struktur, Fokus, Ziel – jede Seite folgt einem klaren Plan.</p>
        <p class="t-snippet">Unsere Strategien vereinen Markenführung, Usability und SEO. Damit Websites nicht nur gefunden, sondern verstanden werden.</p>
        <p class="microtag" id="aether-strategy-k">Strukturiert &amp; zielführend</p>

        <ul class="delta-list" aria-label="Kernpunkte der Strategie">
          <li>
            <span class="lead">UX-Fokus</span>
            <span class="copy">Klares Nutzererlebnis mit logischem Flow und minimalen Klicks.</span>
          </li>
          <li>
            <span class="lead">Markenfit</span>
            <span class="copy">Jedes Design transportiert Haltung, Ton und Identität der Marke.</span>
          </li>
          <li>
            <span class="lead">Datenbasiert</span>
            <span class="copy">Entscheidungen stützen sich auf Verhalten, nicht auf Bauchgefühl.</span>
          </li>
        </ul>
      </article>
    </li>

    <li>
      <article class="aether-card" id="aether-design"
               aria-labelledby="aether-design-h"
               aria-describedby="aether-design-k aether-design-s">
        <h3 id="aether-design-h">Gestaltung</h3>
        <p class="snippet" id="aether-design-s">Modern, markant, barrierearm – Design mit Funktion.</p>
        <p class="t-snippet">Wir gestalten Interfaces mit Typografie, Bewegung und Struktur – reduziert im Stil, stark im Ausdruck.</p>
        <p class="microtag" id="aether-design-k">Klar. Präzise. Markant.</p>

        <ul class="delta-list" aria-label="Gestaltungsprinzipien">
          <li>
            <span class="lead">Visuelle Balance</span>
            <span class="copy">Form folgt Funktion – jedes Element dient dem Nutzer.</span>
          </li>
          <li>
            <span class="lead">Responsiv</span>
            <span class="copy">Pixelgenaue Umsetzung für alle Viewports – vom Desktop bis Mobile.</span>
          </li>
          <li>
            <span class="lead">Barrierearm</span>
            <span class="copy">Zugänglich für alle – technisch wie visuell.</span>
          </li>
        </ul>
      </article>
    </li>

    <li>
      <article class="aether-card" id="aether-dev"
               aria-labelledby="aether-dev-h"
               aria-describedby="aether-dev-k aether-dev-s">
        <h3 id="aether-dev-h">Entwicklung</h3>
        <p class="snippet" id="aether-dev-s">Sauberer Code, kurze Ladezeiten, flexible Systeme.</p>
        <p class="t-snippet">Wir entwickeln mit modernen Frameworks, performanten Strukturen und einer Liebe zum Detail – wartbar, skalierbar und sicher.</p>
        <p class="microtag" id="aether-dev-k">Technisch stark &amp; zukunftsfähig</p>

        <ul class="delta-list" aria-label="Technische Schwerpunkte">
          <li>
            <span class="lead">Performance</span>
            <span class="copy">Schnelle Ladezeiten durch optimierten Code und saubere Assets.</span>
          </li>
          <li>
            <span class="lead">CMS</span>
            <span class="copy">Nahtlose Integration in Systeme wie WordPress, Webflow oder Headless CMS.</span>
          </li>
          <li>
            <span class="lead">SEO &amp; Sicherheit</span>
            <span class="copy">Von Anfang an suchmaschinenfreundlich und DSGVO-konform.</span>
          </li>
        </ul>
      </article>
    </li>

  </ul>
</section>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "webdesign",
      "@id": "https://example.com/ueber-fusion3/#webdesign",
      "url": "https://example.com/ueber-fusion3/",
      "name": "Über Fusion3 — Design, 3D & Web",
      "inLanguage": "de",
      "isPartOf": {
        "@type": "WebSite",
        "@id": "https://example.com/#website",
        "url": "https://example.com/"
      },
      "description": "Wir verbinden Design, 3D und Web – für Marken, die in Erinnerung bleiben. Kreativität trifft Technologie. Wirkung trifft Tempo.",
      "primaryImageOfPage": {
        "@type": "ImageObject",
        "url": "https://example.com/assets/og/ueber-fusion3.jpg"
      },
      "mainEntity": { "@id": "https://example.com/ueber-fusion3/#mission-team-vision" }
    },
    {
      "@type": "ItemList",
      "@id": "https://example.com/ueber-fusion3/#mission-team-vision",
      "name": "Mission, Team & Vision",
      "inLanguage": "de",
      "itemListOrder": "http://schema.org/ItemListOrderAscending",
      "numberOfItems": 3,
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "item": {
            "@type": "webdesignElement",
            "@id": "https://example.com/ueber-fusion3/#aether-mission",
            "url": "https://example.com/ueber-fusion3/#aether-mission",
            "name": "Unsere Mission",
            "description": "Design, Code & 3D als Einheit — Balance, Erlebnis und skalierbare Systeme."
          }
        },
        {
          "@type": "ListItem",
          "position": 2,
          "item": {
            "@type": "webdesignElement",
            "@id": "https://example.com/ueber-fusion3/#aether-crew",
            "url": "https://example.com/ueber-fusion3/#aether-crew",
            "name": "Unser Team",
            "description": "Interdisziplinär, agil und erfahren — Designer, Entwickler & 3D-Artists als Produktteam."
          }
        },
        {
          "@type": "ListItem",
          "position": 3,
          "item": {
            "@type": "webdesignElement",
            "@id": "https://example.com/ueber-fusion3/#aether-vision",
            "url": "https://example.com/ueber-fusion3/#aether-vision",
            "name": "Unsere Vision",
            "description": "Zukunftsorientiertes Design mit Wirkung — Emotion, Technologie und Nachhaltigkeit."
          }
        }
      ]
    }
  ]
}
</script>
<script>
(function(){
  const mqMobile = window.matchMedia('(max-width: 699.98px)');
  const section = document.getElementById('aurora-sheet');
  if(!section) return;

  const cards = Array.from(section.querySelectorAll('.aether-card'));
  if(!cards.length) return;

  // ---- Hilfsfunktionen
  const vhMid = () => window.innerHeight / 2;
  const centerAbs = () => window.scrollY + vhMid();

  // Zustand für richtungssensitives „Step“-Aktivieren
  let currentIndex = 0;
  let lastScrollY = window.scrollY;

  // Sichtbarkeits-Observer (wie gehabt)
  function setupObservers(){
    const sectionObserver = new IntersectionObserver(([entry])=>{
      if(entry.isIntersecting){
        section.classList.add('section-enter');
        section.classList.remove('section-exit');
      }else{
        section.classList.add('section-exit');
        section.classList.remove('section-enter');
      }
    }, { root: null, threshold: 0.05 });
    sectionObserver.observe(section);

    const revealObserver = new IntersectionObserver((entries)=>{
      entries.forEach(entry=>{
        const el = entry.target;
        if(entry.intersectionRatio >= 0.3){
          el.classList.add('is-revealed');
          el.classList.remove('is-fading');
        }else if(entry.intersectionRatio > 0 && entry.intersectionRatio < 0.3){
          el.classList.add('is-fading');
        }else{
          el.classList.remove('is-fading','is-revealed');
        }
      });
    }, { root: null, threshold: [0, .15, .3], rootMargin: '-10% 0px -10% 0px' });

    cards.forEach(c => revealObserver.observe(c));
  }

  // aktuelle Karte „stepweise“ bestimmen
  function pickActiveStepwise(){
    const dirDown = window.scrollY > lastScrollY;
    lastScrollY = window.scrollY;

    // Mittenpositionen (Dokumentkoordinaten) & dynamische Grenzen berechnen
    const mids = cards.map(c=>{
      const r = c.getBoundingClientRect();
      return window.scrollY + r.top + r.height/2;
    });

    // Grenzen zwischen Karten: Mitte zwischen den Mittelpunkten
    // boundary[i] trennt i und i+1
    const boundaries = [];
    for(let i=0; i<mids.length-1; i++){
      boundaries.push((mids[i] + mids[i+1]) / 2);
    }

    const cAbs = centerAbs();

    // Wenn wir uns außerhalb der Section befinden, nichts ändern
    const secRect = section.getBoundingClientRect();
    if(secRect.bottom <= 0 || secRect.top >= window.innerHeight) return;

    // Initialisierung: beim Eintritt von oben → Index 0
    if(cAbs <= boundaries[0]) currentIndex = 0;

    // Step-Logik: nur bei Überschreiten der passenden Grenze wechseln
    if(dirDown){
      // nach unten: steigt max. um 1 pro Grenze
      if(currentIndex < cards.length - 1 && cAbs >= boundaries[currentIndex]){
        currentIndex += 1;
      }
    }else{
      // nach oben: sinkt max. um 1 pro Grenze
      if(currentIndex > 0 && cAbs <= boundaries[currentIndex - 1]){
        currentIndex -= 1;
      }
    }

    // Klassen anwenden
    cards.forEach((c, i)=>{
      if(i === currentIndex){
        c.classList.add('is-active');
        c.style.willChange = 'transform, opacity';
      }else{
        c.classList.remove('is-active','is-pressed');
        c.style.willChange = '';
      }
    });
  }

  // rAF-Throttling
  let ticking = false;
  function onScroll(){
    if(!ticking){
      requestAnimationFrame(()=>{
        pickActiveStepwise();
        ticking = false;
      });
      ticking = true;
    }
  }

  // Tap/Press & Click-Setzen
  function setupPress(){
    const pressMs = 160;
    const vibrate = (ms)=>{ try{ navigator.vibrate && navigator.vibrate(ms); }catch(e){} };

    cards.forEach((card, idx)=>{
      let pressTO = null;

      card.addEventListener('pointerdown', (e)=>{
        if(e.pointerType && e.button !== 0) return;
        card.classList.add('is-pressed');
        vibrate(10);
        clearTimeout(pressTO);
        pressTO = setTimeout(()=> card.classList.remove('is-pressed'), pressMs);
      });

      ['pointerup','pointercancel','pointerleave'].forEach(type=>{
        card.addEventListener(type, ()=> card.classList.remove('is-pressed'));
      });

      card.addEventListener('click', ()=>{
        currentIndex = idx;               // Reihenfolge bleibt kohärent
        cards.forEach((c,i)=> c.classList.toggle('is-active', i===currentIndex));
        // sanft zur Mitte scrollen, falls stark off-center
        const r = card.getBoundingClientRect();
        const delta = (r.top + r.height/2) - vhMid();
        if(Math.abs(delta) > 24){
          window.scrollBy({ top: delta, left: 0, behavior: 'smooth' });
        }
      });
    });
  }

  // Reduced Motion: Bewegung minimieren
  function setupReducedMotion(){
    const rdm = window.matchMedia('(prefers-reduced-motion: reduce)');
    const handle = (e)=>{
      if(e.matches){
        cards.forEach(c=>{
          c.classList.remove('is-pressed','is-active','is-revealed','is-fading');
          c.style.transform = '';
          c.style.willChange = '';
        });
      }else{
        pickActiveStepwise();
      }
    };
    rdm.addEventListener?.('change', handle);
    handle(rdm);
  }

  // aktivieren/deaktivieren für Mobile
  function enableMobileEffects(){
    setupObservers();
    setupPress();
    setupReducedMotion();
    // Listener
    window.addEventListener('scroll', onScroll, { passive: true });
    window.addEventListener('resize', onScroll, { passive: true });
    // Initial: starte auf erster Karte
    currentIndex = 0;
    pickActiveStepwise();
  }

  function disableMobileEffects(){
    section.classList.remove('section-enter','section-exit');
    cards.forEach(c=>{
      c.classList.remove('is-revealed','is-fading','is-active','is-pressed');
      c.style.willChange = '';
    });
    window.removeEventListener('scroll', onScroll);
    window.removeEventListener('resize', onScroll);
  }

  // Bootstrapping
  if(mqMobile.matches){ enableMobileEffects(); }
  (mqMobile.addEventListener ? mqMobile.addEventListener('change', e=>{
    if(e.matches){ enableMobileEffects(); } else { disableMobileEffects(); }
  }) : mqMobile.addListener && mqMobile.addListener(e=>{
    if(e.matches){ enableMobileEffects(); } else { disableMobileEffects(); }
  }));

})();
</script>







<section class="cluster cosmos-suite" id="nebula-hub" aria-labelledby="nebula-hub-h">
  <h2 id="nebula-hub-h" class="headline">Unsere Leistungen</h2>
  <p class="subline" id="nebula-hub-sub">
    Webdesign, Entwicklung &amp; digitale Markenführung – ganzheitlich gedacht, präzise umgesetzt.
  </p>

  <ul class="orbit-grid" aria-labelledby="nebula-hub-h" aria-describedby="nebula-hub-sub">

    <!-- UX / Webdesign -->
    <li class="module-card" id="svc-webdesign"
        aria-labelledby="svc-webdesign-h"
        aria-describedby="svc-webdesign-s">
      <div class="payload">
        <h3 id="svc-webdesign-h">UX &amp; Webdesign</h3>
        <p class="card-snippet" id="svc-webdesign-s">
          Wir gestalten Websites, die überzeugen – funktional, schnell und emotional.
        </p>
        <ul>
          <li>UX-Strategie &amp; Wireframing</li>
          <li>UI-Design &amp; Prototyping</li>
          <li>Responsive &amp; barrierearmes Design</li>
          <li>Interaction Design &amp; Animation</li>
        </ul>

        <a href="./WebDesign.html" class="warp-cta" aria-label="Mehr über UX & Webdesign erfahren">Mehr erfahren</a>
      </div>
    </li>

    <!-- Webentwicklung -->
    <li class="module-card stellar-3d" id="svc-3d"
        aria-labelledby="svc-3d-h"
        aria-describedby="svc-3d-s">
      <div class="payload">
        <h3 id="svc-3d-h">Webentwicklung</h3>
        <p class="card-snippet" id="svc-3d-s">
          Sauberer Code trifft Designpräzision – flexibel, skalierbar und wartungsfreundlich.
        </p>

        <ul>
          <li>Frontend-Entwicklung (React, Vue, HTML/CSS)</li>
          <li>Headless &amp; klassische CMS (WordPress, Webflow)</li>
          <li>Performance &amp; SEO-Optimierung</li>
          <li>Hosting, Deploy &amp; Wartung</li>
        </ul>

        <!-- Bilder / Deko bleiben -->
        <div class="overlay-art" aria-hidden="true">
          <div class="orbit-shell">
            <img
              class="planet-sprite"
              loading="lazy"
              decoding="async"
              src="./indexFotoSlideShow/planet.webp"
              alt=""
              aria-hidden="true"
              width="512" height="512">
          </div>

          <img
            class="lazy-comet astronaut-sprite"
            src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="
            data-src="./indexFotoSlideShow/2.webp"
            alt=""
            decoding="async"
            loading="lazy"
            aria-hidden="true"
            width="512" height="512">
        </div>

        <a href="./WebEntwicklung.html" class="warp-cta" aria-label="Mehr über Webentwicklung erfahren">Mehr erfahren</a>
      </div>
    </li>

    <!-- Brand & UI-Systeme -->
    <li class="module-card" id="svc-grafik"
        aria-labelledby="svc-grafik-h"
        aria-describedby="svc-grafik-s">
      <div class="payload">
        <h3 id="svc-grafik-h">Brand &amp; UI-Systeme</h3>
        <p class="card-snippet" id="svc-grafik-s">
          Marken, die man erkennt – Designsysteme, die mitwachsen.
        </p>

        <ul>
          <li>Corporate Design &amp; Web-Branding</li>
          <li>Styleguides &amp; Komponentenbibliotheken</li>
          <li>Iconsets, Typografie &amp; Farbsysteme</li>
          <li>Design Tokens &amp; UI-Kits</li>
        </ul>

        <div class="overlay-art" aria-hidden="true">
          <img
            class="lazy-comet"
            src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="
            data-src="./indexFotoSlideShow/astro sitzend.webp"
            alt=""
            decoding="async"
            loading="lazy"
            aria-hidden="true"
            width="512" height="512">
        </div>

        <a href="./BrandDesign.html" class="warp-cta" aria-label="Mehr über Brand & UI-Systeme erfahren">Mehr erfahren</a>
      </div>
    </li>

    <!-- Content & Motion (Video) -->
    <li class="module-card cinema-card" id="svc-social" aria-labelledby="svc-social-h">
      <div class="payload">
        <h3 id="svc-social-h" class="visually-hidden">Content &amp; Motion</h3>
      </div>

      <video
        autoplay
        muted
        loop
        playsinline
        preload="metadata"
        poster="./indexFotoSlideShow/social-poster.jpg"
        aria-labelledby="svc-social-h">
        <source src="./videos/social-showreel.webm" type="video/webm">
        <source src="./indexFotoSlideShow/kartenvideo.mp4" type="video/mp4">
        Dein Browser unterstützt das Video-Tag nicht.
      </video>
    </li>

  </ul>
</section>
<!-- Optionales JS: Lazy-Images & Video Controls feinjustieren -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Lazy-Image Loading (data-src → src)
    const lazyImgs = document.querySelectorAll('img[data-src]');
    const obs = new IntersectionObserver(entries => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          const img = e.target;
          img.src = img.dataset.src;
          obs.unobserve(img);
        }
      });
    });
    lazyImgs.forEach(img => obs.observe(img));

    // Optional: disable PiP / Download via JS (validator-freundlich)
    const vid = document.querySelector('#svc-social video');
    if (vid) {
      if (vid.controlsList && vid.controlsList.add) {
        try {
          vid.controlsList.add('nodownload');
          vid.controlsList.add('noplaybackrate');
        } catch (e) {}
      }
      if ('disablePictureInPicture' in vid)
        vid.disablePictureInPicture = true;
      vid.addEventListener('contextmenu', e => e.preventDefault());
    }
  });
</script>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const lazyImages = document.querySelectorAll("img.lazy-comet");

    const observer = new IntersectionObserver((entries, obs) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const img = entry.target;
          img.src = img.dataset.src;
          img.classList.remove("lazy-comet");
          obs.unobserve(img);
        }
      });
    }, {
      rootMargin: "100px 0px",
      threshold: 0.01
    });

    lazyImages.forEach(img => observer.observe(img));
  });

  function togglePlanet(card){ card.classList.toggle('clicked'); }
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "webdesign",
      "@id": "https://example.com/leistungen/#webdesign",
      "url": "https://example.com/leistungen/",
      "name": "Unsere Leistungen — Web, 3D & Design",
      "inLanguage": "de",
      "description": "Von Web bis 3D – alles aus einer Hand, schnell & wirkungsvoll.",
      "isPartOf": { "@type": "WebSite", "@id": "https://example.com/#website", "url": "https://example.com/" },
      "primaryImageOfPage": { "@type": "ImageObject", "url": "https://example.com/assets/og/leistungen.jpg" },
      "mainEntity": { "@id": "https://example.com/leistungen/#leistungen-list" }
    },
    {
      "@type": "ItemList",
      "@id": "https://example.com/leistungen/#leistungen-list",
      "name": "Leistungen",
      "inLanguage": "de",
      "itemListOrder": "http://schema.org/ItemListOrderAscending",
      "numberOfItems": 4,
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "item": {
            "@type": "Service",
            "@id": "https://example.com/leistungen/#svc-webdesign",
            "name": "Webdesign",
            "description": "Responsive, performanceoptimierte Websites, UI, Animationen & Microinteractions, CMS-Integration und SEO-ready.",
            "url": "https://example.com/WebDesign.html"
          }
        },
        {
          "@type": "ListItem",
          "position": 2,
          "item": {
            "@type": "Service",
            "@id": "https://example.com/leistungen/#svc-3d",
            "name": "3D Design",
            "description": "Fotorealistische 3D-Visualisierungen, Produkt- und Architektur-Renderings, VR/AR-kompatible Modelle – optimiert für Web & Druck.",
            "url": "https://example.com/3DDesign.html"
          }
        },
        {
          "@type": "ListItem",
          "position": 3,
          "item": {
            "@type": "Service",
            "@id": "https://example.com/leistungen/#svc-grafik",
            "name": "Grafikdesign",
            "description": "Corporate Design & Markenauftritt, Logo-Design, Druck- & Digitalmedien, Infografiken & visuelle Systeme.",
            "url": "https://example.com/Grafikdesign.html"
          }
        },
        {
          "@type": "ListItem",
          "position": 4,
          "item": {
            "@type": "Service",
            "@id": "https://example.com/leistungen/#svc-social",
            "name": "Social Media",
            "description": "Bewegtbild & Social-Assets: Showreels, Snippets, plattformspezifische Adaptionen.",
            "url": "https://example.com/SocialMedia.html"
          }
        }
      ]
    },
    {
      "@type": "VideoObject",
      "@id": "https://example.com/leistungen/#social-video",
      "name": "Showreel Social Media",
      "inLanguage": "de",
      "thumbnailUrl": "https://example.com/indexFotoSlideShow/social-poster.jpg",
      "contentUrl": "https://example.com/indexFotoSlideShow/kartenvideo.mp4",
      "embedUrl": "https://example.com/leistungen/#svc-social",
      "description": "Kurz-Showreel Social Media Assets.",
      "isPartOf": { "@id": "https://example.com/leistungen/#webdesign" }
    }
  ]
}
</script>






<!-- =========================================================
     SECTION: IMAGE MARQUEE — Scroll + sanfte Auto-Bewegung mobil
========================================================== -->
<section id="image-marquee" aria-label="3D Galerie">
  <style>
    #image-marquee {
      --gap: clamp(12px, 1.6vw, 18px);
      --h: clamp(110px, 20vw, 200px);
      --dur-desktop: 28s;
      --dur-mobile: 60s;
      overflow: hidden;
    }

    #image-marquee .wrap {
      max-width: min(95vw, 1340px);
      margin: 0 auto;
      padding: 24px 0;
    }

    #image-marquee .row {
      overflow: hidden;
      position: relative;
      padding-block: 6px;
      -webkit-mask-image: linear-gradient(90deg, transparent 0, #000 6%, #000 94%, transparent 100%);
              mask-image: linear-gradient(90deg, transparent 0, #000 6%, #000 94%, transparent 100%);
    }

    #image-marquee .track {
      display: flex;
      gap: var(--gap);
      width: max-content;
      align-items: center;
      will-change: transform;
    }

    #image-marquee .tile {
      flex: 0 0 auto;
      height: var(--h);
      aspect-ratio: 16/10;
      border-radius: 14px;
      overflow: hidden;
    }

    #image-marquee .tile img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    /* ===== Standard: Endlosloop Desktop ===== */
    @keyframes scroll-ltr { from { transform: translateX(-50%); } to { transform: translateX(0); } }
    @keyframes scroll-rtl { from { transform: translateX(0); } to { transform: translateX(-50%); } }

    #image-marquee .row.top .track {
      animation: scroll-ltr var(--dur-desktop) linear infinite;
    }
    #image-marquee .row.bottom .track {
      animation: scroll-rtl calc(var(--dur-desktop) * 1.1) linear infinite;
    }

    /* Hover = Pause */
    @media (hover:hover) {
      #image-marquee .row:hover .track { animation-play-state: paused; }
    }

    /* === Mobile: langsamere Bewegung + Scroll-Parallax === */
    @media (max-width: 900px) {
      #image-marquee .row.top .track {
        animation: scroll-ltr var(--dur-mobile) linear infinite;
      }
      #image-marquee .row.bottom .track {
        animation: scroll-rtl calc(var(--dur-mobile) * 1.1) linear infinite;
      }
    }
     /* === Mobile: Scroll steuert die Tracks, keine CSS-Animation === */
  @media (max-width: 900px) {
    #image-marquee .row .track {
      animation: none !important;          /* Auto-Animation aus */
      transform: translateX(0);            /* Startwert */
    }
  }
  </style>

  <div class="wrap">
    <!-- OBERERE REIHE – links → rechts -->
    <div class="row top">
      <div class="track">
        <a class="tile"><img src="./3DSlideShow/post1.png" alt=""></a>
        <a class="tile"><img src="./3DSlideShow/post2.png" alt=""></a>
        <a class="tile"><img src="./3DSlideShow/post3.png" alt=""></a>
        <a class="tile"><img src="./3DSlideShow/post4.png" alt=""></a>
        <a class="tile"><img src="./3DSlideShow/post5.png" alt=""></a>
        <a class="tile"><img src="./3DSlideShow/post6.png" alt=""></a>
        <a class="tile"><img src="./3DSlideShow/post7.png" alt=""></a>
        <!-- Duplikat -->
        <a class="tile"><img src="./3DSlideShow/post1.png" alt=""></a>
        <a class="tile"><img src="./3DSlideShow/post2.png" alt=""></a>
        <a class="tile"><img src="./3DSlideShow/post3.png" alt=""></a>
        <a class="tile"><img src="./3DSlideShow/post4.png" alt=""></a>
      </div>
    </div>

    <!-- UNTERE REIHE – rechts → links -->
    <div class="row bottom">
      <div class="track">
        <a class="tile"><img src="./3DSlideShow/post8.png" alt=""></a>
        <a class="tile"><img src="./3DSlideShow/post9.png" alt=""></a>
        <a class="tile"><img src="./3DSlideShow/post10.png" alt=""></a>
        <a class="tile"><img src="./3DSlideShow/post11.png" alt=""></a>
        <a class="tile"><img src="./3DSlideShow/post12.png" alt=""></a>
        <a class="tile"><img src="./3DSlideShow/post13.png" alt=""></a>
        <a class="tile"><img src="./3DSlideShow/post14.png" alt=""></a>
        <!-- Duplikat -->
        <a class="tile"><img src="./3DSlideShow/post8.png" alt=""></a>
        <a class="tile"><img src="./3DSlideShow/post9.png" alt=""></a>
        <a class="tile"><img src="./3DSlideShow/post10.png" alt=""></a>
      </div>
    </div>
  </div>

  <script>
    // Scroll-Parallax + sanfte Drift auf Mobil
    (function(){
      const marquee = document.getElementById('image-marquee');
      const rows = marquee.querySelectorAll('.row');
      const tracks = [...rows].map(r => r.querySelector('.track'));
      const speeds = [0.4, -0.4]; // oben, unten

      function onScroll(){
        const rect = marquee.getBoundingClientRect();
        const vh = window.innerHeight;
        const progress = 1 - Math.min(Math.max((rect.top + rect.height) / (vh + rect.height), 0), 1);
        tracks.forEach((t,i)=>{
          const drift = progress * 25 * speeds[i]; // sanftes Mitschieben
          t.style.transform = `translateX(${drift}%)`;
        });
      }

      // Nur bei kleinen Viewports aktiv
      const mq = window.matchMedia("(max-width: 900px)");
      if(mq.matches){
        window.addEventListener('scroll', onScroll, {passive:true});
        onScroll();
      }
    })();
  </script>
  
<script>
  (function () {
    const marquee = document.getElementById('image-marquee');
    if (!marquee) return;

    const mq = window.matchMedia('(max-width: 900px)');
    const rows = marquee.querySelectorAll('.row');
    const tracks = [...rows].map(r => r.querySelector('.track'));

    // Richtung je Reihe (oben nach rechts bei Scroll runter, unten nach links)
    const dir = [1, -1];        // top, bottom
    const speed = 0.6;          // feinjustierbarer Faktor: px Horizontal pro 1px Vertical-Scroll
    const damping = 0.06;       // "Sanftheit" (0–1), kleiner = weicher

    // Zustände pro Track
    const state = tracks.map(() => ({
      x: 0,          // aktuelle X-Position in px (Render)
      vx: 0,         // Zielgeschwindigkeit (aus Scroll abgeleitet)
      loopW: 0       // halbe Track-Breite für Endlosloop
    }));

    // Breite messen (halbe Strecke, weil du die Items dupliziert hast)
    function measure() {
      tracks.forEach((t, i) => {
        // halbe Breite = Track-Gesamtbreite / 2
        state[i].loopW = t.scrollWidth / 2;
      });
    }
    measure();
    new ResizeObserver(measure).observe(marquee);

    // Scroll-Delta erfassen
    let lastY = window.scrollY;
    function onScroll() {
      const y = window.scrollY;
      const dy = y - lastY;
      lastY = y;
      // Geschwindigkeit aktualisieren (zielwert)
      state.forEach((s, i) => {
        s.vx += dy * speed * dir[i];
      });
      kickRAF();
    }

    // Smooth-RAF Loop (trägt vx sanft auf x auf, dämpft vx)
    let rafId = null;
    function tick() {
      rafId = null;
      let needMore = false;

      tracks.forEach((t, i) => {
        const s = state[i];
        // Sanfte Annäherung: ein Stück der vx addieren
        s.x += s.vx;
        s.vx *= (1 - damping);

        // Endlos-Loop: in den Bereich [-loopW, 0) normalisieren
        if (s.loopW > 0) {
          // Wir bewegen nach links (negativ) für translateX
          // Also modulo auf [-loopW, 0)
          s.x = ((s.x % s.loopW) + s.loopW) % s.loopW; // in [0, loopW)
          const xNeg = -s.x; // translate nach links
          t.style.transform = `translateX(${xNeg}px)`;
        }

        if (Math.abs(s.vx) > 0.1) needMore = true;
      });

      if (needMore) kickRAF();
    }
    function kickRAF() {
      if (rafId == null) rafId = requestAnimationFrame(tick);
    }

    // Nur auf Mobile aktivieren/deaktivieren
    function enableMobileMode(on) {
      if (on) {
        window.addEventListener('scroll', onScroll, { passive: true });
        // Initialen Scroll-Impulse berechnen (falls Seite nicht bei 0 beginnt)
        lastY = window.scrollY;
      } else {
        window.removeEventListener('scroll', onScroll);
        // transform zurücksetzen, damit Desktop-Animation greift
        tracks.forEach(t => { t.style.transform = ''; });
        // Zustände zurücksetzen
        state.forEach(s => { s.x = 0; s.vx = 0; });
      }
    }

    // Aktivieren je nach Viewport
    function applyMode(e) { enableMobileMode(e.matches); }
    mq.addEventListener ? mq.addEventListener('change', applyMode)
                        : mq.addListener(applyMode);
    applyMode(mq);

    // Bonus: wenn der Bereich in den Viewport scrollt, kurz "anstoßen"
    const io = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting && mq.matches) {
          // leichter Drift beim Eintritt (optional)
          state.forEach((s, i) => { s.vx += 2 * dir[i]; });
          kickRAF();
        }
      });
    }, { threshold: 0.1 });
    io.observe(marquee);
  })();
</script>
</section>






<!-- =========================================================
     SECTION: Kostenloses Wireframe (Rev. 6) – High-Polish UX + Modal
     Eyebrow: orange, kurz; CTA: zentriert + Info-Button rechts; Modal mit 5 Schritten
========================================================== -->
<section id="wireframe-offer" class="wf-section" aria-labelledby="wf-title" role="region">
  <div class="container wf-grid" aria-label="Angebot: Kostenloses Wireframe">

    <!-- Left: Headline / Subline -->
    <header class="wf-left">
      <div class="wf-badge wf-badge--compact" aria-label="Eyebrow: kurz">
  <span class="wf-badge__pill">Kostenlos • 48h</span>
</div>
      <h2 id="wf-title" class="section-title">Kostenloses Wireframe nach Erstgespräch</h2>
      <p class="section-subtitle" id="wf-sub">
        Buche ein unverbindliches Erstgespräch. Danach erhältst du innerhalb von
        <strong>max. 2 Tagen</strong> ein klickbares Wireframe (Low/Mid‑Fi).
        <span class="wf-muted">Keine Kosten. Keine Verpflichtung.</span>
      </p>
    </header>

    <!-- Right: Steps -->
    <div class="wf-right">
      <ol class="wf-steps" aria-label="Ablauf in drei Schritten">
        <li class="wf-step">
          <span class="wf-step-num" aria-hidden="true">1</span>
          <div class="wf-step-copy">
            <strong>Erstgespräch (30–45 Min.)</strong>
            <p>Remote‑Call: Ziel, Zielgruppen, wichtigste Seiten/Flows.</p>
          </div>
        </li>
        <li class="wf-step">
          <span class="wf-step-num" aria-hidden="true">2</span>
          <div class="wf-step-copy">
            <strong>Wireframe‑Erstellung</strong>
            <p>Klickbares Konzept (Figma‑Link) inkl. kurzer Begründung.</p>
          </div>
        </li>
        <li class="wf-step">
          <span class="wf-step-num" aria-hidden="true">3</span>
          <div class="wf-step-copy">
            <strong>Lieferung ≤ 48h</strong>
            <p>Feedback‑Runde optional. <em>Kein</em> Payment. <em>Kein</em> Abo.</p>
          </div>
        </li>
      </ol>
    </div>

    <!-- Global CTA: zentriert; Info-Button rechts davon -->
    <div class="wf-actions wf-actions--global">
      <div class="wf-actions__inner">
        <button type="button" class="charm-cta charm-cta--prime wf-cta" data-cta>
  <span class="charm-cta__labl">Kostenloses Wireframe sichern</span>
</button>
        <button type="button" class="wf-btn wf-btn--ghost" id="wf-info-btn" aria-haspopup="dialog" aria-controls="wf-modal" aria-expanded="false">Was ist ein Wireframe?</button>
      </div>
      <p class="wf-cta-note">Antwort innerhalb von <strong>48h</strong></p>
    </div>

  </div>

  <!-- Modal: Was ist ein Wireframe? (5 Schritte) -->
  <div class="wf-modal" id="wf-modal" role="dialog" aria-modal="true" aria-labelledby="wf-modal-title" hidden>
    <div class="wf-modal__backdrop" data-close></div>
    <div class="wf-modal__dialog" role="document">
      <header class="wf-modal__head">
        <h3 id="wf-modal-title">Was ist ein Wireframe?</h3>
        <button class="wf-modal__close" type="button" aria-label="Schließen" data-close>×</button>
      </header>
      <div class="wf-modal__body">
        <figure class="wf-modal__media">
          <img id="wf-step-img" alt="Wireframe Darstellung" loading="lazy" />
          <figcaption id="wf-step-cap" class="visually-hidden"></figcaption>
        </figure>
        <div class="wf-modal__copy">
          <h4 id="wf-step-title"></h4>
          <p id="wf-step-text"></p>
          <nav class="wf-stepper" aria-label="Wireframe Gründe">
            <button class="wf-stepper__btn" id="wf-prev" type="button" aria-label="Vorheriger Schritt">‹</button>
            <ul class="wf-dots" id="wf-dots" role="tablist" aria-label="Schritte"></ul>
            <button class="wf-stepper__btn" id="wf-next" type="button" aria-label="Nächster Schritt">›</button>
          </nav>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
/* ===== Tokens ===== */
:root{
  --wf-maxw: 1120px;
  --wf-shadow-sm: 0 2px 8px rgba(0,0,0,.06);
  --wf-shadow-md: 0 8px 24px rgba(0,0,0,.08);
  --wf-card-bg: #fff;
  --wf-border-ink: rgba(0,0,0,.28); /* dunklere Outline */
  --wf-gray: #f7f7f9; /* Karten-Grau */
  --wf-orange: #ff7a1a;
  --wf-orange-2: #ff6a00;
}

/* ===== Section (Aurora‑Typo & weiß) ===== */
.wf-section{ background:#fff; color:#0b0c10; border-block:1px solid var(--border); font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif; -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; text-rendering:optimizeLegibility; position:relative; overflow:clip; }
.container{ max-width:var(--wf-maxw); margin-inline:auto; padding-inline:clamp(1rem,3vw,2rem); }

/* ===== Grid ===== */
.wf-grid{ display:grid; grid-template-columns:minmax(0,.95fr) minmax(0,1.05fr); gap:clamp(1.2rem,3vw,3rem); padding-block:clamp(2.4rem,5.8vw,6rem); align-items:start; }
.wf-left{ display:grid; gap:1rem; align-content:start; }
.wf-right{ display:grid; gap:clamp(1rem,2.2vw,1.6rem); align-content:start; }
@media (max-width:980px){ .wf-grid{ grid-template-columns:1fr; } }

/* ===== Eyebrow (orange, kurz) ===== */
.wf-badge{ display:inline-grid; place-items:center; padding:.28rem .58rem; border-radius:999px; color:#fff; background: linear-gradient(90deg, var(--wf-orange), var(--wf-orange-2)); box-shadow: 0 8px 24px rgba(255,106,0,.18); }
.wf-badge__pill{ font-weight:900; letter-spacing:-.01em; font-size:.9rem; white-space:nowrap; }
/* Compact modifier: noch schmaler */
.wf-badge--compact{ padding:.22rem .5rem; }
.wf-badge--compact .wf-badge__pill{ font-size:.86rem; letter-spacing:-.005em; }
.wf-badge__pill{ font-weight:900; letter-spacing:-.01em; font-size:.92rem; white-space:nowrap; }

/* ===== Headline & Subline ===== */
.section-title{ font-size:clamp(1.9rem,1.4rem + 1.6vw,2.8rem); font-weight:900; letter-spacing:-0.02em; line-height:1.12; margin:.2rem 0 .6rem; color:#0b0c10; text-wrap:balance; }
.section-subtitle{ position:relative; color:#0f1729; max-width:62rem; margin:0 0 clamp(1.4rem,2.2vw,2rem); line-height:1.78; font-size:clamp(1.06rem,1rem + .6vw,1.22rem); letter-spacing:.004em; text-wrap:pretty; }
.wf-muted{ color:var(--muted); font-weight:500; }

/* ===== Steps (3 Boxen, stärkere Outline, leicht grau) ===== */
.wf-steps{ list-style:none; padding:0; margin:0; display:grid; gap:.9rem; }
.wf-step{ position:relative; display:grid; grid-template-columns:auto 1fr; gap:.9rem; align-items:start; padding:1rem 1.1rem; border:2px solid var(--wf-border-ink); border-radius:16px; background:var(--wf-gray); box-shadow: 0 2px 8px rgba(0,0,0,.04); }
.wf-step strong{ font-weight:900; letter-spacing:-.01em; }
.wf-step-num{ display:grid; place-items:center; width:36px; height:36px; border-radius:50%; font-weight:800; background:#fff; border:2px solid var(--wf-border-ink); box-shadow: 0 2px 6px rgba(0,0,0,.06); }
.wf-step-copy p{ margin:.25rem 0 0; color: color-mix(in oklab, #0f1729 88%, #000 12%); line-height:1.6; }

/* ===== CTA Area ===== */
.wf-actions--global{ grid-column:1 / -1; display:grid; place-items:center; gap:.5rem; margin-top:clamp(1.1rem,2.4vw,1.8rem); }
.wf-actions__inner{ display:grid; grid-auto-flow:column; gap:.8rem; align-items:center; justify-content:center; }
.wf-cta{ justify-self:center; border-radius:14px; }
.wf-btn{ appearance:none; border-radius:14px; padding:.8rem 1rem; font-weight:700; border:2px solid var(--wf-border-ink); background:#fff; color:#0b0c10; box-shadow:0 2px 8px rgba(0,0,0,.04); cursor:pointer; }
.wf-btn--ghost{ background:#fff; }
.wf-cta-note{ font-size:.92rem; color: var(--muted); }
@media (max-width:560px){ .wf-actions__inner{ grid-auto-flow:row; } }

/* ===== Modal ===== */
.wf-modal[hidden]{ display:none; }
.wf-modal{ position:fixed; inset:0; z-index:1000; display:grid; place-items:center; }
.wf-modal__backdrop{ position:absolute; inset:0; background: rgba(0,0,0,.5); }
.wf-modal__dialog{ position:relative; z-index:1; width:min(680px, 96vw); background: var(--wf-gray); color:#0b0c10; border:2px solid var(--wf-border-ink); border-radius:16px; box-shadow: var(--wf-shadow-sm); overflow:hidden; }
.wf-modal__head{ display:grid; grid-template-columns: 1fr auto; gap:.6rem; align-items:center; padding:1rem 1rem; border-bottom:1px solid color-mix(in oklab, #000 10%, transparent); background: linear-gradient(180deg, #fff, #fafafa); }
.wf-modal__head h3{ font-size:1.25rem; font-weight:900; letter-spacing:-.01em; margin:0; }
.wf-modal__close{ font-size:1.4rem; line-height:1; border:none; background:transparent; cursor:pointer; padding:.2rem .4rem; border-radius:10px; }
.wf-modal__body{ display:grid; grid-template-columns: 1fr 1.1fr; gap:1rem; padding:1rem 1.1rem; }
.wf-modal__media{ background:#fafafa; border:1px solid var(--wf-border-ink); border-radius:14px; padding:.6rem; display:grid; place-items:center; }
.wf-modal__media img{ width:100%; height:auto; border-radius:10px; display:block; }
.wf-modal__copy h4{ margin:.2rem 0 .4rem; font-size:1.15rem; font-weight:900; letter-spacing:-.01em; }
.wf-modal__copy p{ margin:0 0 .8rem; line-height:1.7; }
.wf-stepper{ display:grid; grid-template-columns:auto 1fr auto; gap:.6rem; align-items:center; }
.wf-stepper__btn{ width:38px; height:38px; border-radius:10px; border:2px solid var(--wf-border-ink); background:#fff; font-weight:900; }
.wf-dots{ display:flex; gap:.35rem; align-items:center; justify-content:center; list-style:none; padding:0; margin:0; }
.wf-dots li{ width:10px; height:10px; border-radius:999px; border:2px solid var(--wf-border-ink); background:#fff; opacity:.6; }
.wf-dots li[aria-selected="true"]{ opacity:1; background: var(--wf-orange); border-color: var(--wf-orange-2); }
@media (max-width: 640px){ .wf-modal__body{ grid-template-columns: 1fr; } }

/* ===== Focus & Motion ===== */
:where(.wf-modal__close, .wf-stepper__btn, .wf-btn, .wf-cta, [role="dialog"]) :focus-visible{ outline:3px solid color-mix(in oklab, var(--accent) 35%, #7aa7ff 20%); outline-offset:3px; }
@media (prefers-reduced-motion: no-preference){
  .wf-btn, .wf-cta{ transition: transform .12s ease, box-shadow .2s ease; }
  .wf-btn:hover{ transform: translateY(-1px); box-shadow: 0 8px 18px rgba(0,0,0,.10); }
}

/* ===== Dark Mode ===== */
:root[data-theme="dark"] .wf-modal__dialog{ background:#0e0e10; color:#fff; }
:root[data-theme="dark"] .wf-modal__media{ background:#0f0f12; }

/* Hard Black + White Dark Mode */
:root[data-theme="dark"]{
  --wf-border-ink: rgba(255,255,255,.32);
}
:root[data-theme="dark"] .wf-section{
  background:#000000;     /* schwarz */
  color:#ffffff;          /* weiß */
  border-color: rgba(255,255,255,.12);
}

/* Karten/Steps */
:root[data-theme="dark"] .wf-step{
  background:#000000;
  border:2px solid var(--wf-border-ink);
  box-shadow:none;
}
:root[data-theme="dark"] .wf-step-copy p{ color:rgba(255,255,255,.88); }
:root[data-theme="dark"] .wf-step-num{
  background:#000000; color:#ffffff;
  border:2px solid var(--wf-border-ink); box-shadow:none;
}

/* Buttons & CTA-Note */
:root[data-theme="dark"] .wf-btn{
  background:#000000; color:#ffffff;
  border:2px solid var(--wf-border-ink); box-shadow:none;
}
:root[data-theme="dark"] .wf-btn:hover{ box-shadow:0 0 0 2px rgba(255,255,255,.06) inset; }
:root[data-theme="dark"] .wf-cta-note{ color:rgba(255,255,255,.72); }

/* Modal */
:root[data-theme="dark"] .wf-modal__dialog{
  background:#000000; color:#ffffff;
  border:2px solid var(--wf-border-ink); box-shadow:none;
}
:root[data-theme="dark"] .wf-modal__head{
  background:linear-gradient(180deg,#000,#0a0a0a);
  border-bottom-color:rgba(255,255,255,.12);
}
:root[data-theme="dark"] .wf-modal__media{
  background:#000000; border-color:var(--wf-border-ink);
}
:root[data-theme="dark"] .wf-dots li{
  background:#000000; border-color:var(--wf-border-ink);
}
:root[data-theme="dark"] .wf-dots li[aria-selected="true"]{
  background:#ffffff; border-color:#ffffff;
}
/* Eyebrow/Pill kompakt halten – nicht volle Breite */
.wf-badge{
  display: inline-grid;
  place-items: center;
  padding: .22rem .5rem;      /* kompakter */
  border-radius: 999px;
  background: linear-gradient(90deg, var(--wf-orange), var(--wf-orange-2));
  color: #fff;
  width: max-content;         /* nur so breit wie der Text */
  inline-size: max-content;   /* Safari/Fallback */
  justify-self: center;        /* links ausrichten; für zentriert -> center */
}

/* (optional, noch kompaktere Typo) */
.wf-badge .wf-badge__pill{
  font-weight: 900;
  font-size: .86rem;
  letter-spacing: -.005em;
  white-space: nowrap;
}
/* Ganze Pill grün, wenn Checkbox angehakt ist */
.pill:has(input[type="checkbox"]:checked){
  background: var(--pill-green) !important;
  color: var(--pill-green-ink) !important;
  border-color: var(--pill-green) !important;
  box-shadow: 0 6px 18px rgba(0,200,81,.25);
}

/* Tastaturfokus + checked: Fokusring bleibt klar */
.pill:has(input[type="checkbox"]:checked):focus-within{
  box-shadow:
    0 0 0 4px color-mix(in oklab, var(--pill-green) 55%, transparent),
    0 8px 22px rgba(0,200,81,.25) !important;
}

</style>

<script>
/* CTA Busy Demo */
(function(){
  const sec = document.getElementById('wireframe-offer');
  const btn = sec?.querySelector('.wf-actions--global .wf-cta');
  if(btn){ btn.addEventListener('click', ()=>{ btn.setAttribute('aria-busy','true'); setTimeout(()=>{ btn.removeAttribute('aria-busy'); }, 800); }, {passive:true}); }
})();

/* Modal Logic: 5 Schritte mit Bild + Text */
(function(){
  const infoBtn = document.getElementById('wf-info-btn');
  const modal = document.getElementById('wf-modal');
  if(!infoBtn || !modal) return;

  const img = modal.querySelector('#wf-step-img');
  const cap = modal.querySelector('#wf-step-cap');
  const title = modal.querySelector('#wf-step-title');
  const text = modal.querySelector('#wf-step-text');
  const dots = modal.querySelector('#wf-dots');
  const prev = modal.querySelector('#wf-prev');
  const next = modal.querySelector('#wf-next');
  const closers = modal.querySelectorAll('[data-close]');

  // 5 Beispiel-Schritte – Images als Inline-SVG (Platzhalter) in Data-URIs
  const svg = (label)=>{
    const svgStr = `<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 420'><defs><linearGradient id='g' x1='0' y1='0' x2='1' y2='1'><stop offset='0' stop-color='%23ffffff'/><stop offset='1' stop-color='%23f0f0f5'/></linearGradient></defs><rect width='640' height='420' fill='url(%23g)'/><rect x='40' y='40' width='560' height='340' rx='10' ry='10' fill='none' stroke='%23999' stroke-width='3'/><rect x='60' y='60' width='200' height='140' rx='8' fill='%23e5e7eb'/><rect x='280' y='60' width='300' height='24' rx='6' fill='%23e5e7eb'/><rect x='280' y='96' width='260' height='18' rx='6' fill='%23edeff5'/><rect x='60' y='220' width='520' height='18' rx='6' fill='%23e5e7eb'/><rect x='60' y='250' width='380' height='18' rx='6' fill='%23e5e7eb'/><rect x='60' y='280' width='460' height='18' rx='6' fill='%23e5e7eb'/><text x='50%' y='390' text-anchor='middle' font-family='system-ui, -apple-system, Segoe UI, Roboto' font-size='18' fill='%23666'>${label}</text></svg>`;
    return 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svgStr);
  };

  const steps = [
  { title: 'Sofort gemeinsames Bild', text: 'Wireframes geben dir und uns sofort die gleiche visuelle Referenz. Kein Rätselraten mehr – Flows, Prioritäten und Inhalte werden klar, bevor Zeit in Pixel fließt.', img: svg('Gemeinsames Bild') },
  { title: 'Live‑Link & transparenter Fortschritt', text: 'Du bekommst einen Live‑Link (z. B. Figma). Wenn du einwilligst, siehst du dort jede Änderung in Echtzeit: neue Screens, Kommentare, Entscheidungen. So bleiben alle im Takt.', img: svg('Live‑Link & Progress') },
  { title: 'Risiko senken – schneller testen', text: 'Wir entdecken Lücken früh, testen Hypothesen in Stunden statt Wochen und sparen Entwicklungskosten. Änderungen sind im Wireframe günstig und schnell.', img: svg('Risiko runter, Tempo rauf') },
  { title: 'Von Struktur zu Erlebnis', text: 'Wireframes fokussieren UX, IA und Microcopy. Wenn die Struktur sitzt, ist die fertige Website nicht mehr weit – UI‑Design & Dev bauen direkt darauf auf.', img: svg('Struktur → Erlebnis') },
  { title: 'Sauberer Handoff in die Umsetzung', text: 'Kommentierte Flows + klare Entscheidungen führen zu weniger Rückfragen. Developer‑Handoff ist glatter, und Go‑Live rückt deutlich näher.', img: svg('Handoff & Go‑Live') },
];

  let idx = 0; let lastFocus = null;

  function render(i){
    const s = steps[i];
    img.src = s.img; cap.textContent = s.title; title.textContent = s.title; text.textContent = s.text;
    [...dots.children].forEach((li, n)=>{ li.setAttribute('aria-selected', String(n===i)); });
  }

  function buildDots(){
    dots.innerHTML = '';
    steps.forEach((_, n)=>{
      const li = document.createElement('li');
      li.role = 'tab'; li.tabIndex = 0; li.setAttribute('aria-selected', String(n===0));
      li.addEventListener('click', ()=>{ idx = n; render(idx); });
      li.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); idx=n; render(idx); }});
      dots.appendChild(li);
    });
  }

  function open(){
    lastFocus = document.activeElement; idx = 0; buildDots(); render(idx);
    modal.hidden = false; infoBtn.setAttribute('aria-expanded','true');
    modal.querySelector('.wf-modal__close').focus();
    document.body.style.overflow = 'hidden';
  }
  function close(){
    modal.hidden = true; infoBtn.setAttribute('aria-expanded','false');
    document.body.style.overflow = '';
    if(lastFocus && lastFocus.focus) lastFocus.focus();
  }

  prev.addEventListener('click', ()=>{ idx = (idx+steps.length-1)%steps.length; render(idx); });
  next.addEventListener('click', ()=>{ idx = (idx+1)%steps.length; render(idx); });
  closers.forEach(el=> el.addEventListener('click', close));
  infoBtn.addEventListener('click', open);
  document.addEventListener('keydown', (e)=>{ if(!modal.hidden && e.key==='Escape'){ close(); } });
})();
</script>











<!-- =========================================================
     SECTION: METRICS — ID: metrics
     Dark-Mode-ready: nutzt globale CSS-Variablen
========================================================== -->
<section id="metrics">
  <style>
    #metrics, #metrics *{ box-sizing:border-box; }
    #metrics{
      background: var(--surface);
      color: var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
    }
    #metrics .container{ max-width:min(95vw, 1340px); margin-inline:auto; padding-inline:1rem; }
    #metrics .section-pad{ padding:2.25rem 0 2.5rem; }

    /* ===== Intro ===== */
    #metrics .intro{ text-align:center; margin-bottom:2.25rem; }
    #metrics .eyebrow{
      display:inline-flex; align-items:center; gap:.5rem;
      padding:.4rem .7rem; border-radius:999px; font-weight:700; font-size:.85rem;
      background: linear-gradient(90deg,
        color-mix(in oklab, var(--primary) 85%, var(--accent)),
        var(--primary),
        color-mix(in oklab, var(--primary) 85%, var(--accent))
      );
      color: var(--on-primary, #fff);
      box-shadow: inset 0 0 0 1.5px color-mix(in oklab, var(--primary) 80%, transparent);
    }
    #metrics .title{
      font-size:clamp(2.1rem, 4.6vw, 3.2rem); font-weight:900; letter-spacing:-.02em; margin:.6rem 0 .35rem;
    }
    #metrics .title .hilite{
      background: linear-gradient(90deg,var(--text),color-mix(in oklab, var(--text) 60%, transparent));
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    #metrics .sub{
      color: var(--muted); max-width:56rem; margin:0 auto; line-height:1.6; font-size:clamp(1rem,2vw,1.05rem);
    }

    /* Badges */
    #metrics .badges{ display:flex; flex-wrap:wrap; gap:.5rem; justify-content:center; margin-top:1rem; }
    #metrics .pill{
      display:inline-flex; align-items:center; gap:.45rem; padding:.42rem .7rem; border-radius:999px;
      border:1px solid var(--border);
      background: color-mix(in oklab, var(--text) 4%, var(--surface));
      font-weight:700; font-size:.9rem; color: var(--text);
    }
    #metrics .pill .dot{
      width:.5rem; height:.5rem; border-radius:999px;
      background: var(--success, #16a34a);
      box-shadow:0 0 0 2px color-mix(in oklab, var(--success, #16a34a) 30%, transparent);
    }

    /* Toolbar */
    #metrics .toolbar{
      display:flex; flex-wrap:wrap; align-items:center; justify-content:space-between; gap:.8rem; padding:.8rem 0 1.2rem;
      border-top:1px solid var(--border); border-bottom:1px solid var(--border); margin:0 0 1rem;
    }
    #metrics .vital{
      display:inline-flex; align-items:center; gap:.4rem; padding:.35rem .55rem; border-radius:999px;
      border:1px solid var(--border);
      background: color-mix(in oklab, var(--text) 4%, var(--surface));
      font-size:.85rem;
    }
    #metrics .vital.good{ box-shadow: inset 0 0 0 1px color-mix(in oklab, var(--success, #16a34a) 25%, transparent); }
    #metrics .muted{ color: var(--muted); }

    /* ===== Karten (untere Gruppe) ===== */
    #metrics .cards{ display:grid; grid-template-columns:repeat(auto-fit, minmax(300px,1fr)); gap:clamp(1rem,2vw,1.25rem); }
    #metrics .glass{
      position:relative; border-radius:20px; padding:1.4rem;
      background: color-mix(in oklab, var(--surface) 70%, transparent);
      border:1px solid var(--border);
      box-shadow:0 10px 20px color-mix(in oklab, var(--text) 6%, transparent), inset 0 1px 0 color-mix(in oklab, #fff 60%, transparent);
      backdrop-filter: blur(10px) saturate(120%);
    }

    /* Typo Grundwerte */
    #metrics .h3{ font-size:1.2rem; font-weight:900; margin:0 0 .35rem; letter-spacing:-.01em; }
    #metrics .ring-row{ display:grid; grid-template-columns:120px 1fr; gap:1rem; align-items:center; margin-bottom:.6rem; }
    #metrics .ring{ width:120px; height:120px; border-radius:50%; display:block; }
    #metrics .ring-info{ color: var(--muted); }

    #metrics .meters{ display:grid; gap:.55rem; margin-top: 1.6rem; }
    #metrics .meter-row{ display:grid; grid-template-columns:minmax(72px,120px) 1fr auto; gap:.7rem; align-items:center; }
    #metrics .meter-row label{ font-weight:800; letter-spacing:-.01em; }

    /* ====== GLASS-LOOK für ALLE meter + weiße Scores rechts ====== */
    #metrics meter{
      -webkit-appearance: none; appearance: none;
      width:100%; height:12px; border:none; border-radius:999px;
      background: transparent;
      position:relative;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.5), inset 0 -1px 0 rgba(0,0,0,.06);
    }
    /* Track */
    #metrics meter::-webkit-meter-bar{
      background: linear-gradient(180deg, rgba(255,255,255,.22), rgba(255,255,255,.08));
      border-radius:999px;
      box-shadow: inset 0 2px 6px rgba(0,0,0,.12), 0 8px 20px rgba(0,0,0,.08);
      border:1px solid color-mix(in oklab, var(--text) 12%, transparent);
    }
    /* Value überall WEISS */
    #metrics meter::-webkit-meter-optimum-value,
    #metrics meter::-webkit-meter-suboptimum-value,
    #metrics meter::-webkit-meter-even-less-good-value{
      background: linear-gradient(90deg, rgba(255,255,255,.98), rgba(255,255,255,.9)) !important;
      border-radius:999px;
      box-shadow: inset 0 0 6px rgba(255,255,255,.45), 0 4px 14px rgba(255,255,255,.28);
    }
    /* Firefox */
    #metrics meter::-moz-meter-bar{
      background: linear-gradient(90deg, rgba(255,255,255,.98), rgba(255,255,255,.9)) !important;
      border-radius:999px;
      box-shadow: inset 0 0 6px rgba(255,255,255,.45), 0 4px 14px rgba(255,255,255,.28);
    }
    /* Rechte Score-Spalte IMMER weiß */
    #metrics .meter-row > span{
      color:#fff !important; font-weight:900; letter-spacing:-.01em;
      text-shadow: 0 1px 1px rgba(0,0,0,.25);
      font-variant-numeric: tabular-nums;
    }

    /* ===== OBERERE Ergebnis-Karten ===== */
    #metrics .results-steps{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: clamp(1rem, 2vw, 1.25rem);
      margin:1.25rem auto 1.6rem;
    }
    #metrics .result-step{
      position:relative; overflow:hidden; color:#fff;
      border-radius:20px; border:1px solid rgba(70,70,70,.14);
      padding: 1.8rem 1.4rem; box-shadow:0 0 0 rgba(0,0,0,0);
      cursor: default;
    }
    #metrics .result-inner{ position:relative; z-index:2; display:flex; flex-direction:column; gap:.55rem; min-width:0; height:100% }
    #metrics .result-step h3{ margin:0; font-size:1.1rem; font-weight:900; letter-spacing:-.01em; line-height:1.35 }
    #metrics .result-step p{ margin:0; font-size:.95rem; line-height:1.6; opacity:.95; color:#fff }
    #metrics .result-step .kpi{ font-feature-settings:"tnum" 1; font-weight:900; letter-spacing:-.01em }
    #metrics .result-step .kpi .val{ font-size: clamp(1.35rem, 2.1vw, 1.6rem) }
    #metrics .result-step .kpi .unit{ opacity:.85; font-weight:800 }
    #metrics .result-step::after{ display:none; }
    /* Farben oben */
    #metrics .result-step.s1{ background:linear-gradient(270deg,#04006c,#6f00ff,#050088); background-size:600% 600% }
    #metrics .result-step.s2{ background:linear-gradient(135deg,#0d0d0d,#000e5c,#0d0d0d); background-size:300% 300% }
    #metrics .result-step.s3{ background:linear-gradient(135deg,#000000,#020127,#000000); background-size:400% 400% }

    /* Feather-Icon Button (nur oben) */
    #metrics .src-btn{
      position:absolute; top:.7rem; right:.7rem;
      display:inline-flex; align-items:center; justify-content:center;
      width:34px; height:34px; border-radius:10px;
      background: color-mix(in oklab, #ffffff 12%, transparent);
      border:1px solid color-mix(in oklab, #ffffff 22%, transparent);
      color:#fff; cursor:pointer; transition: transform .12s ease, background-color .12s ease, border-color .12s ease;
    }
    #metrics .src-btn:focus-visible{ outline:2px solid rgba(255,255,255,.6); outline-offset:2px; }
    @media (hover:hover){ #metrics .src-btn:hover{ transform:translateY(-1px); background: color-mix(in oklab, #ffffff 18%, transparent); } }
    #metrics .src-btn svg{ width:20px; height:20px; stroke: currentColor; fill:none; stroke-width:2; stroke-linecap:round; stroke-linejoin:round; }

    /* Dialog (Quellen) */
    #metrics .src-dialog{
      border:1px solid var(--border);
      border-radius:14px; padding:1rem 1rem 1.1rem; max-width:520px; width:min(92vw,520px);
      background: color-mix(in oklab, var(--surface) 96%, var(--text));
      color: var(--text);
    }
    #metrics .src-dialog::backdrop{ background: rgba(0,0,0,.35); backdrop-filter: blur(2px); }
    #metrics .src-dialog h4{ margin:.1rem 0 .6rem; font-size:1.05rem; font-weight:900; }
    #metrics .src-list{ margin:0; padding-left:1.1rem; line-height:1.55; }
    #metrics .src-list li + li{ margin-top:.35rem; }
    #metrics .src-close{
      display:inline-flex; align-items:center; gap:.4rem; margin-top:.9rem;
      padding:.55rem .8rem; border-radius:10px; border:1px solid var(--border);
      background: var(--surface); color: var(--text); cursor:pointer; font-weight:700;
    }

    /* ===== UNTERE Karten – gleicher Look/Farben, KEIN Icon + bessere Typo ===== */
    #metrics .glass.epic{
      color:#fff; border-radius:20px; padding:1.4rem;
      border:1px solid rgba(70,70,70,.14); box-shadow:0 0 0 rgba(0,0,0,0);
    }
    #metrics .glass.epic.s1{ background:linear-gradient(270deg,#04006c,#6f00ff,#050088); background-size:600% 600% }
    #metrics .glass.epic.s2{ background:linear-gradient(135deg,#0d0d0d,#000e5c,#0d0d0d); background-size:300% 300% }
    #metrics .glass.epic.s3{ background:linear-gradient(135deg, #000000,#010041,#1d004b); background-size:400% 400% }

    /* Typo-Finetuning unten */
    #metrics .glass.epic .h3{
      margin:0; font-weight:900; letter-spacing:-.012em;
      font-size:clamp(1.1rem, 1.9vw, 1.3rem); line-height:1.3; color:#fff;
    }
    #metrics .glass.epic .ring-info{
      color: rgba(255,255,255,.95);
      font-size:.97rem; line-height:1.55; letter-spacing:.002em;
      font-variant-numeric: tabular-nums;
    }
    #metrics .glass.epic p.muted{
      color: rgba(255,255,255,.92);
      font-size:.97rem; line-height:1.6; letter-spacing:.001em;
    }
    #metrics .glass.epic .meter-row label{
      color:#fff; font-weight:900; letter-spacing:-.01em;
    }
    #metrics .glass.epic .ring{ filter: drop-shadow(0 4px 14px rgba(0,0,0,.25)); }

    @media (max-width:900px){
      #metrics .results-steps{ grid-template-columns:1fr; gap:1rem }
      #metrics .result-inner{ min-width:0 }
      #metrics .result-step{ padding:1.25rem 1rem }
    }
    /* ===============================
   AURORA-TYPO PATCH (scoped to #metrics)
   Ziel: identische Typo-Sprache wie in aurora
   =============================== */

#metrics{
  /* System-UI Stack wie aurora */
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  font-optical-sizing: auto;
}

/* Headline (entspricht .aurora-title) */
#metrics .title{
  font-size: clamp(2rem, 1.6rem + 2.2vw, 3rem) !important;
  font-weight: 900 !important;
  letter-spacing: -0.02em !important;
  line-height: 1.12 !important;
  margin: .2rem 0 .6rem !important;
  text-wrap: balance !important;
  color: var(--text);
}

/* Subline (entspricht .aurora-subtitle, ohne deren Box-Background) */
#metrics .sub{
  font-size: clamp(1.06rem, 1rem + .6vw, 1.22rem) !important;
  line-height: 1.78 !important;
  letter-spacing: .004em !important;
  text-wrap: pretty !important;
  max-width: 62rem !important;
  margin: 0 auto var(--space-5, 2.4rem) !important;
  color: var(--muted);
}

/* Sekundäre „Eyebrow/Pill“ (leicht angepasst, nur Typo) */
#metrics .eyebrow,
#metrics .pill,
#metrics .vital{
  font-weight: 700 !important;
  letter-spacing: -0.005em !important;
  font-variant-numeric: tabular-nums;
}

/* Karten-Überschriften (entspricht .aether-card h3) */
#metrics .h3,
#metrics .result-step h3{
  font-size: clamp(1.3rem, 1.1rem + .9vw, 1.9rem) !important;
  font-weight: 800 !important;
  letter-spacing: -0.01em !important;
  line-height: 1.32 !important;
  text-wrap: balance !important;
  color: inherit !important; /* bleibt weiß auf den Gradients */
  text-shadow: 0 1px 2px rgba(0,0,0,.25);
}

/* „Lead“ & „Copy“ Feeling für Body in Karten (wie .delta-list .lead/.copy) */
#metrics .glass.epic .ring-info,
#metrics .glass.epic p.muted,
#metrics .result-step p{
  /* Copy-Style */
  font-weight: 690 !important;
  letter-spacing: -0.002em !important;
  font-size: clamp(1.02rem, .98rem + .35vw, 1.16rem) !important;
  line-height: 1.7 !important;
  text-wrap: pretty !important;
  hyphens: auto !important;
  color: rgba(255,255,255,.96) !important; /* auf dunklem Grund */
  text-shadow: 0 1px 2px rgba(0,0,0,.18);
}

/* Label-Zeilen als „Lead“ (kräftig, kompakt) */
#metrics .meter-row label{
  display: block;
  font-weight: 950 !important;
  letter-spacing: -0.01em !important;
  font-size: clamp(1.06rem, 1rem + .5vw, 1.22rem) !important;
  line-height: 1.28 !important;
  text-wrap: balance !important;
  color: #fff !important; /* bleibt auf den epischen Karten weiß */
}

/* KPI-Zahlen prominent wie in aurora (tabular, heavy) */
#metrics .result-step .kpi,
#metrics .glass.epic .kpi{
  font-variant-numeric: tabular-nums;
  font-weight: 950 !important;
  letter-spacing: -0.01em !important;
}

/* Feineres Global-Tuning für Textblöcke */
#metrics p, #metrics li, #metrics .muted{
  text-wrap: pretty;
  hyphens: auto;
}

/* Dark-Mode: Subtle Shine wie aurora (nur Typo-Polish, kein Layout) */
:root[data-theme="dark"] #metrics .title{
  color:#fff !important;
  text-shadow: 0 1px 2px rgba(0,0,0,.35);
}
:root[data-theme="dark"] #metrics .sub{
  color:#e8eeff !important;
}
/* Value überall GRÜN */
#metrics meter::-webkit-meter-optimum-value,
#metrics meter::-webkit-meter-suboptimum-value,
#metrics meter::-webkit-meter-even-less-good-value{
  background: linear-gradient(
    90deg,
    color-mix(in oklab, var(--success, #16a34a) 96%, #fff 4%),
    color-mix(in oklab, var(--success, #16a34a) 88%, #fff 12%)
  ) !important;
  border-radius:999px;
  box-shadow:
    inset 0 0 6px color-mix(in oklab, var(--success, #16a34a) 45%, transparent),
    0 4px 14px color-mix(in oklab, var(--success, #16a34a) 28%, transparent);
}
/* Firefox */
#metrics meter::-moz-meter-bar{
  background: linear-gradient(
    90deg,
    color-mix(in oklab, var(--success, #16a34a) 96%, #fff 4%),
    color-mix(in oklab, var(--success, #16a34a) 88%, #fff 12%)
  ) !important;
  border-radius:999px;
  box-shadow:
    inset 0 0 6px color-mix(in oklab, var(--success, #16a34a) 45%, transparent),
    0 4px 14px color-mix(in oklab, var(--success, #16a34a) 28%, transparent);
}

  </style>

  <!-- HTML -->
  <div class="section-pad" aria-labelledby="metrics-h">
    <div class="container">
      <header class="intro">
        <span class="eyebrow" aria-label="Leistung & Wachstum">Performance treibt Wachstum</span>
        <h2 id="metrics-h" class="title">
          Tempo ist kein Nice-to-have.<span class="hilite">Es verkauft.</span>.
        </h2>
        <p class="sub">
          Sie beeinflusst <strong>Sichtbarkeit (SEO)</strong>, <strong>Conversion</strong>, <strong>Bounce-Rate</strong> und <strong>Betriebskosten</strong>.
          Ich liefere Websites, die die <strong>Core Web Vitals</strong> zuverlässig bestehen – und das sieht man an echten Zahlen.
        </p>

        <div class="badges" role="list" aria-label="Qualitätsmerkmale">
          <span class="pill" role="listitem"><span class="dot" aria-hidden="true"></span> Lighthouse ≥ 95</span>
          <span class="pill" role="listitem"><span class="dot" aria-hidden="true"></span> CWV: Pass</span>
          <span class="pill" role="listitem"><span class="dot" aria-hidden="true"></span> Mobile-First</span>
          <span class="pill" role="listitem"><span class="dot" aria-hidden="true"></span> Real-User-Monitoring</span>
        </div>
      </header>

      <!-- OBERERE Ergebnis-Karten -->
      <div class="results-steps" role="tablist" aria-label="Ergebnisse">
        <article class="result-step s1 is-open" aria-selected="true" aria-expanded="true" aria-controls="res-1">
          <button class="src-btn" data-dialog="src-1" aria-label="Quellen zu Mehr Umsatz öffnen">
            <svg viewBox="0 0 24 24" aria-hidden="true"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg>
          </button>
          <div class="result-inner" id="res-1">
            <div class="kpi"><span class="val">+18–42</span><span class="unit">%</span></div>
            <h3>Mehr Umsatz</h3>
            <p>Conversion-Lift nach Speed-Optimierung.</p>
          </div>
        </article>

        <article class="result-step s2 is-open" aria-selected="true" aria-expanded="true" aria-controls="res-2">
          <button class="src-btn" data-dialog="src-2" aria-label="Quellen zu Organischer Traffic öffnen">
            <svg viewBox="0 0 24 24" aria-hidden="true"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg>
          </button>
          <div class="result-inner" id="res-2">
            <div class="kpi"><span class="val">+22–65</span><span class="unit">%</span></div>
            <h3>Organischer Traffic</h3>
            <p>Impressionen bei stabilem „CWV Pass“.</p>
          </div>
        </article>

        <article class="result-step s3 is-open" aria-selected="true" aria-expanded="true" aria-controls="res-3">
          <button class="src-btn" data-dialog="src-3" aria-label="Quellen zu Weniger Kosten öffnen">
            <svg viewBox="0 0 24 24" aria-hidden="true"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg>
          </button>
          <div class="result-inner" id="res-3">
            <div class="kpi"><span class="val">−25–40</span><span class="unit">%</span></div>
            <h3>Weniger Kosten</h3>
            <p>Weniger Bandbreite & Rendering-Zeit.</p>
          </div>
        </article>
      </div>

      <!-- UNTERE Karten -->
      <div class="cards" role="region" aria-labelledby="metrics-h">
        <article class="glass epic s1" role="group" aria-labelledby="speed-h3" aria-describedby="speed-note">
          <h3 id="speed-h3" class="h3">Blitzschnelle Ladezeiten</h3>
          <figure class="ring-row" aria-labelledby="speed-fig">
            <canvas class="ring" aria-hidden="true" data-value="100" data-label="Pagespeed"></canvas>
            <figcaption id="speed-fig" class="ring-info">
              <strong>Mobile: <span id="m-mobile">100</span> · Desktop: <span id="m-desktop">97</span> · SEO: <span id="m-seo">94</span></strong><br>Lighthouse-Bewertung (aktuell)
            </figcaption>
          </figure>
          <div class="meters" aria-label="Detailwerte Ladezeiten">
            <div class="meter-row">
              <label for="meter-mobile">Mobile</label>
              <meter id="meter-mobile" min="0" max="100" low="50" high="90" optimum="100" value="100">100 von 100</meter>
              <span aria-hidden="true">100/100</span>
            </div>
            <div class="meter-row">
              <label for="meter-desktop">Desktop</label>
              <meter id="meter-desktop" min="0" max="100" low="50" high="90" optimum="100" value="97">97 von 100</meter>
              <span aria-hidden="true">97/100</span>
            </div>
            <div class="meter-row">
              <label for="meter-seo">SEO</label>
              <meter id="meter-seo" min="0" max="100" low="50" high="90" optimum="100" value="94">94 von 100</meter>
              <span aria-hidden="true">94/100</span>
            </div>
          </div>
          <p id="speed-note" class="muted">Schnelle Ladezeiten senken Absprungraten, verbessern Core Web Vitals und erhöhen die Sichtbarkeit.</p>
        </article>

        <article class="glass epic s2" role="group" aria-labelledby="live-h3">
          <h3 id="live-h3" class="h3">Echtzeit-Performance</h3>
          <figure class="ring-row" aria-labelledby="live-fig">
            <canvas class="ring" aria-hidden="true" data-value="98" data-label="Live"></canvas>
            <figcaption id="live-fig" class="ring-info"><strong>Live gemessen</strong><br>In der Regel 98+ bei Lighthouse &amp; CWV</figcaption>
          </figure>
          <div class="meters" aria-label="Detailwerte">
            <div class="meter-row">
              <label for="meter-live">Live-Score</label>
              <meter id="meter-live" min="0" max="100" low="50" high="90" optimum="100" value="98">98 von 100</meter>
              <span aria-hidden="true">98/100</span>
            </div>
          </div>
          <p class="muted">Stabile Echtzeit-Leistung steigert Zufriedenheit, Rankings und Conversion – besonders mobil.</p>
        </article>

        <article class="glass epic s3" role="group" aria-labelledby="a11y-h3">
          <h3 id="a11y-h3" class="h3">Barrierefreiheit</h3>
          <figure class="ring-row" aria-labelledby="a11y-fig">
            <canvas class="ring" aria-hidden="true" data-value="95" data-label="A11Y"></canvas>
            <figcaption id="a11y-fig" class="ring-info"><strong>Zugänglich für alle</strong><br>Kontrast, Tastaturzugriff, Screenreader-Support ✔️</figcaption>
          </figure>
          <div class="meters">
            <div class="meter-row">
              <label for="meter-a11y">A11y-Score</label>
              <meter id="meter-a11y" min="0" max="100" low="50" high="90" optimum="100" value="95">95 von 100</meter>
              <span aria-hidden="true">95/100</span>
            </div>
          </div>
          <p class="muted">Eine barrierefreie Website ist inklusiv, rechtssicherer und SEO-freundlicher.</p>
        </article>
      </div>

      <!-- Dialoge: Quellen (oben) -->
      <dialog id="src-1" class="src-dialog" aria-labelledby="src-1-h">
        <h4 id="src-1-h">Quellen – Mehr Umsatz (Conversion-Lift)</h4>
        <ul class="src-list">
          <li><a href="#" target="_blank" rel="noopener">Deloitte: “Milliseconds Make Millions”</a></li>
          <li><a href="#" target="_blank" rel="noopener">Think with Google: Mobile Speed & Conversion</a></li>
          <li><a href="#" target="_blank" rel="noopener">Akamai: Online Retail Performance</a></li>
        </ul>
        <button class="src-close" data-close="src-1">Schließen</button>
      </dialog>

      <dialog id="src-2" class="src-dialog" aria-labelledby="src-2-h">
        <h4 id="src-2-h">Quellen – Organischer Traffic (SEO/CWV)</h4>
        <ul class="src-list">
          <li><a href="#" target="_blank" rel="noopener">Google Search Central: Core Web Vitals</a></li>
          <li><a href="#" target="_blank" rel="noopener">web.dev: CWV & Search</a></li>
          <li><a href="#" target="_blank" rel="noopener">Case Studies: CWV Pass</a></li>
        </ul>
        <button class="src-close" data-close="src-2">Schließen</button>
      </dialog>

      <dialog id="src-3" class="src-dialog" aria-labelledby="src-3-h">
        <h4 id="src-3-h">Quellen – Weniger Kosten (Bandbreite/Rendering)</h4>
        <ul class="src-list">
          <li><a href="#" target="_blank" rel="noopener">web.dev: Performance Budgets</a></li>
          <li><a href="#" target="_blank" rel="noopener">CDN-Reports: Caching & Transfer</a></li>
          <li><a href="#" target="_blank" rel="noopener">Engineering-Blogs (Shopify, Pinterest)</a></li>
        </ul>
        <button class="src-close" data-close="src-3">Schließen</button>
      </dialog>

    </div>
  </div>

  <!-- JS (keine Scroll/GSAP; Ringe direkt zeichnen, in WEISS) -->
  <script>
    (function(){
      const section = document.getElementById('metrics');

 const css = getComputedStyle(section);
const col = (name, fallback) => (css.getPropertyValue(name).trim() || fallback);
const textColor = col('--text', '#111');
const borderColor = col('--border', 'rgba(255,255,255,.35)');
const ringColor = col('--success', '#16a34a'); // Ring in GRÜN

function baseStroke(){ return borderColor; } // <<<< wieder rein

function grad(ctx,size){
  const g = ctx.createLinearGradient(0,0,size,0);
  g.addColorStop(0, ringColor);
  g.addColorStop(.55, ringColor);
  g.addColorStop(1, ringColor);
  return g;
}



      // Ringe SOFORT zeichnen
      const rings = section.querySelectorAll('.ring');
      rings.forEach(cv=>{
        const val = Math.min(100, Math.max(0, parseInt(cv.dataset.value)||0));
        const label = cv.dataset.label || '';
        const ctx = cv.getContext('2d', { alpha:true });
        const size = 120, line = 10; cv.width = size; cv.height = size; const r = (size/2) - line;

        ctx.clearRect(0,0,size,size);
        // Track
        ctx.lineWidth = line;
        ctx.strokeStyle = baseStroke();
        
        ctx.beginPath(); ctx.arc(size/2,size/2,r,0,Math.PI*2); ctx.stroke();

        // Value in WEISS
        ctx.lineCap = 'round';
        ctx.strokeStyle = grad(ctx,size);
        ctx.beginPath();
        const start = -Math.PI/2; const end = start + (val/100)*Math.PI*2;
        ctx.arc(size/2,size/2,r,start,end); ctx.stroke();

        // Textfarbe je nach Card
        const isDark = !!cv.closest('.glass.epic') || !!cv.closest('.result-step');
        ctx.fillStyle = isDark ? '#fff' : textColor;
        ctx.textAlign = 'center'; ctx.textBaseline='middle';
        ctx.font = '700 20px system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif';
        ctx.fillText(val+'%', size/2, size/2 - 4);
        if(label){
          ctx.font = '12px system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif';
          ctx.fillText(label, size/2, size/2 + 16);
        }
      });

      // Obere Karten bleiben offen
      document.querySelectorAll('.results-steps .result-step').forEach(c=>{
        c.classList.add('is-open');
        c.setAttribute('aria-selected','true');
        c.setAttribute('aria-expanded','true');
      });

      // Quellen-Dialoge
      function openDialog(id){
        const dlg = document.getElementById(id);
        if (!dlg) return;
        if (typeof dlg.showModal === 'function') dlg.showModal();
        else dlg.setAttribute('open','');
      }
      function closeDialog(id){
        const dlg = document.getElementById(id);
        if (!dlg) return;
        if (typeof dlg.close === 'function') dlg.close();
        else dlg.removeAttribute('open');
      }
      section.querySelectorAll('.src-btn').forEach(btn=>{
        btn.addEventListener('click', ()=> openDialog(btn.getAttribute('data-dialog')));
      });
      section.querySelectorAll('.src-close').forEach(btn=>{
        btn.addEventListener('click', ()=> closeDialog(btn.getAttribute('data-close')));
      });
      section.querySelectorAll('.src-dialog').forEach(dlg=>{
        dlg.addEventListener('click', (e)=>{
          const rect = dlg.getBoundingClientRect();
          const outside = e.clientX < rect.left || e.clientX > rect.right || e.clientY < rect.top || e.clientY > rect.bottom;
          if (outside) { try{ dlg.close(); }catch(_){} }
        });
      });
    })();
  </script>

  <!-- JSON-LD -->
  <script type="application/ld+json" id="metrics-jsonld">
    {
      "@context": "https://schema.org",
      "@type": "webdesignElement",
      "name": "Lighthouse & Core Web Vitals",
      "cssSelector": "#metrics",
      "isAccessibleForFree": true,
      "measurementTechnique": "Google Lighthouse + Core Web Vitals (field & lab)"
    }
  </script>
</section>






<!-- =============================================
     Kontakt + Video + Testimonials
     Wizard (nur: Kostenloses Wireframe)
     – klickbare Karte, CTA, Countdown, a11y, Formspree
     ============================================= -->
<section class="kontakt-testimonial-section" id="kontakt">
  <div class="kontakt-testimonial-wrapper">
    <!-- Kontaktbereich -->
    <div class="kontakt-area">
      <h2 class="section-title">
        Sichere dir jetzt dein <span style="white-space:nowrap">kostenloses Wireframe
      </h2>

      <p class="kontakt-subline">
        Unverbindlich. 0 €. Klickbares, webreifes Wireframe nach einem kurzen Erstgespräch innerhalb von 48h.
        <span style="display:block;font-weight:800;margin-top:.25rem">Nur für kurze Zeit verfügbar.</span>
      </p>

      <!-- =====================
           Wizard Formular
           ===================== -->
      <form action="https://formspree.io/f/xqapdvaq" method="POST" class="kontakt-form" id="kontaktForm" novalidate>

<!-- STEP 1: Einzige Leistungswahl (alles klickbar) -->
<fieldset class="form-step active" data-step="1" aria-labelledby="step1Title">
  <legend id="step1Title" class="sr-only">Leistung wählen</legend>

  <!-- Countdown + Social proof -->
  <div class="wf-urgency" role="status" aria-live="polite">
    <div class="wf-countdown">
      Angebot endet in <strong><span id="wfTimer">48:00:00</span></strong>
    </div>
    <div class="wf-slots" id="wfSlots">Diese Woche begrenzte Slots</div>
  </div>

  <!-- Volle Breite, eine Option -->
  <div class="grid-choices single" role="radiogroup" aria-label="Leistung wählen">
    <!-- Entfernt: class="selected" -->
<label class="choice wf-card hero" tabindex="0" id="choiceWire" aria-describedby="wireDesc">
  <input type="radio" name="service" value="Kostenloses Wireframe" data-toggle="wire" />
  <div class="wf-card-head">
    <span class="title">Kostenloses Wireframe sichern</span>
    <span class="wf-badge">0 €</span>
  </div>
  <small id="wireDesc">klickbar, webreif, Lieferung ≤ 2 Tage – 0 €</small>

  <button type="button" class="cta-inline" id="ctaInline">Jetzt kostenlos sichern</button>
</label>

  </div>

  <p class="legal-hint" style="text-align:center;margin-top:.6rem">
    Wenn du <strong>keine Weiterarbeit wünschst</strong>, wird das Wireframe <strong>gelöscht</strong>.
    <strong>Rechte</strong> an Wireframes & Konzepten verbleiben bis zur Beauftragung <strong>bei uns</strong>.
  </p>
</fieldset>

<!-- Entfernt: Sticky Mobile CTA unter den Buttons -->
<!-- <a href="#kontakt" class="wf-sticky-cta" id="wfStickyCta" aria-label="Kostenloses Wireframe sichern">Kostenloses Wireframe sichern</a> -->


        <!-- STEP 2: Grundlage fürs Wireframe -->
        <fieldset class="form-step" data-step="2" aria-labelledby="step2Title">
          <legend id="step2Title" class="sr-only">Grundlagen</legend>
          <div class="service-block" data-service="wire">
            <h3 class="block-title">Kurz die Basis</h3>
            <label class="select-row">
              <span>CI/Branding vorhanden?</span>
              <select name="wire_branding" required>
                <option value="">Bitte wählen</option>
                <option value="styleguide_vorhanden">Styleguide vorhanden</option>
                <option value="nur_logo">Nur Logo/Grundfarben</option>
                <option value="keins">Kein Branding – neutral</option>
              </select>
            </label>
            <label class="select-row">
              <span>Material (optional)</span>
              <select name="wire_material">
                <option value="">Bitte wählen</option>
                <option value="content_vorhanden">Texte/Bilder grob vorhanden</option>
                <option value="platzhalter_ok">Platzhalter / Lorem OK</option>
              </select>
            </label>
          </div>
        </fieldset>

        <!-- STEP 3: Scope & Fokus -->
        <fieldset class="form-step" data-step="3" aria-labelledby="step3Title">
          <legend id="step3Title" class="sr-only">Wireframe-Scope</legend>
          <div class="service-block" data-service="wire">
            <h3 class="block-title">Scope & Fokus</h3>
            <label class="select-row">
              <span>Welche Seiten/Flows sollen enthalten sein?</span>
              <select name="wire_scope" required>
                <option value="">Bitte wählen</option>
                <option value="landingpage">Landingpage</option>
                <option value="homepage_plus_2">Homepage + 2 Unterseiten</option>
                <option value="checkout_flow">Checkout/Lead-Flow</option>
                <option value="custom_flow">Individuelle Auswahl (beschreiben)</option>
              </select>
            </label>
            <fieldset class="checkbox-group tags" aria-label="Wireframe-Fokus">
              <legend class="checkbox-legend">Fokus</legend>
              <label class="pill"><input type="checkbox" name="wire_focus[]" value="Struktur" /><span>Struktur</span></label>
              <label class="pill"><input type="checkbox" name="wire_focus[]" value="UX-Flow" /><span>UX-Flow</span></label>
              <label class="pill"><input type="checkbox" name="wire_focus[]" value="Above-the-Fold" /><span>Above-the-Fold</span></label>
              <label class="pill"><input type="checkbox" name="wire_focus[]" value="CTA-Hierarchie" /><span>CTA-Hierarchie</span></label>
            </fieldset>
          </div>
        </fieldset>

<!-- STEP 4: Timing -->
<fieldset class="form-step" data-step="4" aria-labelledby="step4Title">
  <legend id="step4Title" class="sr-only">Timing</legend>

  <div class="input-row" id="deadlineRow">
    <label for="deadlineDate" class="req">Wunschtermin Erstgespräch</label>

    <div class="deadline-grid">
      <input
        type="date"
        id="deadlineDate"
        required
        aria-describedby="deadlineHelp"
      />
      <input
        type="time"
        id="deadlineTime"
        required
        step="900"
      />
    </div>

    <small id="deadlineHelp">Bitte Datum &amp; Uhrzeit wählen (15-Min-Takt).</small>

    <!-- Wichtig: bleibt Name "deadline" für dein Backend/Formspree -->
    <input type="hidden" name="deadline" id="deadlineISO" />
  </div>
</fieldset>

        <!-- STEP 5: Kontaktdaten -->
        <fieldset class="form-step" data-step="5" aria-labelledby="step5Title">
          <legend id="step5Title" class="sr-only">Kontaktdaten</legend>

          <!-- Hidden (nur gewünschte Felder) -->
          <input type="hidden" name="_subject" id="autoSubject" />
          <textarea class="sr-only" name="summary_plain" id="summaryPlain" aria-hidden="true"></textarea>
          <input type="hidden" name="selected_service" id="selectedService" value="Kostenloses Wireframe" />

          <!-- Responsive Kontakt-Grid -->
          <div class="contact-grid">
            <div class="field span-6">
              <label for="name" class="req">Name</label>
              <input id="name" type="text" name="name" placeholder="Dein Name" autocomplete="name" required />
            </div>

            <div class="field span-6">
              <label for="email" class="req">E-Mail</label>
              <input id="email" type="email" name="email" placeholder="dein@mail.de" autocomplete="email" required />
            </div>

            <div class="field span-12">
              <label for="message" class="req">Kurz dein Ziel</label>
              <textarea id="message" name="message" rows="6" placeholder="Was soll das Wireframe zeigen? Wichtigste Seiten/Flows…" minlength="5" required></textarea>
            </div>

            <p class="req-note">* Pflichtfelder</p>
          </div>

          <p class="legal-hint">
            Deine Angaben werden über <strong>Formspree</strong> zur Beantwortung deiner Anfrage verarbeitet.
            Mehr unter <a href="/datenschutz.html" target="_blank" rel="noopener">Datenschutz</a>.
          </p>

          <p class="legal-hint">
            Wenn du <strong>keine Weiterarbeit wünschst</strong>, löschen wir das Wireframe.
            <strong>Rechte</strong> an Wireframes & Konzepten verbleiben bis zur Beauftragung <strong>bei uns</strong>.
          </p>
        </fieldset>

        <!-- STEP 6: Abschluss / Erfolg -->
        <fieldset class="form-step" data-step="6" aria-labelledby="step6Title">
          <legend id="step6Title" class="sr-only">Abschluss</legend>
          <div class="success-card" role="status" aria-live="polite">
            <h3 class="success-title">Geschafft! 🎉</h3>
            <p class="success-copy">Danke für deine Anfrage – wir melden uns in Kürze zur Terminbestätigung.</p>
            <p class="success-sub">Du kannst jetzt neu starten oder diese Seite schließen.</p>
            <button type="button" class="success-btn" disabled>✅ Anfrage gesendet</button>
          </div>
        </fieldset>

        <!-- === Progressbar === -->
        <div class="stepper" aria-label="Fortschritt" role="progressbar" aria-valuemin="1" aria-valuemax="6" aria-valuenow="1">
          <div class="stepper-header">
            <span id="stepLabel">Schritt 1/6</span>
          </div>
          <div class="stepper-track">
            <div class="stepper-fill" id="stepperFill" style="width:12%"></div>
          </div>
        </div>

        <!-- Wizard Navigation -->
        <div class="wizard-nav" id="wizardNav">
          <button type="button" class="nav-btn prev" id="prevBtn" disabled>Zurück</button>
          <button type="button" class="nav-btn next" id="nextBtn">Weiter</button>
          <button type="submit" class="kontakt-btn submit" id="submitBtn" hidden>Senden!</button>
        </div>
      </form>
    </div>

    <!-- Videokarte (klickbar pausieren/abspielen) -->
    <div class="video-area" aria-label="Einblick in Prozess, Tools & Zusammenarbeit">
      <div class="video-card" id="videoCard" role="button" tabindex="0" aria-label="Video abspielen/pausieren">
        <video class="video-media" id="promoVideo" autoplay loop muted playsinline preload="auto">
          <source src="./indexFotoSlideShow/kartenvideo.mp4" type="video/mp4" />
          Dein Browser unterstützt das Video-Tag nicht.
        </video>
      </div>
    </div>

    <!-- Testimonials (volle Breite darunter) -->
    <div class="testimonial-area">
      <testimonial-slider></testimonial-slider>
    </div>
  </div>
</section>
<style>
/* ==============================
   THEME TOKENS
   ============================== */
:root{
  /* surfaces & text */
  --surface:#fff; --surface-elev:#f7f8fa; --text:#0b0c0e; --muted:#5d6066; --aur-ink:#0b0c10; --aur-ink-muted:#0f1729;
  --border:#e6e8eb; --btn-text:#fff;
  /* inputs */
  --input-bg:#ffffffcc; --input-text:#0b0c0e; --placeholder:#8b9096;
  /* accent */
  --choice-green:#00c851; --choice-ink:#ffffff; --choice-orange:#f97316;
  /* pills */
  --pill-bg:#f3f5f7; --pill-text:#0b0c0e; --pill-green:#00c851; --pill-green-ink:#ffffff;
  /* shadows */
  --aur-shadow-light:0 1px 2px rgba(0,0,0,.06); --aur-shadow-strong:0 1px 2px rgba(0,0,0,.18);
}
:root[data-theme="dark"]{
  --surface:#000; --surface-elev:#111216; --text:#f5f7fa; --muted:#c6cad1;
  --border:#262a31; --input-bg:#111216cc; --input-text:#f5f7fa; --placeholder:#95a0ad;
  --pill-bg:#1b1d22; --pill-text:#e8ecf2;
}

/* ==============================
   GLOBAL RESETS
   ============================== */
html, body{ box-sizing:border-box; overflow-x:hidden; margin:0; padding:0; }
*, *::before, *::after{ box-sizing:inherit; }
.sr-only{ position:absolute!important; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

/* ==============================
   SECTION & WRAPPER
   ============================== */
.kontakt-testimonial-section{
  background:var(--surface); color:var(--text);
  padding:clamp(2.5rem,5.5vw,5rem) 1.5rem;
  margin-top:clamp(4rem,8vw,8rem);
  font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;
}
.kontakt-testimonial-wrapper{
  max-width:1440px; margin:0 auto; display:flex; gap:clamp(1.5rem,3.5vw,3rem);
  flex-wrap:wrap; justify-content:space-between; align-items:stretch;
}

/* Karten (gleich hoch nebeneinander) */
.kontakt-area, .video-area{ flex:1 1 480px; max-width:640px; min-width:300px; }
.kontakt-area{
  position:relative; isolation:auto; /* für Hover-Schatten */
  background:color-mix(in oklab,var(--surface-elev) 85%,transparent);
  border:1px solid var(--border); border-radius:18px;
  padding:clamp(1.1rem,2vw,1.6rem);
  box-shadow:0 10px 30px rgba(0,0,0,.06);
  backdrop-filter:blur(8px) saturate(1.02);
  overflow:visible; min-width:0;
}

/* ==============================
   VIDEO CARD
   ============================== */
.video-area{ display:flex; }
.video-card{
  position:relative; display:flex; flex-direction:column; gap:.8rem; width:100%;
  background:color-mix(in oklab,var(--surface-elev) 85%,transparent);
  border:1px solid var(--border); border-radius:18px;
  padding:clamp(1.1rem,2vw,1.6rem);
  box-shadow:0 10px 30px rgba(0,0,0,.06);
  backdrop-filter:blur(8px) saturate(1.02);
  overflow:hidden;
}
.video-header{ display:flex; flex-direction:column; gap:.15rem; text-align:center; }
.video-title{ margin:0; font-size:clamp(1.2rem,1rem + .9vw,1.6rem); font-weight:900; letter-spacing:-.01em; color:var(--aur-ink); text-shadow:var(--aur-shadow-light); }
.video-sub{ margin:0; color:var(--muted); font-weight:650; }
.video-wrapper{ position:relative; flex:1 1 auto; min-height:260px; border-radius:14px; overflow:hidden; background:#000; }
.video-media, .video-embed{ position:absolute; inset:0; width:100%; height:100%; object-fit:cover; border:0; display:block; }

/* Testimonials volle Breite unter den Karten */
.testimonial-area{ flex:1 1 100%; max-width:100%; min-width:280px; }

/* ==============================
   TYPOGRAPHY
   ============================== */
.section-title{
  font-size:clamp(1.9rem,1.5rem + 2.2vw,2.65rem); font-weight:900; letter-spacing:-.02em; line-height:1.12;
  margin:.1rem 0 .45rem; text-wrap:balance; color:var(--aur-ink); text-shadow:var(--aur-shadow-light);
  text-align:center; margin-inline:auto;
}
.kontakt-subline{
  color:var(--aur-ink-muted); max-width:62rem; margin:0 auto 1.15rem; line-height:1.6;
  font-size:clamp(1.02rem,1rem + .5vw,1.18rem); letter-spacing:.004em; text-wrap:pretty;
  padding:.85rem .95rem; border-radius:14px;
  background:linear-gradient(180deg, rgba(15,23,41,.06), rgba(15,23,41,.03));
  box-shadow:inset 0 1px 0 rgba(255,255,255,.7), 0 2px 8px rgba(0,0,0,.05);
  text-align:center;
}
:root[data-theme="dark"] .kontakt-subline{
  color:#fff; background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  box-shadow:inset 0 1px 0 rgba(255,255,255,.18), 0 2px 8px rgba(0,0,0,.35);
}
.kontakt-area .copy{ color:rgba(0,0,0,.92); font-weight:690; letter-spacing:-.002em; font-size:clamp(1rem,.96rem + .35vw,1.12rem); line-height:1.55; margin:0 0 .25rem; }
.step1-copy{ margin-bottom:.25rem!important; }
:root[data-theme="dark"] .kontakt-area .copy{ color:rgba(255,255,255,.96); }

/* ==============================
   FORM BASICS
   ============================== */
.kontakt-form{ display:flex; flex-direction:column; gap:.65rem; width:100%; max-width:100%; overflow:clip; }
.kontakt-form input, .kontakt-form textarea, .kontakt-form select{
  width:100%; padding:.85rem .95rem; font-size:1rem; border:1px solid var(--border); border-radius:12px;
  background:var(--input-bg); color:var(--input-text);
  box-shadow:0 2px 8px rgba(0,0,0,.04);
  transition:border-color .2s ease, box-shadow .2s ease, background-color .2s ease;
  appearance:none;
}
/* Typo-Konsistenz */
.kontakt-form, .kontakt-form input, .kontakt-form textarea, .kontakt-form select, .kontakt-form button{
  font-family:inherit; color:var(--input-text); letter-spacing:.004em;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
.kontakt-form ::placeholder{ color:var(--placeholder); opacity:1; }

/* Autofill */
.kontakt-form input:-webkit-autofill,
.kontakt-form textarea:-webkit-autofill,
.kontakt-form select:-webkit-autofill{
  -webkit-text-fill-color:var(--input-text);
  transition:background-color 9999s ease-out, color 9999s ease-out;
  box-shadow:0 0 0 1000px var(--input-bg) inset!important;
}
:root[data-theme="dark"] .kontakt-form input:-webkit-autofill,
:root[data-theme="dark"] .kontakt-form textarea:-webkit-autofill,
:root[data-theme="dark"] .kontakt-form select:-webkit-autofill{
  -webkit-text-fill-color:var(--input-text);
  box-shadow:0 0 0 1000px color-mix(in oklab,var(--input-bg) 92%, black 8%) inset!important;
}

/* ==============================
   STEPS / STEPPER
   ============================== */
.form-step{ display:none; max-width:100%; }
.form-step.active{ display:block; }
.form-step[data-step="1"]{ margin-bottom:.05rem; }
.form-step[data-step="1"] .grid-choices{ margin-bottom:.05rem; }

/* Stepper */
.stepper{ display:flex; flex-direction:column; gap:.2rem; margin:.25rem 0 .05rem; padding-top:.25rem; border-top:1px solid color-mix(in oklab,var(--border) 75%, transparent); }
.stepper-header{ display:flex; justify-content:space-between; align-items:center; font-weight:800; font-size:.88rem; color:var(--muted); line-height:1; margin-bottom:.05rem; }
.stepper-track{ position:relative; width:100%; height:6px; background:color-mix(in oklab,var(--choice-green) 12%, transparent); border-radius:999px; overflow:hidden; }
.stepper-fill{
  position:absolute; inset:0 auto 0 0; width:0%; height:100%;
  background:linear-gradient(90deg, var(--choice-green), color-mix(in oklab,var(--choice-green) 82%, #007e33 18%));
  border-radius:999px; transition:width .22s ease;
  box-shadow:0 2px 10px color-mix(in oklab,var(--choice-green) 35%, transparent);
}

/* ==============================
   CHOICES (Step 1)
   ============================== */
.grid-choices{ display:grid; grid-template-columns:repeat(3,1fr); gap:.5rem; max-width:100%; overflow:visible; }
@media (max-width:680px){ .grid-choices{ grid-template-columns:1fr; } }

.choice{
  position:relative; display:flex; flex-direction:column; gap:.12rem;
  padding:.85rem; border:2px solid var(--border); border-radius:14px;
  cursor:pointer; user-select:none; background:var(--surface);
  transition:box-shadow .15s ease, border-color .15s ease, transform .06s ease, background .15s ease, color .15s ease;
  outline:none; transform-origin:center; will-change:transform;
}
.choice:hover{ box-shadow:0 0 0 3px color-mix(in oklab,var(--choice-green) 25%, transparent); }
.choice:active{ transform:scale(.995); }
.choice .title{ display:block; font-weight:950; letter-spacing:-.01em; line-height:1.18; font-size:clamp(1.06rem, .96rem + .8vw, 1.5rem); text-shadow:var(--aur-shadow-light); }
.choice small{ color:var(--muted); display:block; margin-top:.02rem; font-size:clamp(.9rem, .86rem + .25vw, 1rem); font-weight:650; text-shadow:var(--aur-shadow-light); }
.choice input[type="radio"]{ position:absolute; opacity:0; pointer-events:none; inset:0; width:100%; height:100%; }
.choice.selected{ border-color:var(--choice-green); background:var(--choice-green); color:var(--choice-ink); box-shadow:0 6px 18px rgba(0,200,81,.25); }
.choice.selected .title, .choice.selected small{ color:var(--choice-ink)!important; text-shadow:0 1px 1px rgba(0,0,0,.12); }

/* Fokus-States großflächig */
.choice:focus-visible, .choice:focus-within{
  outline:none; border-color:var(--choice-green)!important;
  box-shadow:0 0 0 4px color-mix(in oklab,var(--choice-green) 45%, transparent), 0 8px 24px rgba(0,200,81,.15)!important;
  background:color-mix(in oklab,var(--choice-green) 12%, var(--surface) 88%);
}

/* ==============================
   SERVICE BLOCKS, TAGS & PILLS
   ============================== */
.service-block{ margin:.55rem 0 .55rem; padding:.55rem .7rem .7rem; border:1px dashed var(--border); border-radius:12px; background:color-mix(in oklab,var(--surface) 85%, transparent); }
.service-block[hidden]{ display:none!important; }
.block-title{ margin:.12rem 0 .45rem; font-size:1.04rem; font-weight:900; letter-spacing:-.01em; }
.select-row, .input-row{ display:flex; flex-direction:column; gap:.3rem; margin-bottom:.5rem; }

.tags{ display:grid; gap:.45rem; grid-template-columns:repeat(auto-fit, minmax(160px,1fr)); margin-top:.05rem; }
.checkbox-legend{ font-weight:800; margin-bottom:.15rem; }
.pill{
  position:relative; display:flex; align-items:center; justify-content:center;
  min-height:40px; padding:.5rem .65rem; border:2px solid var(--border); border-radius:12px;
  background:var(--pill-bg); color:var(--pill-text); cursor:pointer; user-select:none;
  transition:transform .06s ease, background .15s ease, border-color .15s ease, color .15s ease, box-shadow .15s ease;
}
.pill:hover{ box-shadow:0 0 0 3px color-mix(in oklab,var(--choice-green) 25%, transparent); }
.pill:active{ transform:scale(.992); }
.pill input{ position:absolute; opacity:0; pointer-events:none; }
.pill span{ font-weight:800; letter-spacing:-.01em; }
.pill.selected{ background:var(--pill-green); color:var(--pill-green-ink); border-color:var(--pill-green); box-shadow:0 6px 18px rgba(0,200,81,.25); }

/* Pill: Fokus großflächig */
.pill:focus-visible, .pill:focus-within{
  outline:none; background:var(--pill-green)!important; color:var(--pill-green-ink)!important; border-color:var(--pill-green)!important;
  box-shadow:0 0 0 4px color-mix(in oklab,var(--pill-green) 45%, transparent), 0 8px 22px rgba(0,200,81,.22)!important;
}

/* Checkbox → ganze Pill grün */
.pill input[type="checkbox"]:checked ~ *{
  background:var(--pill-green); color:var(--pill-green-ink); border-color:var(--pill-green);
  box-shadow:0 6px 18px rgba(0,200,81,.25);
}

/* ==============================
   WIZARD NAVIGATION
   ============================== */
.wizard-nav{ display:flex; gap:.55rem; align-items:center; margin-top:.1rem; padding-top:.25rem; }
.nav-btn{
  background:var(--surface-elev); color:var(--text);
  border:1px solid var(--border); padding:.7rem .9rem; border-radius:12px; font-weight:800; cursor:pointer; transition:none;
}
.nav-btn[disabled]{ opacity:.55; cursor:not-allowed; }
.nav-btn.next{ background:var(--choice-green); color:var(--choice-ink); border:none; box-shadow:0 6px 18px color-mix(in oklab,var(--choice-green) 40%, transparent); }

/* Submit-Button (orange) */
#submitBtn, .kontakt-btn.submit{
  background:var(--choice-orange); color:#fff;
  border:1px solid color-mix(in oklab,#f97316 80%, #000 10%);
  padding:.7rem .9rem; border-radius:12px; font-weight:800; font-size:1rem; cursor:pointer;
  transition:background-color .2s ease, transform .06s ease, box-shadow .15s ease;
  box-shadow:0 2px 6px rgba(249,115,22,.25);
}
#submitBtn:hover, .kontakt-btn.submit:hover{ background:color-mix(in oklab,#f97316 90%, white 10%); }
#submitBtn:active, .kontakt-btn.submit:active{ transform:translateY(1px); box-shadow:0 1px 3px rgba(249,115,22,.3); }
#submitBtn[disabled], .kontakt-btn.submit[disabled]{ opacity:.6; cursor:not-allowed; box-shadow:none; }

/* Step 5: Submit linksbündig */
.kontakt-area .form-step[data-step="5"] + .wizard-nav{
  display:flex!important; justify-content:flex-start!important; text-align:left!important; width:100%;
}
.kontakt-area .form-step[data-step="5"] + .wizard-nav #submitBtn,
.kontakt-area .form-step[data-step="5"] + .wizard-nav .kontakt-btn.submit{
  justify-content:flex-start!important; align-self:flex-start!important;
  margin-left:0!important; margin-right:auto!important; width:auto!important; min-width:160px;
}
.kontakt-area .form-step[data-step="5"] + .wizard-nav .nav-btn:not(#submitBtn){ margin-right:.6rem; }

/* ==============================
   SUCCESS STEP (6)
   ============================== */
.form-step[data-step="6"]{ display:none; }
.form-step.active[data-step="6"]{ display:block; }
.success-card{
  display:flex; flex-direction:column; align-items:center; justify-content:center; gap:.6rem;
  min-height:var(--step6-minh,320px); padding:1rem; border:2px solid var(--choice-green); border-radius:14px;
  background:color-mix(in oklab,var(--choice-green) 8%, var(--surface) 92%); text-align:center;
}
.success-title{ font-weight:900; letter-spacing:-.01em; font-size:clamp(1.4rem,1.1rem + 1vw,1.9rem); }
.success-copy{ font-weight:700; letter-spacing:-.002em; font-size:clamp(1.02rem,.98rem + .35vw,1.16rem); opacity:.95; }
.success-sub{ color:var(--muted); }
.success-btn{ margin-top:.2rem; padding:.8rem 1rem; border-radius:12px; border:none; background:var(--choice-green); color:var(--choice-ink); font-weight:850; box-shadow:0 6px 18px rgba(0,200,81,.25); }
form.is-success .wizard-nav, form.is-success .stepper{ display:none!important; }
.success-card.fade-out{ animation:successFade 3s ease forwards; }
@keyframes successFade{ to{ opacity:0; transform:translateY(6px); } }

/* ==============================
   STEP 5 – CONTACT GRID
   ============================== */
.form-step[data-step="5"]{
  color:var(--text); line-height:1.55; letter-spacing:.004em;
  font-size:clamp(1rem,.96rem + .35vw,1.12rem); text-align:left!important;
}
.form-step[data-step="5"] .contact-grid{
  display:grid; grid-template-columns:repeat(12, minmax(0,1fr)); gap:.65rem; justify-items:stretch; align-items:start;
}
.form-step[data-step="5"] .field{ grid-column:span 12; display:flex; flex-direction:column; gap:.35rem; font:inherit; color:inherit; text-align:left!important; }
.form-step[data-step="5"] .field label{ font-weight:800; letter-spacing:-.01em; color:var(--aur-ink); }
.form-step[data-step="5"] .field input,
.form-step[data-step="5"] .field textarea,
.form-step[data-step="5"] .field select{ width:100%; font:inherit; color:inherit; line-height:1.4; }
.form-step[data-step="5"] .field textarea{ min-height:clamp(120px,16vh,220px); resize:vertical; }
.form-step[data-step="5"] .field .field-error{ line-height:1.25; }
.form-step[data-step="5"] .span-12{ grid-column:span 12; }
.form-step[data-step="5"] .span-6{ grid-column:span 12; }
.form-step[data-step="5"] .span-4{ grid-column:span 12; }
.form-step[data-step="5"] .span-8{ grid-column:span 12; }
/* Dark overrides Step 5 */
:root[data-theme="dark"] .form-step[data-step="5"] .field label{ color:#f5f7fa!important; }
:root[data-theme="dark"] .form-step[data-step="5"] input,
:root[data-theme="dark"] .form-step[data-step="5"] textarea,
:root[data-theme="dark"] .form-step[data-step="5"] select{
  color:#f5f7fa!important; background:var(--input-bg)!important; border-color:var(--border)!important; caret-color:#f5f7fa;
}
:root[data-theme="dark"] .form-step[data-step="5"] ::placeholder{ color:var(--placeholder)!important; opacity:1; }
:root[data-theme="dark"] .form-step[data-step="5"] .field .field-error{ color:#ffb4c0!important; }
:root[data-theme="dark"] .form-step[data-step="5"] .req-note,
:root[data-theme="dark"] .form-step[data-step="5"] ~ .legal-hint{ color:#e6e9ee!important; }

/* Step 5: linkslastige Navigation */
.kontakt-area .form-step[data-step="5"] .field input,
.kontakt-area .form-step[data-step="5"] .field select,
.kontakt-area .form-step[data-step="5"] .field textarea{ text-align:left; }

/* ==============================
   DEADLINE PICKER & MISC
   ============================== */
.deadline-grid{ display:grid; grid-template-columns:1fr 1fr; gap:.5rem; }
@media (max-width:540px){ .deadline-grid{ grid-template-columns:1fr; } }
#deadlineRow .field-error{ margin-top:.25rem; }

/* Auswahlkarte dauerhaft grün bei .selected */
#choiceWire.selected{ background:var(--pill-green); color:#fff; border-color:var(--pill-green); box-shadow:0 6px 18px rgba(0,200,81,.25); }
#choiceWire.selected h3, #choiceWire.selected p, #choiceWire.selected .btn{ color:#fff; }
#choiceWire.selected .btn{ background:#fff; color:var(--pill-green-ink); border:none; }

/* Rechtliches */
.legal-hint{ font-size:.85rem; line-height:1.45; color:#666; margin:.4rem 0 .2rem; }
.legal-hint a{ color:inherit; text-decoration:underline; }
:root[data-theme="dark"] .legal-hint{ color:#c6cad1; }
label.req::after{ content:" *"; color:#b00020; font-weight:900; }
.req-note{ font-size:.85rem; color:#666; margin:.2rem 0 .4rem; }
:root[data-theme="dark"] .req-note{ color:#c6cad1; }

/* ==============================
   HERO CARD (optional single choice)
   ============================== */
.grid-choices.single{ grid-template-columns:1fr; }
.grid-choices.single .choice.hero{ width:100%; }

.wf-card.hero{
  position:relative; display:flex; flex-direction:column; align-items:center; text-align:center;
  gap:.55rem; padding:clamp(1.1rem, 3.2vw, 2rem);
  border-radius:16px; border:2px solid var(--border);
  background:#fff!important; color:#0b0c0e!important;
  box-shadow:0 10px 30px rgba(0,0,0,.06), inset 0 0 0 1px rgba(0,0,0,.06);
  margin-top:1rem;
}
:root[data-theme="dark"] .wf-card.hero{
  background:#000!important; color:#f5f7fa!important; border:2px solid var(--border);
}
.wf-card.hero .wf-badge{
  position:absolute; top:clamp(8px,1vw,14px); right:clamp(8px,1vw,14px);
  padding:0; border:none!important; background:none!important; box-shadow:none!important;
  color:currentColor; font-weight:1000; letter-spacing:-.02em; line-height:1;
  font-size:clamp(1.6rem, 1rem + 3vw, 3rem);
}
.wf-card.hero .wf-card-head{ display:flex; flex-direction:column; align-items:center; gap:.35rem; padding-right:clamp(56px,5.5vw,80px); }
.wf-card.hero .title{
  margin:.05rem 0 0; font-weight:1000; letter-spacing:-.022em; line-height:1.15;
  font-size:clamp(1.1rem, .9rem + 1.1vw, 1.55rem);
}
.wf-card.hero small{ font-weight:760; opacity:.95; letter-spacing:.003em; line-height:1.24; font-size:clamp(.96rem,.9rem + .35vw,1.08rem); margin-top:.15rem; }
.wf-card.hero .cta-inline{
  margin-top:.4rem; padding:clamp(.9rem,.7rem + .6vw,1.05rem) clamp(1rem,.8rem + 1vw,1.35rem);
  border-radius:14px; font-weight:950; font-size:clamp(1rem,.92rem + .4vw,1.15rem); letter-spacing:.004em;
  border:none; cursor:pointer; display:inline-flex; align-items:center; justify-content:center;
  background:var(--choice-green); color:var(--choice-ink);
  box-shadow:0 10px 22px color-mix(in oklab,var(--choice-green) 35%, transparent), inset 0 1px 0 rgba(255,255,255,.25);
  transition:transform .06s ease, box-shadow .15s ease, filter .15s ease;
}
.wf-card.hero:hover{ box-shadow:0 0 0 4px color-mix(in oklab,var(--choice-green) 22%, transparent), 0 10px 30px rgba(0,0,0,.18); }
.wf-card.hero:focus-visible, .wf-card.hero:focus-within{
  outline:none; border-color:var(--choice-green)!important;
  box-shadow:0 0 0 4px color-mix(in oklab,var(--choice-green) 45%, transparent), 0 10px 28px rgba(0,200,81,.18)!important;
  background:color-mix(in oklab,var(--choice-green) 10%, currentColor 0%, transparent)!important;
}
@media (max-width:560px){ .wf-card.hero .wf-card-head{ padding-right:60px; } }

/* ==============================
   RESPONSIVE
   ============================== */
/* Kartenbreiten-Gewichtung desktop */
.kontakt-area{ flex:1.2 1 640px; max-width:780px; }
.video-area{ flex:0.8 1 420px; max-width:540px; }

/* 1024px–1148px: Kontakt oben, Video darunter, volle Breite */
@media (min-width:1024px) and (max-width:1148px){
  .kontakt-testimonial-wrapper{ flex-direction:column; align-items:center; justify-content:flex-start; gap:1.75rem; }
  .kontakt-area, .video-area{
    flex:0 0 auto; width:min(92vw,780px); max-width:100%; margin-inline:auto;
  }
  .kontakt-area{ order:1; } .video-area{ order:2; } .testimonial-area{ order:3; width:100%; }
  .video-area .video-card{ height:auto; min-height:260px; }
}

/* 680px–1024px: stapeln, nicht strecken */
@media (max-width:1024px) and (min-width:680px){
  .kontakt-testimonial-wrapper{ flex-direction:column; align-items:center; }
  .kontakt-area, .video-area{
    flex:0 0 auto!important; width:min(92vw,780px); height:auto!important; margin-inline:auto;
  }
  .video-area .video-card{ height:auto!important; min-height:280px; aspect-ratio:16/9; }
  .kontakt-area{ padding:clamp(14px,2.2vw,20px)!important; }
}

/* ≤1024px: mobiles Polish inkl. Safe Areas */
@media (max-width:1024px){
  .kontakt-testimonial-section{
    padding:
      max(16px, calc(env(safe-area-inset-top,0) + 12px))
      max(16px, calc(env(safe-area-inset-right,0) + 12px))
      max(20px, calc(env(safe-area-inset-bottom,0) + 12px))
      max(16px, calc(env(safe-area-inset-left,0) + 12px));
  }
  .kontakt-testimonial-wrapper{ gap:clamp(12px,4vw,18px); flex-direction:column; align-items:center; justify-content:center; text-align:center; }
  .kontakt-area, .video-area{ width:90%; max-width:1000px; margin-inline:auto; }
  .kontakt-area{
    width:100%; max-width:none; margin:0; border-radius:16px;
    padding:clamp(14px,4.5vw,18px)!important; overflow:visible;
  }
  .section-title{ font-size:clamp(1.7rem,4.6vw,2.1rem); margin:0 auto .6rem; }
  .kontakt-form{ padding:0 .1rem; gap:.6rem; }
  .form-step[data-step="1"] .grid-choices{ gap:.6rem; }
  .form-step[data-step="1"] .grid-choices .choice{ padding:1rem .95rem; border-radius:16px; min-height:64px; position:relative; z-index:0; }
  .form-step[data-step="1"]{ padding-top:.25rem; }

  .stepper{ position:sticky; bottom:0; background:color-mix(in oklab,var(--surface) 95%, transparent); padding:.3rem .2rem .2rem; margin:.25rem -.2rem 0; border-radius:12px; }
  .wizard-nav{ position:sticky; bottom:0; background:color-mix(in oklab,var(--surface) 95%, transparent); padding:.25rem .2rem .3rem; margin:.05rem -.2rem 0; border-radius:12px; }
  .wizard-nav .nav-btn{ flex:1 1 auto; }

  .kontakt-form input, .kontakt-form select, .kontakt-form textarea{ padding:.95rem 1rem; font-size:1.02rem; }

  .video-area{ width:100%; max-width:none; }
  .video-area .video-card{ height:200px!important; min-height:200px!important; border-radius:16px; padding:0; }
  .video-media{ object-fit:cover; object-position:center; }

  .form-step[data-step="5"] .contact-grid{ grid-template-columns:1fr; gap:.65rem; }
  .form-step[data-step="5"]{ font-size:clamp(1rem, 1.5vw + .96rem, 1.1rem); line-height:1.55; }
  .form-step[data-step="5"] .field label{ font-weight:800; letter-spacing:-.01em; }
  #submitBtn, .kontakt-btn.submit{ width:100%; }
}

/* ≤600px: Video flacher */
@media (max-width:600px){
  .video-area{ flex:0 0 auto; align-self:stretch; }
  .video-area .video-card{ height:180px!important; min-height:180px!important; aspect-ratio:auto!important; }
  .video-area .video-media{ object-fit:cover; object-position:center; }
}

/* ≤380px: enge Phones */
@media (max-width:380px){
  .kontakt-area{ padding:16px!important; }
  .kontakt-area .section-title{ font-size:clamp(1.5rem,7vw,1.9rem); }
}

/* ≥700px: Spalten für Step 5 aktivieren */
@media (min-width:700px){
  .form-step[data-step="5"] .span-6{ grid-column:span 6; }
  .form-step[data-step="5"] .span-4{ grid-column:span 4; }
  .form-step[data-step="5"] .span-8{ grid-column:span 8; }
}
/* ≥1024px: etwas mehr Gap im Contact Grid */
@media (min-width:1024px){
  .form-step[data-step="5"] .contact-grid{ gap:.75rem; }
}

/* ==============================
   VARIANTEN
   ============================== */
/* Solo-Variante: Kontaktkarte breit, Video ausgeblendet */
@media (min-width:840px) and (max-width:1148px){
  #kontakt.variant-solo .kontakt-testimonial-wrapper{ flex-direction:column; align-items:center; gap:clamp(16px,2.5vw,24px); }
  #kontakt.variant-solo .kontakt-area{ flex:0 0 auto!important; width:min(96vw,980px); max-width:100%; margin-inline:auto; }
  #kontakt.variant-solo .video-area{ display:none; }
}

/* ==============================
   PREFERENCES
   ============================== */
@media (prefers-reduced-motion:reduce){
  .kontakt-btn, .stepper-fill{ animation:none!important; transition:none!important; }
}
/* Hero-Karte bleibt grün, sobald ausgewählt */
#wfTimer{} /* nur damit der Block nicht ganz oben landet */

/* 1) Weiß nur anwenden, wenn NICHT selected */
.wf-card.hero:not(.selected){
  background:#fff!important;
  color:#0b0c0e!important;
}
:root[data-theme="dark"] .wf-card.hero:not(.selected){
  background:#000!important;
  color:#f5f7fa!important;
}

/* 2) Selected gewinnt gegen alle Hover/Focus-States */
#choiceWire.selected,
#choiceWire.selected:hover,
#choiceWire.selected:active,
#choiceWire.selected:focus,
#choiceWire.selected:focus-visible,
#choiceWire.selected:focus-within{
  background:var(--pill-green)!important;
  color:#fff!important;
  border-color:var(--pill-green)!important;
  box-shadow:0 6px 18px rgba(0,200,81,.25)!important;
}

/* 3) Inhalte in der ausgewählten Karte auch weiß halten */
#choiceWire.selected .title,
#choiceWire.selected small,
#choiceWire.selected .wf-badge{
  color:#fff!important;
  text-shadow:0 1px 1px rgba(0,0,0,.12);
}


</style>
<script>
(function () {
  const form = document.getElementById('kontaktForm');
  if (!form) return;

  /* =========================
     Cache DOM
  ========================== */
  const allSteps  = Array.from(form.querySelectorAll('.form-step'));
  const stepper   = form.querySelector('.stepper');
  const stepLabel = document.getElementById('stepLabel');
  const stepFill  = document.getElementById('stepperFill');
  const prevBtn   = document.getElementById('prevBtn');
  const nextBtn   = document.getElementById('nextBtn');
  const submitBtn = document.getElementById('submitBtn');

  const choiceWire = document.getElementById('choiceWire');
  const ctaInline  = document.getElementById('ctaInline');
  const wfTimerEl  = document.getElementById('wfTimer');

  // Video interaktion
  const video = document.getElementById('promoVideo');
  const videoCard = document.getElementById('videoCard');

  /* =========================
     Utility
  ========================== */
  const q  = (sel,root=form)=>root.querySelector(sel);
  const qa = (sel,root=form)=>Array.from(root.querySelectorAll(sel));
  const trim = s => (s||'').toString().trim();

  function hasVisibleControls(stepEl){
    const controls = Array.from(stepEl.querySelectorAll('input,select,textarea,button'));
    return controls.some(el => !el.disabled && !el.closest('[hidden]'));
  }
  function getApplicableSteps(){
    const base = allSteps.filter(s => hasVisibleControls(s) && s.dataset.step !== '6');
    const success = allSteps.find(s => s.dataset.step === '6');
    return form.classList.contains('is-success') && success ? [...base, success] : base;
  }
  function getCurrentIndex(){ return Math.max(0, getApplicableSteps().indexOf(currentStepEl)); }
  function clampIndex(i){ const st = getApplicableSteps(); return Math.min(Math.max(i,0), st.length-1); }
  function isContactStep(stepEl){ return stepEl?.dataset.step === '5'; }

  function setProgress(idx){
    const steps = getApplicableSteps();
    const pct = Math.min(100, Math.round((idx / (steps.length - 1)) * 100));
    stepFill.style.width = (idx === 0 ? 12 : pct) + '%';
    stepper?.setAttribute('aria-valuenow', String(idx + 1));
    stepLabel.textContent = `Schritt ${idx + 1}/${steps.length}`;
  }

  let currentStepEl = allSteps[0];

  function showStepByIndex(idx){
    const steps = getApplicableSteps();
    if(!steps.length) return;
    const targetIdx = clampIndex(idx);
    const targetEl  = steps[targetIdx];

    allSteps.forEach(s => s.classList.remove('active'));
    targetEl.classList.add('active');
    currentStepEl = targetEl;

    const isSuccess = targetEl.dataset.step === '6';

    if (isSuccess) {
      form.classList.add('is-success');
      prevBtn.hidden = true; nextBtn.hidden = true; submitBtn.hidden = true;

      const step1 = allSteps.find(s => s.dataset.step === '1');
      const h = step1 ? step1.scrollHeight : 320;
      targetEl.style.setProperty('--step6-minh', h + 'px');
      const btn = targetEl.querySelector('.success-btn');
      if (btn) {
        const freshBtn = btn.cloneNode(true);
        btn.parentNode.replaceChild(freshBtn, btn);
        freshBtn.disabled = false;
        freshBtn.textContent = 'Neu starten';
        freshBtn.addEventListener('click', ()=>resetToStep(0));
      }
    } else {
      form.classList.remove('is-success');
      prevBtn.hidden = false;
      const onContact = isContactStep(targetEl);
      nextBtn.hidden   = onContact;
      submitBtn.hidden = !onContact;
      prevBtn.disabled = targetIdx === 0;
    }

    setProgress(targetIdx);
    const first = targetEl.querySelector('input:not([disabled]):not([type="hidden"]),select:not([disabled]),textarea:not([disabled]),button:not([disabled])');
    first?.focus({preventScroll:true});
  }

  /* ======= JS-Patch: kein Auto-Checked im Reset ======= */
  function resetToStep(i=0){
    const form = document.getElementById('kontaktForm');
    const allSteps = Array.from(form.querySelectorAll('.form-step'));
    form.reset();
    form.classList.remove('is-success');
    allSteps.forEach(s => s.classList.remove('active'));
    allSteps[0].classList.add('active');

    // WICHTIG: kein automatisches Vorselektieren mehr
    const rb = form.querySelector('input[name="service"][value="Kostenloses Wireframe"]');
    if (rb) rb.checked = false;

    // Fortschritt & Fokus wie gehabt
    const stepLabel = document.getElementById('stepLabel');
    const stepFill  = document.getElementById('stepperFill');
    const prevBtn   = document.getElementById('prevBtn');
    const nextBtn   = document.getElementById('nextBtn');
    const submitBtn = document.getElementById('submitBtn');

    stepFill.style.width = '12%';
    stepLabel.textContent = 'Schritt 1/6';
    prevBtn.disabled = true;
    nextBtn.hidden   = false;
    submitBtn.hidden = true;

    // Fokus auf die Karte
    const choiceWire = document.getElementById('choiceWire');
    choiceWire?.focus({preventScroll:true});
  }

  /* =========================
     Klickbarkeit & Auto-Advance
  ========================== */
  function goNext(){
    if (isContactStep(currentStepEl)) {
      form.requestSubmit();
      return;
    }
    showStepByIndex(getCurrentIndex()+1);
  }

  // Debounce, damit kein Doppelsprung passieren kann
  let advancing = false;
  function safeNext(){
    if (advancing) return;
    advancing = true;
    goNext();
    setTimeout(()=> advancing = false, 250);
  }

  // Karte (Label) klicken -> weiter,
  // aber NICHT, wenn der Klick vom inneren CTA-Button stammt
  choiceWire?.addEventListener('click', (e)=>{
    if (e.target && e.target.closest('#ctaInline')) return;
    choiceWire.classList.add('selected');        // visuelles Feedback (grün)
    setTimeout(()=>{ safeNext(); }, 120);        // sanfter Übergang
  });

  // CTA-Button in der Karte: eigenes Handling, Bubble stoppen
  ctaInline?.addEventListener('click', (e)=>{
    e.preventDefault();
    e.stopPropagation();                         // verhindert 2. goNext() vom Label
    choiceWire.classList.add('selected');
    setTimeout(()=>{ safeNext(); }, 120);
  });

  // Enter/Space auf der Karte -> EINMAL weiter
  choiceWire?.addEventListener('keydown', (e)=>{
    if (e.key === 'Enter' || e.key === ' '){
      e.preventDefault();
      safeNext();
    }
  });

  // Top/Sticky CTA (scrollt zur Section; Weiter passiert über Karte)
  const sticky = document.getElementById('wfStickyCta');
  sticky?.addEventListener('click', ()=> {
    document.getElementById('kontakt').scrollIntoView({behavior:'smooth', block:'start'});
  });

  /* =========================
     Countdown (48h ab Seitenaufruf)
  ========================== */
  const END_TS = Date.now() + 48*60*60*1000; // 48h
  function pad(n){ return n.toString().padStart(2,'0'); }
  function tick(){
    const diff = Math.max(0, END_TS - Date.now());
    const h = Math.floor(diff/3_600_000);
    const m = Math.floor((diff%3_600_000)/60_000);
    const s = Math.floor((diff%60_000)/1000);
    if (wfTimerEl) wfTimerEl.textContent = `${pad(h)}:${pad(m)}:${pad(s)}`;
    if (diff <= 0) clearInterval(intv);
  }
  const intv = setInterval(tick, 1000); tick();

  /* =========================
     Video: click/tap toggle
  ========================== */
  if (videoCard && video) {
    const toggle = ()=> {
      if (video.paused) video.play();
      else video.pause();
    };
    videoCard.addEventListener('click', toggle);
    videoCard.addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' ') { e.preventDefault(); toggle(); }});
  }

  /* =========================
     Submit & Validierung (Basis)
  ========================== */
  let statusBox = form.querySelector('[data-status]');
  if (!statusBox) {
    statusBox = document.createElement('div');
    statusBox.setAttribute('data-status','');
    statusBox.setAttribute('role','status');
    statusBox.setAttribute('aria-live','polite');
    statusBox.style.cssText = 'margin:.5rem 0 .25rem;font-weight:700;text-align:center;';
    form.insertBefore(statusBox, form.firstChild);
  }
  const setStatus = (msg, tone='')=>{
    statusBox.textContent = msg || '';
    statusBox.style.color =
      tone==='error' ? '#b00020' :
      tone==='ok'    ? '#0a7f2e' :
      tone==='warn'  ? '#a15c00' : 'inherit';
  };

  function collectStepData(stepEl) {
    const data = {};
    stepEl.querySelectorAll('input, select, textarea').forEach(el=>{
      if (el.disabled || el.closest('[hidden]')) return;
      if (el.type === 'checkbox') {
        if (!data[el.name]) data[el.name] = [];
        if (el.checked) data[el.name].push(el.value);
      } else if (el.type === 'radio') {
        if (el.checked) data[el.name] = el.value;
      } else if (el.tagName === 'SELECT') {
        if (el.value) data[el.name] = el.value;
      } else {
        const v = trim(el.value);
        if (v) data[el.name] = v;
      }
    });
    return data;
  }

  function markInvalid(el, msg){
    el.classList.add('is-invalid');
    el.setAttribute('aria-invalid','true');
    if (!el.nextElementSibling || !el.nextElementSibling.matches('.field-error')) {
      const e = document.createElement('div');
      e.className = 'field-error';
      e.style.cssText = 'color:#b00020;font-weight:700;margin-top:.2rem;font-size:.9rem;';
      e.textContent = msg;
      el.insertAdjacentElement('afterend', e);
    } else el.nextElementSibling.textContent = msg;
  }
  function clearInvalids(){
    qa('.is-invalid', form).forEach(el=>{
      el.classList.remove('is-invalid'); el.removeAttribute('aria-invalid');
    });
    qa('.field-error', form).forEach(el=> el.remove());
  }
  function validEmail(s){ return /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(s); }
  function validateRequired(){
    clearInvalids();
    const name  = q('input[name="name"]');
    const email = q('input[name="email"]');
    const msg   = q('textarea[name="message"]');
    let ok = true;
    if (!trim(name?.value))               { markInvalid(name,'Bitte Namen angeben.'); ok=false; }
    if (!validEmail(trim(email?.value)))  { markInvalid(email,'Bitte gültige E-Mail angeben.'); ok=false; }
    if (trim(msg?.value).length < 5)      { markInvalid(msg,'Bitte kurz dein Ziel beschreiben.'); ok=false; }
    if (!ok) {
      const first = q('.is-invalid');
      first?.focus({preventScroll:true});
      setStatus('Bitte fehlende Angaben ergänzen.', 'warn');
    } else setStatus('', '');
    return ok;
  }

  let submitting = false;
  function toggleFormDisabled(disabled){
    qa('input,select,textarea,button', form).forEach(el=> el.disabled = disabled);
  }

  async function postWithTimeout(url, options={}, timeoutMs=12000) {
    const controller = new AbortController();
    const t = setTimeout(()=>controller.abort(), timeoutMs);
    try { return await fetch(url, { ...options, signal: controller.signal }); }
    finally { clearTimeout(t); }
  }

  form.addEventListener('submit', async function(e){
    e.preventDefault();
    if (submitting) return;

    if (!validateRequired()) return;

    const summary = {};
    getApplicableSteps().forEach((step, i) => { summary[`step_${i+1}`] = collectStepData(step); });

    const lines = [];
    lines.push(`[Service] Kostenloses Wireframe`);
    lines.push(`[Kontakt]`);
    lines.push(`- Name: ${summary.step_5?.name || '-'}`);
    lines.push(`- E-Mail: ${summary.step_5?.email || '-'}`);
    if (summary.step_4?.deadline) lines.push(`- Wunschtermin: ${summary.step_4.deadline}`);
    if (summary.step_5?.message) lines.push(`- Ziel: ${summary.step_5.message}`);
    const compiledPlain = lines.join('\n');

    document.getElementById('autoSubject').value  = `Anfrage: Kostenloses Wireframe`;
    document.getElementById('summaryPlain').value = compiledPlain;

    const fd = new FormData(form);
    submitting = true;
    toggleFormDisabled(true);
    submitBtn.innerText = 'Senden …';
    setStatus('Sende Anfrage …');

    try {
      const res = await postWithTimeout(form.action, {
        method:'POST',
        body:fd,
        headers:{Accept:'application/json'}
      }, 12000);
      if (!res.ok) throw new Error(res.statusText);
      submitBtn.innerText = '✅ Anfrage gesendet!';
      setStatus('Danke! Wir melden uns in Kürze.', 'ok');
      form.classList.add('is-success');
      showStepByIndex(getApplicableSteps().findIndex(s => s.dataset.step === '6'));
    } catch (err) {
      console.error(err);
      setStatus('Fehler beim Senden – bitte später erneut versuchen.', 'error');
      submitBtn.innerText = 'Fehler!';
      toggleFormDisabled(false);
    } finally {
      submitting = false;
    }
  });

  // Navigation
  prevBtn.addEventListener('click', (e)=>{ e.preventDefault(); showStepByIndex(getCurrentIndex()-1); });
  nextBtn.addEventListener('click', ()=>{ safeNext(); });

  // Init
  function init(){
    setProgress(0);
    // First focus: Karte -> Enter/Space funktioniert
    choiceWire?.focus({preventScroll:true});
  }
  init();

  /* ============================================================
     ERWEITERUNG 1: Wunschtermin (Datum + Uhrzeit → hidden "deadline")
     - erwartet in Step 4: #deadlineDate, #deadlineTime, #deadlineISO
     - 15-Minuten-Raster, Default = nächste sinnvolle Viertelstunde (≥ +30 Min)
  ============================================================ */
  (function(){
    const dateEl   = form.querySelector('#deadlineDate');
    const timeEl   = form.querySelector('#deadlineTime');
    const hiddenEl = form.querySelector('#deadlineISO');
    if (!dateEl || !timeEl || !hiddenEl) return;

    const pad = n => String(n).padStart(2,'0');
    const toLocalDateStr = d => `${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())}`;
    const toLocalTimeStr = d => `${pad(d.getHours())}:${pad(d.getMinutes())}`;
    const roundToNextQuarter = (d)=>{
      const ms = 15*60*1000;
      return new Date(Math.ceil(d.getTime()/ms)*ms);
    };

    // Min & Default setzen
    (function setMinAndDefault(){
      const now = new Date();
      // +30 Minuten, dann auf Viertelstunde runden
      const nextQ = roundToNextQuarter(new Date(now.getTime() + 30*60*1000));
      dateEl.min = toLocalDateStr(now);
      dateEl.value = toLocalDateStr(nextQ);
      // Zeit auf 15er-Takt
      const minutes = Math.floor(nextQ.getMinutes()/15)*15;
      timeEl.step = '900'; // 15 Minuten
      timeEl.value = `${pad(nextQ.getHours())}:${pad(minutes)}`;
      syncHidden();
    })();

    function syncHidden(){
      const d = dateEl.value;
      const t = timeEl.value;
      if (!d || !t) { hiddenEl.value = ''; return; }
      hiddenEl.value = `${d} ${t} (Europe/Berlin)`;
    }

    dateEl.addEventListener('change', syncHidden);
    timeEl.addEventListener('change', syncHidden);

    // Validierung: nicht in der Vergangenheit
    function validateDeadline(){
      if (!dateEl.value || !timeEl.value) return false;
      const [y,m,day] = dateEl.value.split('-').map(Number);
      const [hh,mm]   = timeEl.value.split(':').map(Number);
      const chosen = new Date(y, m-1, day, hh, mm, 0, 0);
      const now    = new Date();
      if (chosen.getTime() < now.getTime()){
        markInvalid(timeEl, 'Zeitpunkt liegt in der Vergangenheit.');
        return false;
      }
      return true;
    }

    // Bestehende Validierung erweitern
    const _validateRequired = validateRequired;
    validateRequired = function(){
      const okBase = _validateRequired();

      // alte Termin-Fehler entfernen
      [dateEl, timeEl].forEach(el=>{
        el.classList.remove('is-invalid');
        el.removeAttribute('aria-invalid');
        const e = el.nextElementSibling;
        if (e && e.classList && e.classList.contains('field-error')) e.remove();
      });

      let deadlineOK = true;
      if (!dateEl.value){ markInvalid(dateEl, 'Bitte Datum wählen.'); deadlineOK = false; }
      if (!timeEl.value){ markInvalid(timeEl, 'Bitte Uhrzeit wählen.'); deadlineOK = false; }
      if (deadlineOK) deadlineOK = validateDeadline();

      return okBase && deadlineOK;
    };
  })();

  /* ============================================================
     ERWEITERUNG 2: Fokus-Pills – vollflächige Auswahl + A11y + Fallback
     - setzt .selected auf .pill abhängig vom Checkbox-Status
     - Tastatur: Space/Enter toggeln
     - ARIA: role="checkbox", aria-checked, aria-pressed
  ============================================================ */
  (function(){
    const pills = Array.from(form.querySelectorAll('.checkbox-group.tags .pill'));
    if (!pills.length) return;

    pills.forEach(pill => {
      const cb = pill.querySelector('input[type="checkbox"]');
      if (!cb) return;

      const sync = () => {
        pill.classList.toggle('selected', cb.checked);
        pill.setAttribute('aria-pressed', cb.checked ? 'true' : 'false');
        pill.setAttribute('aria-checked', cb.checked ? 'true' : 'false');
      };

      // Semantik + Fokussierung
      pill.setAttribute('role', 'checkbox');
      pill.setAttribute('tabindex', '0');
      pill.setAttribute('aria-checked', cb.checked ? 'true' : 'false');
      pill.setAttribute('aria-pressed', cb.checked ? 'true' : 'false');

      // Initial
      sync();

      // Änderungen spiegeln
      cb.addEventListener('change', sync);

      // Klick auf die ganze Pill (Label enthält Input – hier nur Sync-Fallback & A11y)
      pill.addEventListener('click', (e) => {
        if (e.target && (e.target.tagName === 'A' || e.target.tagName === 'BUTTON')) return;
        // Der native Label-Klick toggelt bereits – wir syncen danach
        setTimeout(sync, 0);
      });

      // Tastatursteuerung
      pill.addEventListener('keydown', (e) => {
        if (e.key === ' ' || e.key === 'Enter') {
          e.preventDefault();
          cb.checked = !cb.checked;
          cb.dispatchEvent(new Event('change', { bubbles: true }));
        }
      });
    });

    // Gruppe semantisch kennzeichnen
    const group = form.querySelector('.checkbox-group.tags');
    if (group) {
      group.setAttribute('role', 'group');
      group.setAttribute('aria-label', 'Wireframe-Fokus (Mehrfachauswahl möglich)');
      group.setAttribute('aria-multiselectable', 'true');
    }
  })();

})();
</script>













































